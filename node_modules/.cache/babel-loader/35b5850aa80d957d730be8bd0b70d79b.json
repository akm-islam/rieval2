{"ast":null,"code":"import _slicedToArray from\"/Users/kaustav/NewWork/trivea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import*as d3 from'd3';import Button from'@material-ui/core/Button';import Menu from'@material-ui/core/Menu';import ArrowDropDownIcon from'@material-ui/icons/ArrowDropDown';import{connect}from'react-redux';import FormControlLabel from'@material-ui/core/FormControlLabel';import FormControl from'@material-ui/core/FormControl';import Radio from'@material-ui/core/Radio';import RadioGroup from'@material-ui/core/RadioGroup';import FormLabel from'@material-ui/core/FormLabel';import fiscal_ice from\"../../Data/data/fiscal/ice/fiscal_ice_may25.csv\";import fiscal_lime from\"../../Data/data/fiscal/lime/fiscal_lime_may25.csv\";import school_lime from\"../../Data/data/school/lime/school_lime_may25.csv\";import school_ice from\"../../Data/data/school/ice/school_ice_may25.csv\";export function SelectExpMethod(props){var _this=this;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};var process_data_mini=function process_data_mini(dataset,val,Set_lime_data){var lime_data_filename=\"\";if(dataset===\"fiscal\"){lime_data_filename=val===\"lime\"?fiscal_lime:fiscal_ice;}if(dataset===\"school\"){lime_data_filename=val===\"lime\"?school_lime:school_ice;}d3.csv(lime_data_filename).then(function(temp_data){var temp_data2=temp_data.map(function(d){var d1={};for(var _i=0,_Object$keys=Object.keys(d);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];d1[key]=d[key]===\"\"?\"0\":d[key];}return d1;});var data=temp_data2.map(function(item){item['predicted']=parseInt(item['predicted']);item['two_realRank']=parseInt(item['two_realRank']);item['deviation']=Math.abs(item['predicted']-item['two_realRank']);return item;});var nested_data={};d3.nest().key(function(d){return d.model;}).entries(data).map(function(item){nested_data[item.key]=item.values;});Set_lime_data(nested_data);});};//ending process_data_mini\nreturn/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:-2}},/*#__PURE__*/React.createElement(Button,{\"aria-controls\":\"simple-menu\",\"aria-haspopup\":\"true\",onClick:handleClick},\"Select Explanation Method\",/*#__PURE__*/React.createElement(ArrowDropDownIcon,null)),/*#__PURE__*/React.createElement(Menu,{id:\"simple-menu\",anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleClose,style:{marginTop:0}},anchorEl?/*#__PURE__*/React.createElement(\"div\",{style:{paddingLeft:10}},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(){return _this.buttonclickHandler(1,\"form\");}},/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\"},/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\"}),/*#__PURE__*/React.createElement(RadioGroup,{\"aria-label\":\"gender\",name:\"gender1\",onChange:function onChange(event,val){handleClose();process_data_mini(props.dataset,val,props.Set_lime_data);if(val===\"ice\"){props.Set_default_models(props.default_models.filter(function(item){return item!=\"RandomFor\";}));}//if(val === \"lime\"){props.Set_default_models(props.default_models.filter(item => item != \"SVM\"))}\nconsole.log(val);props.Set_exp_method(val);}},['LIME','ICE'].map(function(value){return/*#__PURE__*/React.createElement(FormControlLabel,{value:value.toLowerCase(),control:/*#__PURE__*/React.createElement(Radio,null),label:value,checked:props.exp_method===value.toLowerCase()});}))))):null));}var maptstateToprop=function maptstateToprop(state){return{state_range:state.state_range,dataset:state.dataset,exp_method:state.exp_method,default_models:state.default_models};};var mapdispatchToprop=function mapdispatchToprop(dispatch){return{Set_exp_method:function Set_exp_method(val){return dispatch({type:\"exp_method\",value:val});},Set_histogram_data:function Set_histogram_data(val){return dispatch({type:\"histogram_data\",value:val});},Set_default_models:function Set_default_models(val){return dispatch({type:\"default_models\",value:val});},Set_lime_data:function Set_lime_data(val){return dispatch({type:\"lime_data\",value:val});}};};export default connect(maptstateToprop,mapdispatchToprop)(SelectExpMethod);","map":{"version":3,"sources":["/Users/kaustav/NewWork/trivea/src/components/Top/SelectExpMethod.js"],"names":["React","d3","Button","Menu","ArrowDropDownIcon","connect","FormControlLabel","FormControl","Radio","RadioGroup","FormLabel","fiscal_ice","fiscal_lime","school_lime","school_ice","SelectExpMethod","props","useState","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClose","process_data_mini","dataset","val","Set_lime_data","lime_data_filename","csv","then","temp_data","temp_data2","map","d","d1","Object","keys","key","data","item","parseInt","Math","abs","nested_data","nest","model","entries","values","marginTop","Boolean","paddingLeft","buttonclickHandler","Set_default_models","default_models","filter","console","log","Set_exp_method","value","toLowerCase","exp_method","maptstateToprop","state","state_range","mapdispatchToprop","dispatch","type","Set_histogram_data"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport { connect } from 'react-redux';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormLabel from '@material-ui/core/FormLabel';\n\nimport fiscal_ice from \"../../Data/data/fiscal/ice/fiscal_ice_may25.csv\";\nimport fiscal_lime from \"../../Data/data/fiscal/lime/fiscal_lime_may25.csv\";\n\nimport school_lime from \"../../Data/data/school/lime/school_lime_may25.csv\";\nimport school_ice from \"../../Data/data/school/ice/school_ice_may25.csv\";\n\nexport function SelectExpMethod(props) {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const process_data_mini = (dataset,val, Set_lime_data) => {\n    var lime_data_filename = \"\";\n    if(dataset===\"fiscal\"){\n      lime_data_filename = (val === \"lime\")?fiscal_lime:fiscal_ice;\n    }\n    if(dataset===\"school\"){\n      lime_data_filename = (val === \"lime\")?school_lime:school_ice;\n    }\n    d3.csv(lime_data_filename).then(temp_data => {\n      var temp_data2 = temp_data.map(d=>{\n        var d1 = {};\n        for(var key of Object.keys(d)){\n          d1[key] = (d[key] === \"\")?\"0\":d[key]\n        }\n        return d1;\n      })\n      var data=temp_data2.map(item=>{\n        item['predicted']=parseInt(item['predicted'])\n        item['two_realRank']=parseInt(item['two_realRank'])\n        item['deviation']=Math.abs(item['predicted']-item['two_realRank'])\n        return item\n      })\n      \n    var nested_data = {}\n    d3.nest().key(function (d) { return d.model; }).entries(data).map(item => {\n      nested_data[item.key] = item.values\n    })\n    Set_lime_data(nested_data)\n  })\n  }; //ending process_data_mini\n\n\n  return (\n    <div style={{marginTop:-2}}>\n      <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>Select Explanation Method<ArrowDropDownIcon></ArrowDropDownIcon></Button>\n      <Menu id=\"simple-menu\" anchorEl={anchorEl} keepMounted open={Boolean(anchorEl)} onClose={handleClose} style={{marginTop:0}}>\n       {anchorEl?<div style={{paddingLeft:10}}><form onSubmit={() => this.buttonclickHandler(1, \"form\")}>\n                <FormControl component=\"fieldset\">\n                  <FormLabel component=\"legend\"></FormLabel>\n                  <RadioGroup aria-label=\"gender\" name=\"gender1\" onChange={(event, val) => {\n                    handleClose();\n                    process_data_mini(props.dataset, val, props.Set_lime_data);\n                    if(val === \"ice\"){props.Set_default_models(props.default_models.filter(item => item != \"RandomFor\"))}\n                    //if(val === \"lime\"){props.Set_default_models(props.default_models.filter(item => item != \"SVM\"))}\n                    console.log(val);\n                    props.Set_exp_method(val)\n                    }}>\n                    {['LIME', 'ICE'].map((value) => {\n                      return <FormControlLabel value={value.toLowerCase()} control={<Radio />} label={value} checked={props.exp_method === value.toLowerCase()} />\n                    })}\n                  </RadioGroup>\n                </FormControl>\n              </form></div>:null}\n      </Menu>\n    </div>\n  );\n}\nconst maptstateToprop = (state) => {\n  return {\n    state_range: state.state_range,\n    dataset: state.dataset,\n    exp_method: state.exp_method,\n    default_models: state.default_models,\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_exp_method: (val) => dispatch({ type: \"exp_method\", value: val }),\n    Set_histogram_data: (val) => dispatch({ type: \"histogram_data\", value: val }),\n    Set_default_models: (val) => dispatch({ type: \"default_models\", value: val }),\n    Set_lime_data: (val) => dispatch({ type: \"lime_data\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(SelectExpMethod);\n"]},"metadata":{},"sourceType":"module"}