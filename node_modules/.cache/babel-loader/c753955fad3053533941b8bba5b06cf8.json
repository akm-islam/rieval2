{"ast":null,"code":"import _classCallCheck from\"/Users/kaustav/NewWork/trivea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kaustav/NewWork/trivea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/kaustav/NewWork/trivea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/kaustav/NewWork/trivea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,PureComponent}from'react';import*as d3 from'd3';import*as $ from'jquery';import{connect}from\"react-redux\";import Grid from'@mui/material/Grid';import'./legend.scss';var Legend=/*#__PURE__*/function(_Component){_inherits(Legend,_Component);var _super=_createSuper(Legend);function Legend(props){var _this;_classCallCheck(this,Legend);_this=_super.call(this,props);_this.state={};// This is the default height\nreturn _this;}_createClass(Legend,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({rand:10});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var legend_container_width=$('.legend_container').width();var legend_container_height=$('.legend_container').height();//--------------------------- Legend 1\nvar legend1_height=100;var legend1_rScale=d3.scaleLinear().domain(d3.extent(this.props.deviation_array)).range([this.props.global_config.max_circle_r,this.props.global_config.min_circle_r]);var legend1_yScale=d3.scaleLinear().domain(d3.extent(this.props.deviation_array)).range([this.props.global_config.max_circle_r,legend1_height-5]);if(this.props.deviation_array.length>3){var legend1_ticks=[d3.min(this.props.deviation_array),Math.ceil(d3.max(this.props.deviation_array)*.33),Math.ceil(d3.max(this.props.deviation_array)*.66),d3.max(this.props.deviation_array)];}else{var legend1_ticks=this.props.deviation_array;}legend1_ticks=legend1_ticks.filter(function(item){return item%1===0;});//console.log(legend1_ticks,\"legend1_ticks\")\nvar legend1_svg=d3.select('#legend1').attr('width',legend_container_width).attr('height',legend1_height);legend1_svg.selectAll('.legend1_circles').data(legend1_ticks).join('circle').attr('class','legend1_circles').attr('cx',10).attr('cy',function(d){return legend1_yScale(d);}).attr('r',function(d){return legend1_rScale(d);}).attr('fill','grey');legend1_svg.selectAll('.legend1_text').data(legend1_ticks).join('text').attr('class','legend1_text').attr('x',23).attr('y',function(d){return legend1_yScale(d);}).attr('dominant-baseline','middle').attr('font-size',10).text(function(d){if(d==d3.min(legend1_ticks)){return d+\" (Most Precise)\";}if(d==d3.max(legend1_ticks)){return d+\" (Least Precise)\";}return d;});//--------------------------- Legend 2\nvar min=d3.min(this.props.selected_instances),max=d3.max(this.props.selected_instances);var d=(max-min)/8;//var diverginColor = d3.scaleLinear().domain([min + d * 7, min + d * 6, min + d * 5, min + d * 4, min + d * 3, min + d * 2, min]).interpolate(d3.interpolateRgb).range(['#af8dc3','#b197c1','#dbd88c','#dbd88c', '#dbd88c', '#90bc8d', '#7fbf7b']);\n//var diverginColor = d3.scaleDiverging([min,(max - min) / 2 , max], d3.interpolateSpectral)\n//var diverginColor = d3.scaleDiverging([max, parseInt((max+min)/2), min], d3.interpolateRgbBasis(['#af8dc3', '#dbd88c', '#7fbf7b']));\nvar diverginColor=d3.scaleDiverging([max,parseInt((max+min)/2),min],d3.interpolateRgbBasis(['#b37cd3','#d9d58c','#71ce6c']));//50% saturation\nvar legend2_svg_height=legend_container_height/2-50;var legend2_yScale=d3.scaleLinear().domain([min,max]).range([5,legend2_svg_height-10]);var legend2_ticks=d3.range(min,max+1,max/10);var rect_height=legend2_svg_height/legend2_ticks.length;var rect_width=12;var legend2_svg=d3.select('#legend2').attr('width',legend_container_width).attr('height',legend2_svg_height);legend2_svg.selectAll('.legend2_rects').data(legend2_ticks).join('rect').attr('class','legend2_rects').attr('x',10).attr('y',function(d,i){return rect_height*i;}).attr('width',rect_width).attr('height',rect_height).attr('fill',function(d){return diverginColor(d);});legend2_svg.selectAll(\".legend2_labels\").data([min,parseInt(max/2),max]).join(\"text\").attr(\"x\",10+rect_width+2).attr(\"class\",\"legend2_labels\").attr('dominant-baseline',\"middle\").attr('y',function(d,i){return i==0?legend2_yScale(d)+rect_height/2:legend2_yScale(d);}).text(function(d){return d;}).attr('font-size',12);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Grid,{className:\"legend_container\",container:true,direction:\"column\",justifyContent:\"center\",alignItems:\"flex-start\",style:{width:\"100%\",height:\"100%\"}},/*#__PURE__*/React.createElement(Grid,{item:true,style:{width:this.props.legend_width}},/*#__PURE__*/React.createElement(\"div\",{item:true,style:{backgroundColor:'rgb(211, 211, 211,0.5)',padding:5,marginBottom:5}},/*#__PURE__*/React.createElement(\"p\",{className:\"title\",style:{marginBottom:10}},\" Rank Deviation\"),/*#__PURE__*/React.createElement(\"svg\",{id:\"legend1\"},\" \"))),/*#__PURE__*/React.createElement(Grid,{item:true,container:true,direction:\"column\",alignItems:\"center\",style:{width:this.props.legend_width,backgroundColor:'rgb(211, 211, 211,0.5)',padding:5}},/*#__PURE__*/React.createElement(\"p\",{className:\"title\",style:{marginBottom:10}},\" Rank Range\"),/*#__PURE__*/React.createElement(\"p\",{style:{margin:0,fontSize:12,display:\"block\"}},\"High\"),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(\"svg\",{id:\"legend2\",style:{marginTop:3,marginBottom:0},transform:\"translate(40,0)\"})),/*#__PURE__*/React.createElement(\"p\",{style:{margin:0,fontSize:12}},\"Low\")));}}]);return Legend;}(Component);var maptstateToprop=function maptstateToprop(state){return{selected_instances:state.selected_instances,deviation_array:state.deviation_array,global_config:state.global_config};};var mapdispatchToprop=function mapdispatchToprop(dispatch){return{Set_legend_year:function Set_legend_year(val){return dispatch({type:\"legend_year\",value:val});}};};export default connect(maptstateToprop,mapdispatchToprop)(Legend);","map":{"version":3,"sources":["/Users/kaustav/NewWork/trivea/src/components/Legend/Legend.js"],"names":["React","Component","PureComponent","d3","$","connect","Grid","Legend","props","state","setState","rand","legend_container_width","width","legend_container_height","height","legend1_height","legend1_rScale","scaleLinear","domain","extent","deviation_array","range","global_config","max_circle_r","min_circle_r","legend1_yScale","length","legend1_ticks","min","Math","ceil","max","filter","item","legend1_svg","select","attr","selectAll","data","join","d","text","selected_instances","diverginColor","scaleDiverging","parseInt","interpolateRgbBasis","legend2_svg_height","legend2_yScale","legend2_ticks","rect_height","rect_width","legend2_svg","i","legend_width","backgroundColor","padding","marginBottom","margin","fontSize","display","marginTop","maptstateToprop","mapdispatchToprop","dispatch","Set_legend_year","val","type","value"],"mappings":"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","sourcesContent":["import React, { Component, PureComponent } from 'react';\nimport * as d3 from 'd3';\nimport * as $ from 'jquery';\nimport { connect } from \"react-redux\";\nimport Grid from '@mui/material/Grid';\nimport './legend.scss'\nclass Legend extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {} // This is the default height\n  }\n  componentDidMount() { this.setState({ rand: 10 }) }\n  componentDidUpdate() {\n    var legend_container_width = $('.legend_container').width()\n    var legend_container_height = $('.legend_container').height()\n    //--------------------------- Legend 1\n    var legend1_height = 100\n    var legend1_rScale = d3.scaleLinear().domain(d3.extent(this.props.deviation_array)).range([this.props.global_config.max_circle_r, this.props.global_config.min_circle_r])\n    var legend1_yScale = d3.scaleLinear().domain(d3.extent(this.props.deviation_array)).range([this.props.global_config.max_circle_r, legend1_height - 5])\n    if(this.props.deviation_array.length>3){\n      var legend1_ticks = [d3.min(this.props.deviation_array),Math.ceil(d3.max(this.props.deviation_array)*.33),Math.ceil(d3.max(this.props.deviation_array)*.66),d3.max(this.props.deviation_array)]\n    }\n    else{\n      var legend1_ticks = this.props.deviation_array\n    }\n    \n    legend1_ticks=legend1_ticks.filter(item=>item % 1 === 0)\n    //console.log(legend1_ticks,\"legend1_ticks\")\n    var legend1_svg = d3.select('#legend1').attr('width', legend_container_width).attr('height', legend1_height)\n    legend1_svg.selectAll('.legend1_circles').data(legend1_ticks).join('circle').attr('class', 'legend1_circles').attr('cx', 10).attr('cy', d => legend1_yScale(d)).attr('r', d => legend1_rScale(d)).attr('fill', 'grey')\n    legend1_svg.selectAll('.legend1_text').data(legend1_ticks).join('text').attr('class', 'legend1_text').attr('x', 23).attr('y', d => legend1_yScale(d)).attr('dominant-baseline', 'middle').attr('font-size', 10)\n    .text(d =>{\n      if(d==d3.min(legend1_ticks)){return d+\" (Most Precise)\" }\n      if(d==d3.max(legend1_ticks)){return d+\" (Least Precise)\" }\n      return d\n    })\n    //--------------------------- Legend 2\n    var min = d3.min(this.props.selected_instances), max = d3.max(this.props.selected_instances);\n    var d = (max - min) / 8;\n    //var diverginColor = d3.scaleLinear().domain([min + d * 7, min + d * 6, min + d * 5, min + d * 4, min + d * 3, min + d * 2, min]).interpolate(d3.interpolateRgb).range(['#af8dc3','#b197c1','#dbd88c','#dbd88c', '#dbd88c', '#90bc8d', '#7fbf7b']);\n    //var diverginColor = d3.scaleDiverging([min,(max - min) / 2 , max], d3.interpolateSpectral)\n    //var diverginColor = d3.scaleDiverging([max, parseInt((max+min)/2), min], d3.interpolateRgbBasis(['#af8dc3', '#dbd88c', '#7fbf7b']));\n    var diverginColor = d3.scaleDiverging([max, parseInt((max+min)/2), min], d3.interpolateRgbBasis(['#b37cd3', '#d9d58c', '#71ce6c'])); //50% saturation\n    var legend2_svg_height = legend_container_height / 2 - 50\n\n    var legend2_yScale = d3.scaleLinear().domain([min, max]).range([5, legend2_svg_height - 10])\n    var legend2_ticks = d3.range(min, max + 1, max / 10)\n    var rect_height = legend2_svg_height / legend2_ticks.length\n    var rect_width = 12\n    \n    var legend2_svg = d3.select('#legend2').attr('width', legend_container_width).attr('height', legend2_svg_height)\n    legend2_svg.selectAll('.legend2_rects').data(legend2_ticks).join('rect').attr('class', 'legend2_rects').attr('x', 10)\n    .attr('y', (d, i) => rect_height*i).attr('width', rect_width).attr('height', rect_height).attr('fill', d => diverginColor(d))\n    legend2_svg.selectAll(\".legend2_labels\").data([min, parseInt(max / 2), max]).join(\"text\").attr(\"x\", 10 + rect_width + 2).attr(\"class\", \"legend2_labels\").attr('dominant-baseline', \"middle\").attr('y', (d, i) => i == 0 ? legend2_yScale(d) + rect_height / 2 : legend2_yScale(d)).text(d => d).attr('font-size', 12)\n  }\n\n  render() {\n    return (\n      <Grid className=\"legend_container\" container direction=\"column\" justifyContent=\"center\" alignItems=\"flex-start\" style={{ width: \"100%\", height: \"100%\" }}>\n        <Grid item style={{width:this.props.legend_width}}>\n          <div item style={{ backgroundColor: 'rgb(211, 211, 211,0.5)', padding: 5, marginBottom: 5 }}>\n            <p className=\"title\" style={{ marginBottom: 10 }}> Rank Deviation</p>\n            <svg id=\"legend1\"> </svg>\n          </div>\n        </Grid>\n        <Grid item container direction=\"column\" alignItems=\"center\" style={{width:this.props.legend_width,backgroundColor: 'rgb(211, 211, 211,0.5)', padding: 5 }}>\n            <p className=\"title\" style={{ marginBottom: 10 }}> Rank Range</p>\n            <p style={{ margin:0,fontSize:12,display:\"block\" }}>High</p>\n            <Grid item><svg id=\"legend2\" style={{marginTop:3,marginBottom:0}} transform=\"translate(40,0)\"></svg></Grid>\n            <p style={{ margin:0,fontSize:12 }}>Low</p>\n        </Grid>\n      </Grid>\n    );\n  }\n}\nconst maptstateToprop = (state) => {\n  return {\n    selected_instances: state.selected_instances,\n    deviation_array: state.deviation_array,\n    global_config:state.global_config\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_legend_year: (val) => dispatch({ type: \"legend_year\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(Legend);"]},"metadata":{},"sourceType":"module"}