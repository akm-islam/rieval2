{"ast":null,"code":"var _jsxFileName = \"/Users/kaustav/NewWork/trivea/src/components/Charts/Model/ExpChartComponent.js\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { connect } from \"react-redux\";\nimport * as algo1 from \"../../../Algorithms/algo1\";\nimport * as $ from 'jquery';\nimport CreatexpCircle from \"../ExpChart/Create_exp_circles\";\nimport \"../ExpChart/MDS.css\";\nimport * as misc_algo from '../../../Algorithms/misc_algo';\n\nclass SlopeChart extends Component {\n  constructor(props) {\n    super(props);\n\n    this.Createsvg = (model_name, indexed_features) => {\n      var self = this;\n      var selected_instances = d3.range(this.props.state_range[0], this.props.state_range[1] + 1);\n\n      if (this.props.histogram_data.length > 0) {\n        selected_instances = this.props.histogram_data;\n      } //-------------------- Threshold filter\n\n\n      var under_threshold_instances = [];\n      var year_data = this.props.original_data.filter(item => this.props.selected_year == item['1-qid']);\n      this.props.default_models.map(model_name => {\n        year_data.map(item => {\n          var two_realRank = parseInt(item['two_realRank']);\n          var predicted_rank = parseInt(item[model_name]);\n\n          if (Math.abs(predicted_rank - two_realRank) < this.props.threshold) {\n            under_threshold_instances.push(two_realRank);\n          }\n        });\n      });\n      selected_instances = selected_instances.filter(item => under_threshold_instances.includes(item));\n      var number_of_charts = 8 + self.state.excluded_features.length;\n      var indexed_features = algo1.getSortedFeatures(this.props.lime_data[model_name], selected_instances, this.props.selected_year);\n      var temp_sorted_features = indexed_features.filter(item => !this.state.excluded_features.includes(item)); // Exclude crossed features \n\n      var sorted_features = temp_sorted_features.slice(0, number_of_charts).map((item, index) => [item, index]);\n      var marginTop = 2,\n          marginBottom = 0,\n          space_for_x_axis = 25,\n          title_rect_height = 40;\n      var parent_height = parseInt($('.explanation_chart_parent').height()) - this.state.mds_height - parseInt($('.title_p').height());\n      var item_width = parseInt($(\"#\" + model_name).width());\n      var item_height = (parent_height - space_for_x_axis) / sorted_features.length - (marginTop + marginBottom); // 10 is the top margin\n\n      var feature_containers = d3.select('#' + model_name).attr('height', parent_height).selectAll(\".feature_items\").data(sorted_features, d => d[0]).join(enter => enter.append(\"svg\").attr(\"y\", (d, i) => marginTop + i * (item_height + marginTop + marginBottom)), update => update.transition().duration(2000).attr(\"y\", (d, i) => marginTop + i * (item_height + marginTop + marginBottom)), exit => exit.remove());\n      feature_containers.attr(\"class\", d => \"feature_items \" + d[0]).attr(\"myindex\", (d, i) => i).attr('feature_name', d => d[0]).attr(\"height\", function (d) {\n        if (d[1] == sorted_features.length - 1) {\n          var ft_svg_height = 25;\n          d3.select(this.parentNode).selectAll(\".ft_svg\").remove();\n          var svg = d3.select(this.parentNode).selectAll(\".ft_svg\").data([Math.random()]).join(\"svg\").attr(\"x\", 0).attr(\"y\", parent_height - ft_svg_height).attr(\"class\", \"ft_svg\").attr(\"width\", item_width).attr(\"height\", ft_svg_height);\n          var markerBoxWidth = 8,\n              markerBoxHeight = 8,\n              refX = markerBoxWidth / 2,\n              refY = markerBoxHeight / 2;\n          svg.selectAll('defs').data([0]).join('defs').selectAll('#arrow').data([0]).join('marker').attr('id', 'arrow').attr('viewBox', [0, 0, markerBoxWidth, markerBoxHeight]).attr('refX', refX).attr('refY', refY).attr('markerWidth', markerBoxWidth).attr('markerHeight', markerBoxHeight).attr('orient', 'auto-start-reverse').append('path').attr('id', 'path1').attr('d', d3.line()([[0, 0], [0, 7], [7, 3.8]])).attr('stroke', '#777777').attr(\"fill\", \"#777777\"); //------------------------------------------------[[x2, y2], [x1, y1]]\n\n          svg.append('path').attr('d', d3.line()([[item_width / 2 - 65, 15], [50, 15]])).attr('stroke', '#777777').attr('marker-end', 'url(#arrow)').attr('fill', 'none');\n          svg.append('path').attr('d', d3.line()([[item_width - 50, 15], [65 + item_width / 2, 15]])).attr('stroke', '#777777').attr('marker-start', 'url(#arrow)').attr('fill', 'none');\n          svg.selectAll(\".myText_low\").data([0]).join(\"text\").attr(\"x\", 30).attr(\"class\", \"myText_low\").attr('dominant-baseline', \"middle\").attr(\"y\", 15).text('Low').attr('text-anchor', 'middle').attr(\"font-size\", 12).attr(\"fill\", \"#2b2828\");\n          svg.selectAll(\".myText\").data([0]).join(\"text\").attr(\"x\", item_width / 2).attr(\"class\", \"myText\").attr('dominant-baseline', \"middle\").attr(\"y\", 15).text('Attribute Importance').attr('text-anchor', 'middle').attr(\"font-size\", 12).attr(\"fill\", \"#2b2828\");\n          svg.selectAll(\".myText_high\").data([0]).join(\"text\").attr(\"x\", item_width - 30).attr(\"class\", \"myText_high\").attr('dominant-baseline', \"middle\").attr(\"y\", 15).text('High').attr('text-anchor', 'middle').attr(\"font-size\", 12).attr(\"fill\", \"#2b2828\");\n          return item_height - marginBottom - marginTop;\n        }\n\n        return item_height - marginBottom - marginTop;\n      }).attr('width', item_width);\n      feature_containers.attr(\"add_title_text_and_rect_for_title_text\", function (d, index) {\n        d3.select(this).selectAll(\".title_rect\").data([0]).join('rect').attr(\"class\", \"title_rect\").attr(\"myindex\", index).attr('feature_name', d[0]).attr(\"width\", \"100%\").attr(\"height\", title_rect_height).attr(\"fill\", \"#e2e2e2\").attr(\"y\", 0).attr(\"x\", 0);\n        d3.select(this).selectAll(\".title_text\").data([0]).join('text').attr(\"class\", \"title_text\").attr(\"myindex\", index).attr('feature_name', d[0]).attr('x', item_width / 2).text(d[0]).attr(\"dominant-baseline\", \"middle\").attr(\"y\", title_rect_height / 2).attr('text-anchor', 'middle').attr('font-size', 14);\n      });\n      feature_containers.attr(\"add_cross_button\", function (d, index) {\n        d3.select(this).selectAll(\".cross_button\").data([0]).join(\"text\").attr('y', title_rect_height / 2).attr('dominant-baseline', 'middle').attr(\"myindex\", index).attr('feature_name', d[0]).raise().attr('x', item_width - 15).style('cursor', 'pointer').attr('font-size', 14).attr('fill', 'black').text(\"\\uf410\").attr('class', \"cross_button fa make_cursor\").on('click', () => {\n          d3.event.preventDefault();\n          self.setState({\n            excluded_features: [...self.state.excluded_features, d[0]]\n          });\n        }); //---\n\n        d3.select(this).selectAll(\".expand_button\").data([0]).join(\"text\").attr('y', title_rect_height / 2).attr('dominant-baseline', 'middle').attr(\"myindex\", index).attr('feature_name', d[0]).raise().attr('x', item_width - 35).style('cursor', 'pointer').attr('font-size', 12).attr('fill', 'black').text(\"\\uf31e\").attr('class', \"expand_button fa make_cursor\").on('click', () => {\n          self.props.Set_pop_over_models([self.props.model_name]);\n          d3.event.preventDefault();\n          var feature = d[0];\n          var year = self.props.selected_year;\n          d3.event.preventDefault();\n          var temp = [...self.props.dbclicked_features];\n\n          if (!temp.includes(feature)) {\n            temp.unshift(feature);\n            d3.selectAll(\".rect\").classed(\"exp_chart_clicked\", true);\n          }\n\n          self.props.set_dbclicked_features(temp); //self.props.set_dbclicked_features([feature])\n          //----------------------------Data for popup chart\n\n          var popup_chart_data = {};\n          self.props.default_models.filter(item => item != \"ListNet\").map(model_name => {\n            var data = [];\n\n            if (self.props.histogram_data.length > 0) {\n              data = self.props.lime_data[model_name].filter(element => {\n                if (parseInt(element['1-qid']) == parseInt(year) && self.props.histogram_data.includes(parseInt(element['two_realRank']))) {\n                  return element;\n                }\n              });\n            } else {\n              data = self.props.lime_data[model_name].filter(element => parseInt(element['1-qid']) == parseInt(year) && selected_instances.includes(parseInt(element['two_realRank'])));\n            }\n\n            popup_chart_data[model_name] = data;\n          });\n          self.props.Set_popup_chart_data([popup_chart_data, feature]); // This is to update the pop when the year or anything changes during the pop up is open\n          //self.props.Set_popup_chart_data([popup_chart_data, feature])\n\n          self.props.set_pop_over(true);\n        }); //---\n      });\n      feature_containers.attr(\"add_rect_for_circle_background_and_handle_clicks\", function (d, index) {\n        d3.select(this).selectAll(\".circ_rect\").data([0]).join('rect').attr(\"class\", \"circ_rect\").attr(\"myindex\", index).attr('feature_name', d[0]).attr(\"width\", \"100%\").attr(\"height\", item_height - title_rect_height).attr(\"fill\", \"#ffffff\").attr(\"y\", title_rect_height).on('click', () => {\n          if (self.props.clicked_features.includes(d[0])) {\n            self.props.Set_clicked_features(self.props.clicked_features.filter(item => item != d[0]));\n            d3.selectAll(\".\" + d[0]).selectAll(\".border_rect\").remove();\n          } else {\n            self.props.Set_clicked_features([...self.props.clicked_features, d[0]]);\n            d3.selectAll(\".\" + d[0]).selectAll(\".border_rect\").data([0]).join('rect').attr(\"class\", \"border_rect\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").style(\"stroke\", \"black\").style(\"fill\", \"none\").style(\"stroke-width\", 5);\n          }\n        });\n      });\n      feature_containers.attr(\"CreatexpCircle\", function (d, index) {\n        CreatexpCircle(d, d3.select(this), selected_instances, self.props.lime_data, self.props.selected_year, [model_name], self.props.clicked_circles, self.props.Set_clicked_circles, self.props.diverginColor, self.props.anim_config, item_width, item_height - (marginTop + marginBottom), self.props.deviation_array, index, self.props.threshold, self.props.dataset, title_rect_height, self.props.label_on, sorted_features);\n      });\n      feature_containers.attr('check_clicked_features', d => {\n        if (self.props.clicked_features.includes(d[0])) {\n          d3.selectAll(\".\" + d[0]).selectAll(\".border_rect\").data([0]).join('rect').attr(\"class\", \"border_rect\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").style(\"stroke\", \"black\").style(\"fill\", \"none\").style(\"stroke-width\", 5);\n        }\n      });\n    };\n\n    this.line_color = null;\n    this.exp = React.createRef();\n    this.mds = React.createRef();\n    this.state = {\n      mds_height: 10,\n      mouseX: 0,\n      mouseY: 0,\n      excluded_features: [],\n      sorted_features: null,\n      circle_data: null,\n      indexed_features: null,\n      random: true\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      width: window.innerHeight\n    });\n  }\n\n  componentDidUpdate(prev_props) {\n    this.Createsvg(this.props.model_name, null);\n\n    if (this.props.clicked_circles.length != 0 && JSON.stringify(prev_props.clicked_circles) === JSON.stringify(this.props.clicked_circles)) {\n      misc_algo.handle_transparency(\"None\", this.props.clicked_circles, this.props.anim_config);\n    } else {\n      this.Createsvg(this.props.model_name, null);\n    }\n  }\n\n  //------------------------------\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: this.props.model_name,\n      className: \"explanation_chart_parent exp\" + this.props.model_name,\n      style: {\n        width: '100%',\n        height: '100%',\n        \"border\": this.props.mode == 'Model' ? \"2px solid #e2e2e2\" : 'none',\n        padding: \"2px 5px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"title_p\",\n      style: {\n        padding: 0,\n        margin: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }\n    }, this.props.model_name), /*#__PURE__*/React.createElement(\"svg\", {\n      ref: this.exp,\n      id: this.props.model_name,\n      style: {\n        marginTop: this.state.mds_height,\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"marker\", {\n      id: \"arrow\",\n      markerUnits: \"strokeWidth\",\n      markerWidth: \"12\",\n      markerHeight: \"12\",\n      viewBox: \"0 0 12 12\",\n      refX: \"6\",\n      refY: \"6\",\n      orient: \"auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M2,2 L10,6 L2,10 L6,6 L2,2\",\n      style: {\n        fill: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst maptstateToprop = state => {\n  return {\n    deviation_array: state.deviation_array,\n    original_data: state.original_data,\n    time_mode_model: state.time_mode_model,\n    chart_scale_type: state.chart_scale_type,\n    dataset: state.dataset,\n    histogram_data: state.histogram_data,\n    sparkline_data: state.sparkline_data,\n    anim_config: state.anim_config,\n    show: state.show,\n    average_m: state.average_m,\n    average_y: state.average_y,\n    lime_data: state.lime_data,\n    rank_data: state.rank_data,\n    clicked_circles: state.clicked_circles,\n    clicked_features: state.clicked_features,\n    threshold: state.threshold,\n    mode: state.mode,\n    dbclicked_features: state.dbclicked_features,\n    dragged_features: state.dragged_features,\n    url: state.url,\n    default_models: state.default_models,\n    label_on: state.label_on\n  };\n};\n\nconst mapdispatchToprop = dispatch => {\n  return {\n    Set_dragged_features: val => dispatch({\n      type: \"dragged_features\",\n      value: val\n    }),\n    Set_clicked_circles: val => dispatch({\n      type: \"clicked_circles\",\n      value: val\n    }),\n    Set_prev_prop: val => dispatch({\n      type: \"prev_prop\",\n      value: val\n    }),\n    Set_sparkline_data: val => dispatch({\n      type: \"sparkline_data\",\n      value: val\n    }),\n    Set_replay: val => dispatch({\n      type: \"replay\",\n      value: val\n    }),\n    Set_clicked_features: val => dispatch({\n      type: \"clicked_features\",\n      value: val\n    }),\n    Set_selected_year: val => dispatch({\n      type: \"selected_year\",\n      value: val\n    }),\n    set_dbclicked_features: val => dispatch({\n      type: \"dbclicked_features\",\n      value: val\n    }),\n    Set_popup_chart_data: val => dispatch({\n      type: \"popup_chart_data\",\n      value: val\n    }),\n    set_pop_over: val => dispatch({\n      type: \"pop_over\",\n      value: val\n    }),\n    Set_pop_over_models: val => dispatch({\n      type: \"pop_over_models\",\n      value: val\n    })\n  };\n};\n\nexport default connect(maptstateToprop, mapdispatchToprop)(SlopeChart);","map":{"version":3,"sources":["/Users/kaustav/NewWork/trivea/src/components/Charts/Model/ExpChartComponent.js"],"names":["React","Component","d3","connect","algo1","$","CreatexpCircle","misc_algo","SlopeChart","constructor","props","Createsvg","model_name","indexed_features","self","selected_instances","range","state_range","histogram_data","length","under_threshold_instances","year_data","original_data","filter","item","selected_year","default_models","map","two_realRank","parseInt","predicted_rank","Math","abs","threshold","push","includes","number_of_charts","state","excluded_features","getSortedFeatures","lime_data","temp_sorted_features","sorted_features","slice","index","marginTop","marginBottom","space_for_x_axis","title_rect_height","parent_height","height","mds_height","item_width","width","item_height","feature_containers","select","attr","selectAll","data","d","join","enter","append","i","update","transition","duration","exit","remove","ft_svg_height","parentNode","svg","random","markerBoxWidth","markerBoxHeight","refX","refY","line","text","raise","style","on","event","preventDefault","setState","Set_pop_over_models","feature","year","temp","dbclicked_features","unshift","classed","set_dbclicked_features","popup_chart_data","element","Set_popup_chart_data","set_pop_over","clicked_features","Set_clicked_features","clicked_circles","Set_clicked_circles","diverginColor","anim_config","deviation_array","dataset","label_on","line_color","exp","createRef","mds","mouseX","mouseY","circle_data","componentDidMount","window","innerHeight","componentDidUpdate","prev_props","JSON","stringify","handle_transparency","render","mode","padding","margin","fill","maptstateToprop","time_mode_model","chart_scale_type","sparkline_data","show","average_m","average_y","rank_data","dragged_features","url","mapdispatchToprop","dispatch","Set_dragged_features","val","type","value","Set_prev_prop","Set_sparkline_data","Set_replay","Set_selected_year"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { connect } from \"react-redux\";\nimport * as algo1 from \"../../../Algorithms/algo1\";\nimport * as $ from 'jquery';\nimport CreatexpCircle from \"../ExpChart/Create_exp_circles\"\nimport \"../ExpChart/MDS.css\"\nimport * as misc_algo from '../../../Algorithms/misc_algo'\nclass SlopeChart extends Component {\n  constructor(props) {\n    super(props);\n    this.line_color = null;\n    this.exp = React.createRef()\n    this.mds = React.createRef()\n    this.state = { mds_height: 10, mouseX: 0, mouseY: 0, excluded_features: [], sorted_features: null, circle_data: null, indexed_features: null, random: true }\n  }\n  componentDidMount() {\n    this.setState({ width: window.innerHeight })\n  }\n  componentDidUpdate(prev_props) {\n    this.Createsvg(this.props.model_name, null)\n    if (this.props.clicked_circles.length != 0 && JSON.stringify(prev_props.clicked_circles) === JSON.stringify(this.props.clicked_circles)) {\n      misc_algo.handle_transparency(\"None\", this.props.clicked_circles, this.props.anim_config)\n    }\n    else {\n      this.Createsvg(this.props.model_name, null)\n    }\n  }\n  Createsvg = (model_name, indexed_features) => {\n    var self = this\n    var selected_instances = d3.range(this.props.state_range[0], this.props.state_range[1] + 1)\n    if (this.props.histogram_data.length > 0) { selected_instances = this.props.histogram_data }\n\n    //-------------------- Threshold filter\n    var under_threshold_instances = []\n    var year_data = this.props.original_data.filter(item => this.props.selected_year == item['1-qid'])\n    this.props.default_models.map(model_name => {\n      year_data.map(item => {\n        var two_realRank = parseInt(item['two_realRank'])\n        var predicted_rank = parseInt(item[model_name])\n        if (Math.abs(predicted_rank - two_realRank) < this.props.threshold) {\n          under_threshold_instances.push(two_realRank)\n        }\n      })\n    })\n    selected_instances = selected_instances.filter(item => under_threshold_instances.includes(item))\n    var number_of_charts = 8 + self.state.excluded_features.length\n    \n    var indexed_features = algo1.getSortedFeatures(this.props.lime_data[model_name],selected_instances, this.props.selected_year)\n    var temp_sorted_features = indexed_features.filter(item => !this.state.excluded_features.includes(item))// Exclude crossed features \n    var sorted_features = temp_sorted_features.slice(0, number_of_charts).map((item, index) => [item, index])\n\n\n\n\n\n\n    var marginTop = 2,marginBottom = 0, space_for_x_axis = 25,title_rect_height=40\n    var parent_height = parseInt($('.explanation_chart_parent').height()) - this.state.mds_height - parseInt($('.title_p').height())\n    var item_width = parseInt($(\"#\" + model_name).width())\n    var item_height = (parent_height - space_for_x_axis) / sorted_features.length - (marginTop + marginBottom) // 10 is the top margin\n\n    var feature_containers = d3.select('#' + model_name).attr('height', parent_height)\n      .selectAll(\".feature_items\").data(sorted_features, d => d[0])\n      .join(enter => enter.append(\"svg\").attr(\"y\", (d, i) => marginTop + i * (item_height + marginTop + marginBottom))\n        , update => update.transition().duration(2000).attr(\"y\", (d, i) => marginTop + i * (item_height + marginTop + marginBottom))\n        , exit => exit.remove()\n      )\n    feature_containers.attr(\"class\", d => \"feature_items \" + d[0]).attr(\"myindex\", (d, i) => i).attr('feature_name', d => d[0])\n      .attr(\"height\", function (d) {\n        if (d[1] == sorted_features.length - 1) {\n          var ft_svg_height = 25\n          d3.select(this.parentNode).selectAll(\".ft_svg\").remove()\n          var svg = d3.select(this.parentNode).selectAll(\".ft_svg\").data([Math.random()]).join(\"svg\").attr(\"x\", 0).attr(\"y\", parent_height - ft_svg_height).attr(\"class\", \"ft_svg\").attr(\"width\", item_width).attr(\"height\", ft_svg_height)\n          var markerBoxWidth = 8, markerBoxHeight = 8, refX = markerBoxWidth / 2, refY = markerBoxHeight / 2\n          \n          svg.selectAll('defs').data([0]).join('defs').selectAll('#arrow').data([0]).join('marker').attr('id', 'arrow').attr('viewBox', [0, 0, markerBoxWidth, markerBoxHeight])\n            .attr('refX', refX).attr('refY', refY).attr('markerWidth', markerBoxWidth).attr('markerHeight', markerBoxHeight).attr('orient', 'auto-start-reverse')\n            .append('path').attr('id','path1').attr('d', d3.line()([[0, 0], [0, 7], [7, 3.8]])).attr('stroke', '#777777').attr(\"fill\",\"#777777\");\n          //------------------------------------------------[[x2, y2], [x1, y1]]\n          svg.append('path').attr('d', d3.line()([[item_width / 2 - 65, 15], [50, 15]])).attr('stroke', '#777777').attr('marker-end', 'url(#arrow)').attr('fill', 'none');\n          svg.append('path').attr('d', d3.line()([[item_width - 50, 15], [65 + item_width / 2, 15]])).attr('stroke', '#777777').attr('marker-start', 'url(#arrow)').attr('fill', 'none');\n\n          svg.selectAll(\".myText_low\").data([0]).join(\"text\").attr(\"x\", 30).attr(\"class\", \"myText_low\").attr('dominant-baseline', \"middle\").attr(\"y\", 15).text('Low').attr('text-anchor', 'middle').attr(\"font-size\", 12).attr(\"fill\", \"#2b2828\")\n          svg.selectAll(\".myText\").data([0]).join(\"text\").attr(\"x\", item_width / 2).attr(\"class\", \"myText\").attr('dominant-baseline', \"middle\").attr(\"y\", 15).text('Attribute Importance').attr('text-anchor', 'middle').attr(\"font-size\", 12).attr(\"fill\", \"#2b2828\")\n          svg.selectAll(\".myText_high\").data([0]).join(\"text\").attr(\"x\", item_width-30).attr(\"class\", \"myText_high\").attr('dominant-baseline', \"middle\").attr(\"y\", 15).text('High').attr('text-anchor', 'middle').attr(\"font-size\", 12).attr(\"fill\", \"#2b2828\")\n          return item_height - marginBottom - marginTop\n        }\n        return item_height - marginBottom - marginTop\n      })\n      .attr('width', item_width)\n\n\n    feature_containers.attr(\"add_title_text_and_rect_for_title_text\", function (d, index) {\n      d3.select(this).selectAll(\".title_rect\").data([0]).join('rect').attr(\"class\", \"title_rect\").attr(\"myindex\", index).attr('feature_name', d[0]).attr(\"width\", \"100%\").attr(\"height\", title_rect_height).attr(\"fill\", \"#e2e2e2\").attr(\"y\", 0).attr(\"x\", 0)\n      d3.select(this).selectAll(\".title_text\").data([0]).join('text').attr(\"class\", \"title_text\")\n      .attr(\"myindex\", index).attr('feature_name', d[0]).attr('x', item_width / 2).text(d[0]).attr(\"dominant-baseline\", \"middle\")\n      .attr(\"y\", title_rect_height/2).attr('text-anchor', 'middle').attr('font-size', 14)\n    })\n    feature_containers.attr(\"add_cross_button\", function (d, index) {\n      d3.select(this).selectAll(\".cross_button\").data([0]).join(\"text\").attr('y', title_rect_height/2)\n        .attr('dominant-baseline', 'middle').attr(\"myindex\", index).attr('feature_name', d[0]).raise()\n        .attr('x', item_width - 15).style('cursor', 'pointer').attr('font-size', 14).attr('fill', 'black')\n        .text(\"\\uf410\").attr('class', \"cross_button fa make_cursor\").on('click', () => {\n          d3.event.preventDefault()\n          self.setState({ excluded_features: [...self.state.excluded_features, d[0]] })\n        })\n      //---\n      d3.select(this).selectAll(\".expand_button\").data([0]).join(\"text\").attr('y', title_rect_height/2)\n        .attr('dominant-baseline', 'middle').attr(\"myindex\", index).attr('feature_name', d[0]).raise()\n        .attr('x', item_width - 35).style('cursor', 'pointer').attr('font-size', 12).attr('fill', 'black')\n        .text(\"\\uf31e\").attr('class', \"expand_button fa make_cursor\").on('click', () => {\n          \n          self.props.Set_pop_over_models([self.props.model_name])\n\n          d3.event.preventDefault()\n          var feature = d[0]\n          var year = self.props.selected_year\n          d3.event.preventDefault()\n          var temp = [...self.props.dbclicked_features]\n          if (!temp.includes(feature)) {\n            temp.unshift(feature)\n            d3.selectAll(\".rect\").classed(\"exp_chart_clicked\", true)\n          }\n          self.props.set_dbclicked_features(temp)\n          //self.props.set_dbclicked_features([feature])\n          //----------------------------Data for popup chart\n          var popup_chart_data = {}\n          self.props.default_models.filter(item => item != \"ListNet\").map(model_name => {\n            var data = []\n            if (self.props.histogram_data.length > 0) {\n              data = self.props.lime_data[model_name].filter(element => { if ((parseInt(element['1-qid']) == parseInt(year)) && (self.props.histogram_data.includes(parseInt(element['two_realRank'])))) { return element } });\n            }\n            else {\n              data = self.props.lime_data[model_name].filter(element => parseInt(element['1-qid']) == parseInt(year) && selected_instances.includes(parseInt(element['two_realRank'])))\n            }\n            popup_chart_data[model_name] = data\n          })\n          self.props.Set_popup_chart_data([popup_chart_data, feature]) // This is to update the pop when the year or anything changes during the pop up is open\n          //self.props.Set_popup_chart_data([popup_chart_data, feature])\n          self.props.set_pop_over(true)\n        })\n      //---\n    })\n    feature_containers.attr(\"add_rect_for_circle_background_and_handle_clicks\", function (d, index) {\n      d3.select(this).selectAll(\".circ_rect\").data([0]).join('rect').attr(\"class\", \"circ_rect\").attr(\"myindex\", index).attr('feature_name', d[0]).attr(\"width\", \"100%\").attr(\"height\", item_height - title_rect_height).attr(\"fill\", \"#ffffff\").attr(\"y\", title_rect_height)\n        .on('click', () => {\n          if (self.props.clicked_features.includes(d[0])) {\n            self.props.Set_clicked_features(self.props.clicked_features.filter(item => item != d[0]))\n            d3.selectAll(\".\" + d[0]).selectAll(\".border_rect\").remove()\n          }\n          else {\n            self.props.Set_clicked_features([...self.props.clicked_features, d[0]])\n            d3.selectAll(\".\" + d[0]).selectAll(\".border_rect\").data([0]).join('rect').attr(\"class\", \"border_rect\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").style(\"stroke\", \"black\").style(\"fill\", \"none\").style(\"stroke-width\", 5)\n          }\n        })\n    })\n    feature_containers.attr(\"CreatexpCircle\", function (d, index) {\n      CreatexpCircle(d, d3.select(this), selected_instances, self.props.lime_data, self.props.selected_year, [model_name], self.props.clicked_circles,\n        self.props.Set_clicked_circles, self.props.diverginColor, self.props.anim_config, item_width, item_height-(marginTop+marginBottom), self.props.deviation_array, index, self.props.threshold, self.props.dataset,title_rect_height,self.props.label_on,sorted_features)\n    })\n\n    feature_containers.attr('check_clicked_features', d => {\n      if (self.props.clicked_features.includes(d[0])) {\n        d3.selectAll(\".\" + d[0]).selectAll(\".border_rect\").data([0]).join('rect').attr(\"class\", \"border_rect\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").style(\"stroke\", \"black\").style(\"fill\", \"none\").style(\"stroke-width\", 5)\n      }\n    })\n\n  }\n  //------------------------------\n  render() {\n    return (\n      <div key={this.props.model_name} className={\"explanation_chart_parent exp\" + this.props.model_name} style={{ width: '100%', height: '100%', \"border\": this.props.mode == 'Model' ? \"2px solid #e2e2e2\" : 'none', padding: \"2px 5px\" }}>\n        <p className=\"title_p\" style={{ padding: 0, margin: 0 }}>{this.props.model_name}</p>\n        <svg ref={this.exp} id={this.props.model_name} style={{ marginTop: this.state.mds_height, width: \"100%\" }}></svg>\n        <marker id=\"arrow\" markerUnits=\"strokeWidth\" markerWidth=\"12\" markerHeight=\"12\" viewBox=\"0 0 12 12\" refX=\"6\" refY=\"6\" orient=\"auto\">\n          <path d=\"M2,2 L10,6 L2,10 L6,6 L2,2\" style={{ fill: \"black\" }}></path>\n        </marker>\n      </div>\n    )\n  }\n}\nconst maptstateToprop = (state) => {\n  return {\n    deviation_array: state.deviation_array,\n    original_data: state.original_data,\n    time_mode_model: state.time_mode_model,\n    chart_scale_type: state.chart_scale_type,\n    dataset: state.dataset,\n    histogram_data: state.histogram_data,\n    sparkline_data: state.sparkline_data,\n    anim_config: state.anim_config,\n    show: state.show,\n    average_m: state.average_m,\n    average_y: state.average_y,\n    lime_data: state.lime_data,\n    rank_data: state.rank_data,\n    clicked_circles: state.clicked_circles,\n    clicked_features: state.clicked_features,\n    threshold: state.threshold,\n    mode: state.mode,\n    dbclicked_features: state.dbclicked_features,\n    dragged_features: state.dragged_features,\n    url: state.url,\n    default_models: state.default_models,\n    label_on:state.label_on,\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_dragged_features: (val) => dispatch({ type: \"dragged_features\", value: val }),\n    Set_clicked_circles: (val) => dispatch({ type: \"clicked_circles\", value: val }),\n    Set_prev_prop: (val) => dispatch({ type: \"prev_prop\", value: val }),\n    Set_sparkline_data: (val) => dispatch({ type: \"sparkline_data\", value: val }),\n    Set_replay: (val) => dispatch({ type: \"replay\", value: val }),\n    Set_clicked_features: (val) => dispatch({ type: \"clicked_features\", value: val }),\n    Set_selected_year: (val) => dispatch({ type: \"selected_year\", value: val }),\n    set_dbclicked_features: (val) => dispatch({ type: \"dbclicked_features\", value: val }),\n    Set_popup_chart_data: (val) => dispatch({ type: \"popup_chart_data\", value: val }),\n    set_pop_over: (val) => dispatch({ type: \"pop_over\", value: val }),\n    Set_pop_over_models: (val) => dispatch({ type: \"pop_over_models\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(SlopeChart);"]},"metadata":{},"sourceType":"module"}