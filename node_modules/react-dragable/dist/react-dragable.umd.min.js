!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):(t=t||self)["react-dragable"]=e(t.React)}(this,(function(t){"use strict";var e="default"in t?t.default:t;function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;e.length>r;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;arguments.length>e;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?h(t):e}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y,b=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */
!function(){var e={}.hasOwnProperty;function r(){for(var t=[],n=0;arguments.length>n;n++){var o=arguments[n];if(o){var a=typeof o;if("string"===a||"number"===a)t.push(o);else if(Array.isArray(o)&&o.length){var i=r.apply(null,o);i&&t.push(i)}else if("object"===a)for(var c in o)e.call(o,c)&&o[c]&&t.push(c)}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):window.classNames=r}()})),p="mousemove",x="mouseup",d=["nw","n","ne","e","se","s","sw","w"];!function(t){t.ROTATE="rotate",t.RESIZE="resize",t.MOVE="move",t.NONE=""}(y||(y={}));var v={x:0,y:0},g={x:0,y:0,width:0,height:0,rotate:0},m=function(t,e){var r=f(["x","y"].map((function(r){return t[r]+2*(e[r]-t[r])})),2);return{x:r[0],y:r[1]}},w=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return r>Math.abs(t-e)},_=function(t){return{x:t.pageX,y:t.pageY}},O=function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},E=function(t){return 180*Math.atan2(t.y,t.x)/Math.PI},k=function(t,e,r){var n=M({x:t.x-e.x,y:t.y-e.y},r);return{x:n.x+e.x,y:n.y+e.y}},M=function(t,e){var r=e/180*Math.PI,n=Math.sin(r),o=Math.cos(r),a=t.x,i=t.y;return{x:a*o-i*n,y:a*n+i*o}},j=function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}},S=function(){function t(e){r(this,t),this.rect=e,this._lt=null,this._rt=null,this._rb=null,this._lb=null,this._ct=null,this._cb=null,this._rm=null,this._lm=null,this._center=null}return o(t,[{key:"center",get:function(){return this._center||(this._center=O(this.rect)),this._center}},{key:"lt",get:function(){if(!this._lt){var t=this.rect;this._lt=k({x:t.x,y:t.y},this.center,t.rotate)}return this._lt}},{key:"rt",get:function(){if(!this._rt){var t=this.rect;this._rt=k({x:t.x+t.width,y:t.y},this.center,t.rotate)}return this._rt}},{key:"rb",get:function(){return this._rb||(this._rb=m(this.lt,this.center)),this._rb}},{key:"lb",get:function(){return this._lb||(this._lb=m(this.rt,this.center)),this._lb}},{key:"ct",get:function(){return this._ct||(this._ct=j(this.lt,this.rt)),this._ct}},{key:"cb",get:function(){return this._cb||(this._cb=j(this.rb,this.lb)),this._cb}},{key:"rm",get:function(){return this._rm||(this._rm=j(this.rt,this.rb)),this._rm}},{key:"lm",get:function(){return this._lm||(this._lm=j(this.lt,this.lb)),this._lm}}]),t}(),D=function(t,e,r){return c({},r,{x:r.x+(e.x-t.x),y:r.y+(e.y-t.y)})},P=function(t,e){return(e.y-t.y)/(e.x-t.x)},R=function(t,e,r){var n=function(t,e,r){var n={x:r.x-t.x,y:r.y-t.y},o=E({x:e.x-t.x,y:e.y-t.y});return E(n)-o}(O(r),t,e),o=r.rotate+n;return 180>o||(o-=360),o>-180||(o+=360),c({},r,{rotate:o})},N=function(t,e,r,n){var o,a,i=f(t,2),c=j(i[0],i[1]),u=e,s=j(c,u),h=function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}(c,u),l=r.width/r.height;return"width"===n?a=(o=h)/l:o=l*(a=h),{x:s.x-o/2,y:s.y-a/2,width:o,height:a,rotate:r.rotate}},T=function(t,e,r,n,o){var a=new S(n),i=null,c=[],u=e;if(o){switch(r){case"nw":case"se":c=[a.lt,a.rb];break;case"ne":case"sw":c=[a.rt,a.lb];break;case"n":case"s":c=[a.ct,a.cb],i="height";break;case"w":case"e":c=[a.lm,a.rm],i="width";break;default:c=[]}2===c.length&&(u=function(t,e){var r=e.x,n=e.y,o=f(t,2),a=o[0],i=o[1];if(w(a.x,i.x))return{x:a.x,y:n};if(w(a.y,i.y))return{x:r,y:a.y};var c=P(a,i),u=-1/c,s=(c*a.x+n-a.y-u*r)/(c-u);return{x:s,y:a.y-c*(a.x-s)}}(c,e))}var s=[];switch(r){case"nw":s=[a.rb];break;case"ne":s=[a.lb];break;case"sw":s=[a.rt];break;case"se":s=[a.lt];break;case"s":s=[a.lt,a.rt];break;case"n":s=[a.lb,a.rb];break;case"w":s=[a.rt,a.rb];break;case"e":s=[a.lt,a.lb];break;default:s=[]}var h,l,y,b,p,x,d,v,g=s.length;return 1===g?(y=n.rotate,b=j(s[0],l=u),p=k(l,b,-y),x=p.y,h={x:b.x-(d=Math.abs(2*(p.x-b.x)))/2,y:b.y-(v=Math.abs(2*(x-b.y)))/2,width:d,height:v,rotate:y}):2===g&&(h=o?N(s,u,n,i):function(t,e,r){var n,o,a,i=f(t.map((function(t){return M(t,-r)})),2),c=i[0],u=i[1],s=M(e,-r);w(c.y,u.y)?(n=Math.abs(c.x-u.x),o=Math.abs(s.y-c.y),a={x:(c.x+u.x)/2,y:(c.y+s.y)/2}):w(c.x,u.x)&&(o=Math.abs(c.y-u.y),n=Math.abs(s.x-c.x),a={x:(c.x+s.x)/2,y:(c.y+u.y)/2});var h=M(a,r);return{x:h.x-(n||0)/2,y:h.y-(o||0)/2,width:n,height:o,rotate:r}}(s,u,n.rotate)),h},A=function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return"move"===t?D(e,r,n):"rotate"===t?R(e,r,n):T(0,r,t,n,o)},I=function(t,e,r){t&&(t.attachEvent?t.attachEvent("on"+e,r):t.addEventListener?t.addEventListener(e,r,!1):t["on".concat(e)]=r)},L=function(t,e,r){t&&(t.detachEvent?t.detachEvent("on"+e,r):t.removeEventListener?t.removeEventListener(e,r,!1):t["on".concat(e)]=null)},z=function(t){document.body.style.cursor=t},C=p,V=x,Z=function(t){return e.createElement("svg",{className:"archor-rotate",onMouseDown:t.onMouseDown,viewBox:"0 0 1024 1024",width:"20",height:"20"},e.createElement("path",{d:"M935.497143 659.017143a36.937143 36.937143 0 0 1-1.755429 18.505143 434.322286 434.322286 0 0 1-370.980571 337.773714C325.632 1045.650286 107.373714 876.251429 77.531429 637.293714a435.712 435.712 0 0 1 378.587428-487.131428c5.778286-1.243429 13.385143-1.901714 19.748572-1.974857-2.633143-24.137143-5.851429-46.518857-7.899429-66.267429-3.291429-25.526857-6.582857-44.617143-6.582857-50.980571-1.974857-7.021714-1.389714-15.36 3.657143-21.065143a21.796571 21.796571 0 0 1 31.305143-4.608l0.585142 1.243428 17.993143 16.530286 126.683429 98.962286 17.92 13.312 15.36 11.410285c5.12 3.803429 7.68 8.850286 8.996571 14.628572a20.260571 20.260571 0 0 1-4.388571 16.603428l-11.410286 15.36-13.312 17.92L555.885714 337.92l-14.555428 18.578286-1.243429 0.658285a23.625143 23.625143 0 0 1-31.890286 3.291429c-5.778286-5.12-9.654857-12.726857-8.411428-19.748571-1.316571-5.705143-3.291429-25.453714-6.582857-50.980572-2.633143-17.846857-5.266286-38.838857-7.899429-59.904-6.436571 0-13.385143 1.974857-19.748571 1.974857-193.828571 24.502857-332.726857 201.801143-308.297143 395.556572 24.502857 193.828571 201.801143 332.726857 395.556571 308.224a353.426286 353.426286 0 0 0 303.616-281.307429 40.082286 40.082286 0 0 1 34.377143-30.134857c22.235429-3.291429 43.373714 13.165714 44.763429 34.889143z"}))},q=function(t){function n(){var t;return r(this,n),(t=l(this,u(n).apply(this,arguments))).thisNode=null,t.action=y.NONE,t.mouseStart=v,t.rectStart=g,t.fixedRatio=!1,t.archor="s",t.handleDragMove=function(e){var r=t.props.onChange,n=h(t),o=n.mouseStart,a=n.rectStart,i=n.action,c=n.archor,u=n.fixedRatio,s=_(e);r(A(i===y.RESIZE?c:i,o,s,a,u))},t.handleDragStart=function(e,r){e.stopPropagation();var n=e.nativeEvent,o=t.props.rect;switch(t.mouseStart=_(n),t.rectStart=o,t.action=r,t.fixedRatio=e.shiftKey,I(document,C,t.handleDragMove),I(document,V,t.handleDragStop),r){case y.MOVE:z("move");break;case y.ROTATE:z("pointer");break;case y.RESIZE:var a=n.target.style.cursor;z(a),t.archor=a.replace(/-resize/,"")}},t.handleDragStop=function(){L(document,C,t.handleDragMove),L(document,V,t.handleDragStop),z("auto")},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,t),o(n,[{key:"componentWillUnmount",value:function(){L(document,C,this.handleDragMove),L(document,V,this.handleDragStop)}},{key:"render",value:function(){var t=this,r=this.props,n=r.rect,o=r.children;return e.createElement("div",{onMouseDown:function(e){return t.handleDragStart(e,y.MOVE)},className:b("dragable",{"dragable-active":!0}),style:{left:n.x,top:n.y,width:n.width,height:n.height,transform:"rotate(".concat(n.rotate,"deg)")}},e.isValidElement(o)?o:o(n),d.map((function(r){return e.createElement("i",{key:r,className:b("archor","archor-".concat(r)),style:{cursor:"".concat(r,"-resize")},onMouseDown:function(e){return t.handleDragStart(e,y.RESIZE)}})})),e.createElement(Z,{onMouseDown:function(e){return t.handleDragStart(e,y.ROTATE)}}))}}]),n}(t.Component);return q.defaultProps={},q}));
