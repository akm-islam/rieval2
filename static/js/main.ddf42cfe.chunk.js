(this.webpackJsonp03_2slopechart=this.webpackJsonp03_2slopechart||[]).push([[0],{124:function(e,t,a){},129:function(e,t,a){e.exports=a.p+"static/media/airbnb_lime.60f608cc.csv"},131:function(e,t,a){e.exports=a.p+"static/media/chart1_data.8ac4896f.csv"},132:function(e,t,a){e.exports=a.p+"static/media/chart1_data.cca71c9e.csv"},133:function(e,t,a){e.exports=a.p+"static/media/RUR_histogram_data.ab6fad30.csv"},145:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){e.exports=a.p+"static/media/fiscal.21e1942b.csv"},152:function(e,t,a){e.exports=a.p+"static/media/school.515cf770.csv"},153:function(e,t,a){e.exports=a.p+"static/media/house.88979d03.csv"},154:function(e,t,a){e.exports=a.p+"static/media/RUR.e8eaae8e.csv"},155:function(e,t,a){e.exports=a.p+"static/media/airbnb.f2354d6e.csv"},156:function(e,t,a){e.exports=a.p+"static/media/fiscal_rank.dcdaf12c.csv"},157:function(e,t,a){e.exports=a.p+"static/media/school_rank.edf0b9e3.csv"},158:function(e,t,a){e.exports=a.p+"static/media/airbnb_rank.542cd163.csv"},159:function(e,t,a){e.exports=a.p+"static/media/RUR_rank.1805a0d5.csv"},160:function(e,t,a){e.exports=a.p+"static/media/RUR_lime.ab094de9.csv"},161:function(e,t,a){e.exports=a.p+"static/media/house_rank.f85c2352.csv"},162:function(e,t,a){e.exports=a.p+"static/media/house_lime.ce3dd233.csv"},170:function(e,t,a){e.exports=a.p+"static/media/chart1_data.45acbae8.csv"},235:function(e,t,a){e.exports=a(263)},240:function(e,t,a){},245:function(e,t,a){},248:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},261:function(e,t,a){},263:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(20),o=a.n(i),l=a(22),s=a(23),d=a(47),c=a(24),_=a(25),p=a(151),u=a.n(p),m=a(152),f=a.n(m),h=a(153),g=a.n(h),y=a(154),v=a.n(y),b=a(155),k=a.n(b),x=a(156),w=a.n(x),j=a(90),E=a.n(j),S=a(91),O=a.n(S),C=a(157),R=a.n(C),A=a(92),I=a.n(A),M=a(93),N=a.n(M),T=a(158),L=a.n(T),B=a(129),z=a.n(B),D=a(159),H=a.n(D),F=a(160),W=a.n(F),q=a(161),U=a.n(q),Y=a(162),V=a.n(Y),X=(a(240),a(1));function P(e,t,a,r,n){if(console.log(e,t,a,r,n,"sort"),"Discounted Cumulative Gain"==e){for(var i={ndcg_term_CordAscent:0,ndcg_term_LambdaMART:0,ndcg_term_LambdaRank:0,ndcg_term_LinearReg:0,ndcg_term_ListNet:0,ndcg_term_MART:0,ndcg_term_RandomFor:0,ndcg_term_RankBoost:0,ndcg_term_RankNet:0},o=t[0];o<t[1];o++)Object.keys(i).forEach((function(e){i[e]=i[e]+parseFloat(n[r][o][e])}));(d=Object.keys(i).map((function(e){return[e.substring(10),i[e]]}))).sort((function(e,t){return t[1]-e[1]}));var l=[];for(o=0;o<d.length;o++)a.includes(d[o][0])&&l.push(d[o][0]);var s={};return d.map((function(e){s[e[0]]=e[1]})),console.log(d),[l,s]}if("Average Precision"==e){var d,c={};a.forEach((function(e){for(var a=1,i=t[0];i<t[1];i++)a+=Math.pow(n[r][i].two_realRank-n[r][i][e],2);c[e]=(t[1]-t[0]+1)/Math.sqrt(a)})),(d=Object.keys(c).map((function(e){return[e,c[e]]}))).sort((function(e,t){return t[1]-e[1]}));var _=[];for(o=0;o<d.length;o++)a.includes(d[o][0])&&_.push(d[o][0]);return[_,c]}if("Alphabetically"==e)return[a.sort(),[0]]}function G(e){var t={},a={};return e.forEach((function(e){t[e["1-qid"]]=[],a[e.State.replace(/ /g,"").replace(/[^\w\s]/gi,"")]=[]})),e.forEach((function(e){var r={year:parseInt(e["1-qid"]),rank:parseInt(e.two_realRank)};a[e.State.replace(/ /g,"").replace(/[^\w\s]/gi,"")].push(r),t[e["1-qid"]].push(e)})),{years:t,sparkline_data:a}}function $(e,t,a){var r=e.filter((function(e){return e["1-qid"]==a&&t.includes(e.two_realRank)})),n=Object.keys(r[0]).filter((function(e){return e.includes("_contribution")})),i=[];return n.map((function(e){var a=0;r.map((function(t){a+=parseFloat(t[e])})),i.push([e,a/t.length])})),i.sort((function(e,t){return t[1]-e[1]})).map((function(e){return e[0].replace("_contribution","")}))}var J=a(5),Z=a(9),Q=a(13),K=a(12),ee=a(164);function te(e,t,a,r,n,i,o,l,s,d,c,_,p,u,m){console.log("Test",r[0],e);var f=X.w("body").selectAll(".tooltip").data([0]).join("div").attr("class","tooltip").style("opacity",0),h=K("#"+e).width()-5,g=K(".deviation_plot_container_div").height(),y=r.filter((function(e){return o==e["1-qid"]&&a.includes(parseInt(e.two_realRank))})),v=[];y.map((function(e){n.map((function(t){return v.push(Math.abs(parseInt(e[t])-parseInt(e.two_realRank)))}))}));var b=120,k=12,x=-6,w=5,j=12;if((E=g/a.length)<15)var E=15;X.w("#"+e).attr("height",E*a);var S=j/2,O=ee.a.lines().size(5).strokeWidth(2).stroke("#cccccc").background("gray");X.w("#"+e).attr("height",E+y.length*E).call(O).selectAll(".parent_g").data([0]).join("g").attr("class","parent_g").attr("transform","translate(0,13)").selectAll(".items").data(y,(function(e){return e.State})).join((function(e){return e.append("g").attr("class","items").attr("transform",(function(e,t){return"translate("+b+","+t*E+")"}))}),(function(e){return e.transition().duration(i.rank_animation).attr("transform",(function(e,t){return"translate("+b+","+t*E+")"}))}),(function(e){return e.remove()})).attr("add_state",(function(e){X.w(this).selectAll("text").data([e]).join("text").text((function(t){var a=e.State;return a.length>15&&(a=a.replace("University","U")),a.length>15&&(a=a.substring(0,15)+".."),a+" "+e.two_realRank})).attr("fill",(function(e){return c(e.two_realRank)})).attr("dominant-baseline","hanging").attr("font-size",k).attr("x",0).attr("text-anchor","end").attr("dy",x)})).attr("stroke",(function(e){if(s.includes(e.id))return"rgb(227, 26, 28,0.5)"})).attr("add_lines_and_circles",(function(e){var a=this,r=y.filter((function(t){return e.two_realRank==parseInt(t.two_realRank)})),o=[];n.map((function(e){r.map((function(t){var a={},r=parseInt(t.two_realRank),n=parseInt(t[e]);a.two_realRank=r,a.predicted_rank=n,a.model=e,a.year=t["1-qid"],Math.abs(n-r)<m&&o.push(a)}))}));var l=[];y.map((function(e){n.map((function(t){return l.push(Math.abs(parseInt(e[t])-parseInt(e.two_realRank)))}))}));var _=X.n(l),p=X.u().domain([0,_]).range([w,h-(b+S)]);if(0==_)p=X.u().domain([0,_]).range([w,0]);X.w(this).selectAll("line").data([e]).join((function(e){return e.append("line").attr("x1",w).attr("y1",(function(e,t){return E*t})).attr("y2",(function(e,t){return E*t})).attr("stroke-width",j).attr("stroke",O.url()).attr("x2",(function(e){var t=[];return o.map((function(e){return t.push(Math.abs(e.predicted_rank-e.two_realRank))})),p(X.n(t))}))}),(function(e){return e.transition().duration(i.deviation_animation).delay(i.rank_animation).attr("x2",(function(e){var t=[];return o.map((function(e){return t.push(Math.abs(e.predicted_rank-e.two_realRank))})),p(X.n(t))}))}));r=y.filter((function(t){return e.two_realRank==parseInt(t.two_realRank)}));var u=[];n.map((function(e){r.map((function(t){var a={},r=parseInt(t.two_realRank),n=parseInt(t[e]);a.two_realRank=r,a.predicted_rank=n,a.model=e,a.year=t["1-qid"],a.id=t.State.replace(/ /g,"").replace(/[^a-zA-Z ]/g,""),a.className="dev_circles "+e.replace(/ /g,"").replace(/[^a-zA-Z ]/g,""),Math.abs(n-r)<m&&u.push(a)}))})),X.w(this).selectAll(".my_circles").data(u,(function(e){return e.id})).join((function(e){return e.append("circle").attr("id",(function(e){return e.id})).attr("cx",(function(e,t){return X.w(a).classed(e.id,!0),e.predicted_rank-e.two_realRank==0?p(Math.abs(e.predicted_rank-e.two_realRank))+S:p(Math.abs(e.predicted_rank-e.two_realRank))}))}),(function(e){return e.transition().duration(i.deviation_animation).delay(i.rank_animation).attr("cx",(function(e,t){return X.w(a).classed(e.id,!0),e.predicted_rank-e.two_realRank==0?p(Math.abs(e.predicted_rank-e.two_realRank))+S:p(Math.abs(e.predicted_rank-e.two_realRank))}))})).attr("r",S).attr("class",(function(e){return"my_circles "+e.className})).attr("fill",(function(e){return c(e.two_realRank)})).attr("parent_id",t).on("click",(function(e){return d(s.includes(e.id)?s.filter((function(t){return t!=e.id})):[].concat(Object(Q.a)(s),[e.id]))})).on("mouseover",(function(e){f.transition().duration(200).style("opacity",.9),f.html("Year : "+e.year+"<br></br>Model: "+e.model+"<br></br>Deviation: "+Math.abs(e.predicted_rank-e.two_realRank)).style("left",X.g.pageX-140+"px").style("top",X.g.pageY-98+"px")})).on("mouseout",(function(e){f.transition().duration(500).style("opacity",0)}))}))}function ae(e,t,a){X.x(".my_circles").attr("stroke","none"),0!=t.length?(X.x(".items").attr("opacity",.3),X.x(".exp_circles").attr("opacity",.3),X.x(".mds_circles").attr("opacity",.3),X.x(".my_circles").attr("opacity",.3),t.map((function(e){X.x("."+e).attr("opacity",1),X.x("#"+e).attr("opacity",1),X.x("#"+e).attr("stroke","rgb(227, 26, 28,0.75)").raise().style("stroke-width",2.5)}))):(X.x(".my_circles").attr("stroke","none"),X.x(".my_circles").attr("opacity",1),X.x(".items").attr("opacity",1))}var re=a(18),ne=a(350),ie=a(318),oe=a(340),le=a(264),se=(a(145),Object(ie.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},tRoot:{marginBottom:35},rang_input:{marginLeft:10}}})));var de,ce=Object(Z.b)((function(e){return{selected_year:e.selected_year,state_range:e.state_range,mode:e.mode,slider_max:e.slider_max,range_mode_model:e.range_mode_model,range_mode_range1:e.range_mode_range1,range_mode_range2:e.range_mode_range2,time_mode_model:e.time_mode_model,time_mode_range:e.time_mode_range,time_mode_year1:e.time_mode_year1,time_mode_year2:e.time_mode_year2,years_for_dropdown:e.years_for_dropdown,dataset:e.dataset,default_models:e.default_models,slider_and_feature_value:e.slider_and_feature_value,sort_by:e.sort_by,grouped_by_year_data:e.grouped_by_year_data}}),(function(e){return{Set_state_range:function(t){return e({type:"state_range",value:t})},Set_changed:function(t){return e({type:"changed",value:t})},Set_default_models:function(t){return e({type:"default_models",value:t})},Set_default_model_scores:function(t){return e({type:"default_model_scores",value:t})}}}))((function(e){for(var t=se(),a=n.a.useState(e.state_range),r=Object(re.a)(a,2),i=r[0],o=r[1],l=[],s=(e.slider_max-1)/5,d=0;d<6;d++)l.push(1+s*d);var c=l.map((function(e){var t=parseInt(e);return{value:t,label:t}}));return n.a.createElement("div",{className:"Modelslider",style:{height:80,width:"99%",paddingTop:30,border:"2px solid rgb(178, 178, 178,0.5)"}},n.a.createElement("div",{className:"lower",style:{padding:"0px 0px",marginTop:-20}},n.a.createElement(oe.a,{classes:{input:t.rang_input},id:"standard-basic",label:"Lower",value:i[0],style:{width:"100%"},onChange:function(e){isNaN(parseInt(e.target.value))&&o(["",i[1]]),o([e.target.value,i[1]])}})),n.a.createElement("div",{className:"slider",style:{width:"100%",margin:"0px 0px"}},n.a.createElement(ne.a,{value:i,onChange:function(e,t){return o(t)},onChangeCommitted:function(t,a){return e.Set_changed("range")},"aria-labelledby":"range-slider",valueLabelDisplay:"on",min:1,max:e.slider_max,marks:c})),n.a.createElement("div",{className:"upper",style:{padding:"0px 0px",marginTop:-20}},n.a.createElement(oe.a,{classes:{input:t.rang_input},id:"standard-basic",label:"Upper",value:i[1],style:{width:"100%"},onChange:function(t){isNaN(parseInt(t.target.value))?o([i[0],""]):parseInt(t.target.value)>e.slider_max?o([i[0],e.slider_max]):o([i[0],parseInt(t.target.value)])}})),n.a.createElement("div",{className:"button",item:!0,xs:"2",style:{marginTop:-10}},n.a.createElement(le.a,{className:"range_button",style:{backgroundColor:"#ededed",height:30},onClick:function(){if(i[0]>i[1])alert("Lower range can not be larger than the upper range");else if(i[1]<i[0])alert("Upper range can not be smaller than the lower range");else{var t=P(e.sort_by,i,e.default_models,e.selected_year,e.grouped_by_year_data)[0],a=P(e.sort_by,i,e.default_models,e.selected_year,e.grouped_by_year_data)[1];e.Set_default_model_scores(a),e.Set_default_models(Object(Q.a)(t)),e.Set_state_range(i)}}},"Update range")))})),_e=a(65),pe=a(10),ue=(de={global_config:{max_circle_r:6,min_circle_r:2.5},anim_config:{rank_animation:3e3,deviation_animation:3e3,feature_animation:3e3,circle_animation:3e3},appHandleChange:null,sparkline_data:null,sort_by:"Average Precision",original_data:null,rank_data:null,lime_data:null,grouped_by_year_data:null,slope_chart_ready_to_vis:null,dataset:"fiscal",default_models:["MART","LambdaMART"],exp_method:"lime",state_range:[1,30],deviate_by:0,show:["Slope charts","Rankings","Explanation"],years_for_dropdown:["2006"],selected_year:2011,slider_min:1,slider_max:50,view_data:1,histogram_data:[],chart_scale_type:"true",features_with_score:null,ref_year:null,cmodel:"MART",clicked_items_in_slopechart:[],tracking:!1,dummy:null,features_dict:{},features_voted:null,Legend_ready_to_vis:null,legend_model:"MART",legend_show_option:"Rank",legend_year:2012,mode:"Model",range_mode_model:"MART",range_mode_range1:[1,25],range_mode_range2:[15,40],time_mode_model:"MART",time_mode_year1:"Null",time_mode_year2:"Null",time_mode_range:[6,32]},Object(J.a)(de,"chart_scale_type","true"),Object(J.a)(de,"slider_and_feature_value",{"Rank range":1,Feature:1}),Object(J.a)(de,"prev_prop",{}),Object(J.a)(de,"replay",!1),Object(J.a)(de,"changed","year"),Object(J.a)(de,"popup_chart_data",null),Object(J.a)(de,"pop_over",!1),Object(J.a)(de,"pop_over_models",["MART","LambdaMART"]),Object(J.a)(de,"clicked_features",[]),Object(J.a)(de,"drag_drop_feautre_data",{}),Object(J.a)(de,"dbclicked_features",[]),Object(J.a)(de,"default_model_scores",{}),Object(J.a)(de,"all_models",["MART","CordAscent","LambdaMART","LambdaRank","RankBoost","RankNet","SVM"]),Object(J.a)(de,"average_y",!1),Object(J.a)(de,"average_m",!1),Object(J.a)(de,"clicked_circles",[]),Object(J.a)(de,"threshold",100),Object(J.a)(de,"deviation_array",[]),Object(J.a)(de,"selected_instances",[]),Object(J.a)(de,"dragged_features",{}),Object(J.a)(de,"url","http://privacyprofiling.njitvis.com:5000/api/v2/rieval_mds"),Object(J.a)(de,"label_on",!0),de),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;if("label_on"===t.type)return Object(pe.a)({},e,{label_on:t.value});if("dragged_features"===t.type)return Object(pe.a)({},e,{dragged_features:t.value});if("selected_instances"===t.type)return Object(pe.a)({},e,{selected_instances:t.value});if("deviation_array"===t.type)return Object(pe.a)({},e,{deviation_array:t.value});if("view_data"===t.type)return Object(pe.a)({},e,{view_data:t.value});if("threshold"===t.type)return Object(pe.a)({},e,{threshold:t.value});if("clicked_circles"===t.type)return Object(pe.a)({},e,{clicked_circles:t.value});if("average_y"===t.type)return Object(pe.a)({},e,{average_y:t.value});if("average_m"===t.type)return Object(pe.a)({},e,{average_m:t.value});if("default_model_scores"===t.type)return Object(pe.a)({},e,{default_model_scores:t.value});if("dbclicked_features"===t.type)return Object(pe.a)({},e,{dbclicked_features:t.value});if("drag_drop_feautre_data"===t.type)return Object(pe.a)({},e,{drag_drop_feautre_data:t.value});if("anim_config"===t.type)return Object(pe.a)({},e,{config:t.value});if("show"===t.type)return Object(pe.a)({},e,{show:t.value});if("lime_data"===t.type)return Object(pe.a)({},e,{lime_data:t.value});if("default_models"===t.type)return Object(pe.a)({},e,{pop_over_models:t.value,default_models:t.value});if("rank_data"===t.type)return Object(pe.a)({},e,{rank_data:t.value});if("original_data"===t.type)return Object(pe.a)({},e,{original_data:t.value});if("exp_method"===t.type)return Object(pe.a)({},e,{exp_method:t.value});if("years_for_dropdown"===t.type)return Object(pe.a)({},e,{years_for_dropdown:t.value});if("appHandleChange"===t.type)return Object(pe.a)({},e,{appHandleChange:t.value});if("state_range"===t.type)return Object(pe.a)({},e,{dragged_features:{},state_range:t.value});if("selected_year"===t.type)return Object(pe.a)({},e,{dragged_features:{},selected_year:t.value});if("tracking"===t.type)return Object(pe.a)({},e,{tracking:t.value});if("grouped_by_year_data"===t.type)return Object(pe.a)({},e,{grouped_by_year_data:t.value});if("sort_by"===t.type)return Object(pe.a)({},e,{sort_by:t.value});if("deviate_by"===t.type)return Object(pe.a)({},e,{deviate_by:t.value});if("mode"===t.type)return"Model"==t.value?Object(pe.a)({},e,{pop_over_models:e.default_models,mode:t.value}):"Ranges"==t.value?Object(pe.a)({},e,{pop_over_models:[e.range_mode_model],mode:t.value}):Object(pe.a)({},e,{pop_over_models:[e.time_mode_model],mode:t.value});if("slider_max"===t.type)return Object(pe.a)({},e,{slider_max:t.value});if("range_mode_model"===t.type)return Object(pe.a)({},e,{pop_over_models:[t.value],range_mode_model:t.value});if("range_mode_range1"===t.type)return console.log(t.value),Object(pe.a)({},e,{range_mode_range1:t.value});if("range_mode_range2"===t.type)return console.log(t.value),Object(pe.a)({},e,{range_mode_range2:t.value});if("time_mode_range"===t.type)return Object(pe.a)({},e,{time_mode_range:t.value});if("time_mode_model"===t.type)return Object(pe.a)({},e,{pop_over_models:[t.value],time_mode_model:t.value});if("time_mode_year1"===t.type)return Object(pe.a)({},e,{time_mode_year1:t.value});if("time_mode_year2"===t.type)return Object(pe.a)({},e,{time_mode_year2:t.value});if("clicked_items_in_slopechart"===t.type)return Object(pe.a)({},e,{clicked_items_in_slopechart:t.value});if("features_with_score"===t.type)return Object(pe.a)({},e,{features_with_score:t.value});if("sparkline_data"===t.type)return Object(pe.a)({},e,{sparkline_data:t.value});if("legend_show_option"===t.type)return Object(pe.a)({},e,{legend_show_option:t.value});if("legend_model"===t.type)return Object(pe.a)({},e,{legend_model:t.value});if("histogram_data"===t.type)return Object(pe.a)({},e,{dragged_features:{},histogram_data:t.value});if("dataset"===t.type){var a=e.default_models,r=e.selected_year,n=e.all_models_local,i=e.range_mode_model,o=e.time_mode_model;return"airbnb"===t.value&&(a=["Brooklyn_SVM","Manhattan_SVM"],r="Brooklyn",n=["Bronx_SVM","Brooklyn_SVM","Manhattan_SVM","Queens_SVM","Staten_Island_SVM","NYC_SVM"],i="Brooklyn_SVM",o="Brooklyn_SVM"),Object(pe.a)({},e,{dataset:t.value,clicked_circles:[],default_models:a,selected_year:r,all_models:n,range_mode_model:i,time_mode_model:o})}if("slider_and_feature_value"===t.type)return Object(pe.a)({},e,{slider_and_feature_value:t.value});if("legend_year"===t.type)return Object(pe.a)({},e,{legend_year:t.value});if("prev_prop"===t.type)return Object(pe.a)({},e,{prev_prop:t.value});if("replay"===t.type)return Object(pe.a)({},e,{replay:t.value});if("changed"===t.type)return Object(pe.a)({},e,{changed:t.value});if("popup_chart_data"===t.type)return Object(pe.a)({},e,{popup_chart_data:t.value});if("pop_over"===t.type)return Object(pe.a)({},e,{pop_over:t.value});if("pop_over_models"===t.type){var l=t.value.filter((function(e){return"ListNet"!=e}));return Object(pe.a)({},e,{pop_over_models:l})}return"clicked_features"===t.type?Object(pe.a)({},e,{clicked_features:t.value}):e},fe=Object(_e.b)(me).getState();function he(e,t,a,r,n,i,o,l,s,d,c,_,p,u,m,f,h,g,y){var v={item_top_margin:h+6,item_bottom_margin:8,circ_radius:5,item_left_margin:7,item_right_margin:7},b=X.w("body").selectAll(".tooltip").data([0]).join("div").attr("class","tooltip").style("opacity",0),k=e[0]+"_contribution",x=[],w=0;y.map((function(e){r[i[0]].map((function(t){a.includes(parseInt(t.two_realRank))&&(x.push(parseFloat(t[e[0]+"_contribution"])),parseFloat(t[e[0]+"_contribution"])>w&&(w=parseFloat(t[e[0]+"_contribution"]),e,t.two_realRank))}))}));var j=X.h(x),E=[],S=[];i.map((function(e){r[e].map((function(e){e["1-qid"]==n&&a.includes(parseInt(e.two_realRank))&&(e.deviation<m&&S.push(parseFloat(e[k])),e.id=e.State.replace(/ /g,"").replace(/[^a-zA-Z ]/g,""),E.push(e))}))}));var O=X.u().domain(j).range([v.item_left_margin,c-v.item_right_margin]),C=X.o(S);t.selectAll(".my_mean_line").data([0]).join("line").attr("class","my_mean_line").attr("x1",O(C)).attr("x2",O(C)).attr("y1",h+3).attr("y2",_).attr("stroke","rgb(96, 96, 96,0.5)").attr("stroke-width",1);var R=X.v().exponent(.4).domain(X.h(p)).range([fe.global_config.max_circle_r,fe.global_config.min_circle_r]),A=t.selectAll(".my_circles").data(E,(function(e){return e.id})).join((function(e){return e.append("circle").attr("id",(function(e){return e.id})).attr("class",(function(e){return"my_circles exp_circles"})).attr("transform",(function(e,a){var r=O(parseFloat(e[k])),n=I(v.item_top_margin,_-v.item_bottom_margin,a);return g&&o.includes(e.id)?t.selectAll(".label"+e.id).data([0]).join("text").attr("x",r-3).attr("class","label"+e.id).attr("dominant-baseline","middle").attr("y",n+13).text(e.two_realRank).attr("opacity",.7).attr("font-size",10):t.selectAll(".label"+e.id).remove(),"translate("+r+","+n+")"})).attr("r",(function(e){return e.deviation>m?0:R(e.deviation)}))}),(function(e){return e.attr("class",(function(e){return e.id+" items exp_circles my_circles"})).transition().duration(d.circle_animation).delay(d.rank_animation+d.deviation_animation+d.feature_animation).attr("transform",(function(e,a){var r=O(parseFloat(e[k])),n=I(v.item_top_margin,_-v.item_bottom_margin,a);return g&&o.includes(e.id)?t.selectAll(".label"+e.id).data([0]).join("text").attr("x",r-3).attr("class","label"+e.id).attr("dominant-baseline","middle").attr("y",n+13).text(e.two_realRank).attr("opacity",.7).attr("font-size",10):t.selectAll(".label"+e.id).remove(),"translate("+r+","+n+")"})).attr("id",(function(e){return e.id})).attr("r",(function(e){return e.deviation>m?0:R(e.deviation)}))}),(function(e){return e.remove()}));function I(e,t,a){var r;if(e=e||0,t=t||1,"number"===typeof a){var n=(a=(9301*a+49297)%233280)/233280,i=Math.abs(Math.sin(a));n=n+i-Math.floor(n+i),r=Math.floor(e+n*(t-e+1))}else r=Math.floor(Math.random()*(t-e+1))+e;return r}A.attr("myindex",u).attr("feature_name",e[0]).attr("fill",(function(e){return s(e.two_realRank).replace(")",",.7)")})).attr("stroke",(function(e){if(o.includes(e.id))return"rgb(227, 26, 28,0.75)"})).attr("handle_opacity",(function(e){0==o.length&&X.x(".my_circles").attr("opacity",1),o.includes(e.id)?X.w(this).attr("opacity",1):X.w(this).attr("opacity",.3)})).on("click",(function(e){l(o.includes(e.id)?o.filter((function(t){return t!=e.id})):[].concat(Object(Q.a)(o),[e.id]))})).style("stroke-width",(function(e){if(o.includes(e.id))return X.w(this).raise(),2.5})),0==u?t.selectAll(".avg_text").data(["avg"]).join("text").attr("x",O(C)).attr("class","avg_text").attr("myindex",u).attr("y",(_-v.item_top_margin-v.item_bottom_margin)/2+v.item_top_margin-18).text("avg").attr("font-size",12).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("transform",(function(e){return"rotate(-90,"+(O(C)+5)+","+((_-v.item_top_margin-v.item_bottom_margin)/2+v.item_top_margin)+")"})):t.selectAll(".avg_text").remove(),A.on("mouseover",(function(e){b.transition().duration(200).style("opacity",.9),b.html("<p>Name: "+e.State+"</p><p>Ground Truth: "+e.two_realRank+"</p>Model Outcome: "+e.predicted+"</p>").style("left",X.g.pageX+"px").style("top",X.g.pageY+12+"px")})).on("mouseout",(function(e){return b.transition().duration(200).style("opacity",0)})).attr("global_range",j).attr("scaled_value",(function(e){return e[k]+"-----"+O(parseFloat(e[k]))}))}a(124);var ge=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).Createsvg=function(e,t){var a=Object(d.a)(r),n=X.r(r.props.state_range[0],r.props.state_range[1]+1);r.props.histogram_data.length>0&&(n=r.props.histogram_data);var i=[],o=r.props.original_data.filter((function(e){return r.props.selected_year==e["1-qid"]}));r.props.default_models.map((function(e){o.map((function(t){var a=parseInt(t.two_realRank),n=parseInt(t[e]);Math.abs(n-a)<r.props.threshold&&i.push(a)}))})),n=n.filter((function(e){return i.includes(e)}));var l=8+a.state.excluded_features.length,s=$(r.props.lime_data[e],n,r.props.selected_year).filter((function(e){return!r.state.excluded_features.includes(e)})).slice(0,l).map((function(e,t){return[e,t]})),c=parseInt(K(".explanation_chart_parent").height())-r.state.mds_height-parseInt(K(".title_p").height()),_=parseInt(K("#"+e).width()),p=(c-25)/s.length-2,u=X.w("#"+e).attr("height",c).selectAll(".feature_items").data(s,(function(e){return e[0]})).join((function(e){return e.append("svg").attr("y",(function(e,t){return 2+t*(p+2+0)}))}),(function(e){return e.transition().duration(2e3).attr("y",(function(e,t){return 2+t*(p+2+0)}))}),(function(e){return e.remove()}));u.attr("class",(function(e){return"feature_items "+e[0]})).attr("myindex",(function(e,t){return t})).attr("feature_name",(function(e){return e[0]})).attr("height",(function(e){if(e[1]==s.length-1){X.w(this.parentNode).selectAll(".ft_svg").remove();var t=X.w(this.parentNode).selectAll(".ft_svg").data([Math.random()]).join("svg").attr("x",0).attr("y",c-25).attr("class","ft_svg").attr("width",_).attr("height",25);return t.selectAll("defs").data([0]).join("defs").selectAll("#arrow").data([0]).join("marker").attr("id","arrow").attr("viewBox",[0,0,8,8]).attr("refX",4).attr("refY",4).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto-start-reverse").append("path").attr("id","path1").attr("d",X.m()([[0,0],[0,7],[7,3.8]])).attr("stroke","#777777").attr("fill","#777777"),t.append("path").attr("d",X.m()([[_/2-65,15],[50,15]])).attr("stroke","#777777").attr("marker-end","url(#arrow)").attr("fill","none"),t.append("path").attr("d",X.m()([[_-50,15],[65+_/2,15]])).attr("stroke","#777777").attr("marker-start","url(#arrow)").attr("fill","none"),t.selectAll(".myText_low").data([0]).join("text").attr("x",30).attr("class","myText_low").attr("dominant-baseline","middle").attr("y",15).text("Low").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),t.selectAll(".myText").data([0]).join("text").attr("x",_/2).attr("class","myText").attr("dominant-baseline","middle").attr("y",15).text("Attribute Importance").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),t.selectAll(".myText_high").data([0]).join("text").attr("x",_-30).attr("class","myText_high").attr("dominant-baseline","middle").attr("y",15).text("High").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),p-0-2}return p-0-2})).attr("width",_),u.attr("add_title_text_and_rect_for_title_text",(function(e,t){X.w(this).selectAll(".title_rect").data([0]).join("rect").attr("class","title_rect").attr("myindex",t).attr("feature_name",e[0]).attr("width","100%").attr("height",40).attr("fill","#e2e2e2").attr("y",0).attr("x",0),X.w(this).selectAll(".title_text").data([0]).join("text").attr("class","title_text").attr("myindex",t).attr("feature_name",e[0]).attr("x",_/2).text(e[0]).attr("dominant-baseline","middle").attr("y",20).attr("text-anchor","middle").attr("font-size",14)})),u.attr("add_cross_button",(function(e,t){X.w(this).selectAll(".cross_button").data([0]).join("text").attr("y",20).attr("dominant-baseline","middle").attr("myindex",t).attr("feature_name",e[0]).raise().attr("x",_-15).style("cursor","pointer").attr("font-size",14).attr("fill","black").text("\uf410").attr("class","cross_button fa make_cursor").on("click",(function(){X.g.preventDefault(),a.setState({excluded_features:[].concat(Object(Q.a)(a.state.excluded_features),[e[0]])})})),X.w(this).selectAll(".expand_button").data([0]).join("text").attr("y",20).attr("dominant-baseline","middle").attr("myindex",t).attr("feature_name",e[0]).raise().attr("x",_-35).style("cursor","pointer").attr("font-size",12).attr("fill","black").text("\uf31e").attr("class","expand_button fa make_cursor").on("click",(function(){a.props.Set_pop_over_models([a.props.model_name]),X.g.preventDefault();var t=e[0],r=a.props.selected_year;X.g.preventDefault();var i=Object(Q.a)(a.props.dbclicked_features);i.includes(t)||(i.unshift(t),X.x(".rect").classed("exp_chart_clicked",!0)),a.props.set_dbclicked_features(i);var o={};a.props.default_models.filter((function(e){return"ListNet"!=e})).map((function(e){var t=[];t=a.props.histogram_data.length>0?a.props.lime_data[e].filter((function(e){if(parseInt(e["1-qid"])==parseInt(r)&&a.props.histogram_data.includes(parseInt(e.two_realRank)))return e})):a.props.lime_data[e].filter((function(e){return parseInt(e["1-qid"])==parseInt(r)&&n.includes(parseInt(e.two_realRank))})),o[e]=t})),a.props.Set_popup_chart_data([o,t]),a.props.set_pop_over(!0)}))})),u.attr("add_rect_for_circle_background_and_handle_clicks",(function(e,t){X.w(this).selectAll(".circ_rect").data([0]).join("rect").attr("class","circ_rect").attr("myindex",t).attr("feature_name",e[0]).attr("width","100%").attr("height",p-40).attr("fill","#ffffff").attr("y",40).on("click",(function(){a.props.clicked_features.includes(e[0])?(a.props.Set_clicked_features(a.props.clicked_features.filter((function(t){return t!=e[0]}))),X.x("."+e[0]).selectAll(".border_rect").remove()):(a.props.Set_clicked_features([].concat(Object(Q.a)(a.props.clicked_features),[e[0]])),X.x("."+e[0]).selectAll(".border_rect").data([0]).join("rect").attr("class","border_rect").attr("width","100%").attr("height","100%").style("stroke","black").style("fill","none").style("stroke-width",5))}))})),u.attr("CreatexpCircle",(function(t,r){he(t,X.w(this),n,a.props.lime_data,a.props.selected_year,[e],a.props.clicked_circles,a.props.Set_clicked_circles,a.props.diverginColor,a.props.anim_config,_,p-2,a.props.deviation_array,r,a.props.threshold,a.props.dataset,40,a.props.label_on,s)})),u.attr("check_clicked_features",(function(e){a.props.clicked_features.includes(e[0])&&X.x("."+e[0]).selectAll(".border_rect").data([0]).join("rect").attr("class","border_rect").attr("width","100%").attr("height","100%").style("stroke","black").style("fill","none").style("stroke-width",5)}))},r.line_color=null,r.exp=n.a.createRef(),r.mds=n.a.createRef(),r.state={mds_height:10,mouseX:0,mouseY:0,excluded_features:[],sorted_features:null,circle_data:null,indexed_features:null,random:!0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({width:window.innerHeight})}},{key:"componentDidUpdate",value:function(e){this.Createsvg(this.props.model_name,null),0!=this.props.clicked_circles.length&&JSON.stringify(e.clicked_circles)===JSON.stringify(this.props.clicked_circles)?ae(0,this.props.clicked_circles,this.props.anim_config):this.Createsvg(this.props.model_name,null)}},{key:"render",value:function(){return n.a.createElement("div",{key:this.props.model_name,className:"explanation_chart_parent exp"+this.props.model_name,style:{width:"100%",height:"100%",border:"Model"==this.props.mode?"2px solid #e2e2e2":"none",padding:"2px 5px"}},n.a.createElement("p",{className:"title_p",style:{padding:0,margin:0}},this.props.model_name),n.a.createElement("svg",{ref:this.exp,id:this.props.model_name,style:{marginTop:this.state.mds_height,width:"100%"}}),n.a.createElement("marker",{id:"arrow",markerUnits:"strokeWidth",markerWidth:"12",markerHeight:"12",viewBox:"0 0 12 12",refX:"6",refY:"6",orient:"auto"},n.a.createElement("path",{d:"M2,2 L10,6 L2,10 L6,6 L2,2",style:{fill:"black"}})))}}]),a}(r.Component),ye=Object(Z.b)((function(e){return{deviation_array:e.deviation_array,original_data:e.original_data,time_mode_model:e.time_mode_model,chart_scale_type:e.chart_scale_type,dataset:e.dataset,histogram_data:e.histogram_data,sparkline_data:e.sparkline_data,anim_config:e.anim_config,show:e.show,average_m:e.average_m,average_y:e.average_y,lime_data:e.lime_data,rank_data:e.rank_data,clicked_circles:e.clicked_circles,clicked_features:e.clicked_features,threshold:e.threshold,mode:e.mode,dbclicked_features:e.dbclicked_features,dragged_features:e.dragged_features,url:e.url,default_models:e.default_models,label_on:e.label_on}}),(function(e){return{Set_dragged_features:function(t){return e({type:"dragged_features",value:t})},Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})},Set_prev_prop:function(t){return e({type:"prev_prop",value:t})},Set_sparkline_data:function(t){return e({type:"sparkline_data",value:t})},Set_replay:function(t){return e({type:"replay",value:t})},Set_clicked_features:function(t){return e({type:"clicked_features",value:t})},Set_selected_year:function(t){return e({type:"selected_year",value:t})},set_dbclicked_features:function(t){return e({type:"dbclicked_features",value:t})},Set_popup_chart_data:function(t){return e({type:"popup_chart_data",value:t})},set_pop_over:function(t){return e({type:"pop_over",value:t})},Set_pop_over_models:function(t){return e({type:"pop_over_models",value:t})}}}))(ge);a(245);var ve=Object(Z.b)((function(e){return{state_range:e.state_range,all_models:e.all_models,selected_year:e.selected_year,years_for_dropdown:e.years_for_dropdown,default_models:e.default_models,sort_by:e.sort_by,grouped_by_year_data:e.grouped_by_year_data,dataset:e.dataset,exp_method:e.exp_method}}),(function(e){return{Set_selected_year:function(t){return e({type:"selected_year",value:t})},Set_default_models:function(t){return e({type:"default_models",value:t})},Set_default_model_scores:function(t){return e({type:"default_model_scores",value:t})}}}))((function(e){var t=function(t){var a=P(e.sort_by,e.state_range,e.default_models,t,e.grouped_by_year_data)[0],r=P(e.sort_by,e.state_range,e.default_models,t,e.grouped_by_year_data)[1];e.Set_default_model_scores(r),e.Set_default_models(Object(Q.a)(a)),console.log(a,r,"temp_model")};if(console.log(e.dataset,"dataset"),"rur"==e.dataset)var a=["MART","RandomFor"];return"ice"===e.exp_method?(a=(a=e.all_models).filter((function(e){return"RandomFor"!==e}))).includes("SVM")||a.push("SVM"):a=e.all_models,n.a.createElement("div",{className:"model_topbar",style:{width:"100%",marginBottom:2,display:"flex",justifyContent:"center",margin:0}},n.a.createElement("div",null,n.a.createElement("h5",{style:{display:"inline-block",marginLeft:0,marginRight:3,fontSize:16,fontWeight:600}},"airbnb"===e.dataset?"Boroughs:":"Years:"),e.years_for_dropdown.map((function(a){return n.a.createElement("p",{className:e.selected_year==a?"years_p_selected years_p":"years_p",onClick:function(){return r=a,e.Set_selected_year(r),void t(r);var r}},a)}))),n.a.createElement("div",{style:{marginLeft:20}},n.a.createElement("h5",{style:{display:"inline-block",marginLeft:0,marginRight:3,fontSize:16,fontWeight:600}},"Rankers:"),a.map((function(t){return n.a.createElement("p",{modelName:t,className:e.default_models.includes(t)?"years_p_selected years_p model_p":"years_p model_p",onClick:function(){return function(t){if(e.default_models.includes(t))e.Set_default_models(e.default_models.filter((function(e){return e!=t})));else{var a=P(e.sort_by,e.state_range,[].concat(Object(Q.a)(e.default_models),[t]),e.selected_year,e.grouped_by_year_data)[0],r=P(e.sort_by,e.state_range,[].concat(Object(Q.a)(e.default_models),[t]),e.selected_year,e.grouped_by_year_data)[1];e.Set_default_model_scores(r),e.Set_default_models(Object(Q.a)(a))}}(t)}},t)}))))})),be=a(346),ke=function(e,t,a,r){var n=X.v().exponent(.4).domain(X.h(r.deviation_array)).range([6,1]),i=t+"_contribution",o=0,l=30,s=85,d=50,c=0,_=520-d-l,p=270-o-s,u={};(e=e.filter((function(e){return parseFloat(e[i])>0}))).map((function(e){u[e[t]]>0?u[e[t]]+=1:u[e[t]]=1}));var m=Object.keys(u),f=Object.values(u),h=X.u().domain([X.p(f),X.n(f)]).range([0,_]).nice(),g=X.s().domain(m).range([0,p]).padding(.1),y=X.w("#"+r.myid).attr("width",_+d+l).attr("height",p+o+s+c),v=y.selectAll(".svg11").data([0]).join("svg").attr("y",c).attr("class","svg11").selectAll(".myg").data([0]).join("g").attr("class","myg").attr("transform","translate("+d+","+o+")");(v=y.selectAll(".svg11").data([0]).join("svg").attr("class","svg11").selectAll(".myg").data([0]).join("g").attr("class","myg").attr("transform","translate("+d+","+o+")")).selectAll(".myYaxis").data([0]).join("g").attr("class","myYaxis").attr("transform","translate("+(_+20)+",20)").call(X.c(g).tickSize(_)).selectAll("text").selectAll(".tick line").remove(),v.selectAll(".domain").remove(),v.selectAll(".tick line").attr("stroke","#EBEBEB"),v.selectAll(".scatterplot_g").data(a).join("g").attr("id",(function(e){return e[0]+"scatterplot_g_id"})).attr("class","scatterplot_g").attr("ax",(function(e){var a=e[1].map((function(e){return parseFloat(e[t+"_contribution"])}));h=X.u().domain([X.p(a),X.n(a)]).range([0,_]).nice();var o=e[1].sort((function(e,t){return e.deviation-t.deviation}));X.w(this).selectAll("circle").data(o).join("circle").attr("cy",(function(e,a){return g(e[t])+35})).attr("cx",(function(e,t){return h(parseFloat(e[i]))})).attr("r",(function(e){return parseFloat(e[i])<=0?0:n(e.deviation)})).attr("fill",(function(e){return r.diverginColor(e.two_realRank).replace(")",",.7)")})).attr("class",(function(e){return"my_circles"})).attr("id",(function(e){return e.id})).on("click",(function(e){r.Set_clicked_circles(r.clicked_circles.includes(e.id)?r.clicked_circles.filter((function(t){return t!=e.id})):[].concat(Object(Q.a)(r.clicked_circles),[e.id]))}))}));y.selectAll(".ft_svg").remove();var b=y.selectAll(".ft_svg").data([Math.random()]).join("svg").attr("x",70).attr("y",p+10).attr("class","ft_svg").attr("width",_).attr("height",25);b.selectAll("defs").data([0]).join("defs").selectAll("#arrow").data([0]).join("marker").attr("id","arrow").attr("viewBox",[0,0,8,8]).attr("refX",4).attr("refY",4).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto-start-reverse").append("path").attr("id","path1").attr("d",X.m()([[0,0],[0,7],[7,3.8]])).attr("stroke","#777777").attr("fill","#777777"),b.append("path").attr("d",X.m()([[_/2-65,15],[50,15]])).attr("stroke","#777777").attr("marker-end","url(#arrow)").attr("fill","none"),b.append("path").attr("d",X.m()([[_-50,15],[65+_/2,15]])).attr("stroke","#777777").attr("marker-start","url(#arrow)").attr("fill","none"),b.selectAll(".myText_low").data([0]).join("text").attr("x",30).attr("class","myText_low").attr("dominant-baseline","middle").attr("y",15).text("Low").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),b.selectAll(".myText").data([0]).join("text").attr("x",_/2).attr("class","myText").attr("dominant-baseline","middle").attr("y",15).text("Attribute Importance").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),b.selectAll(".myText_high").data([0]).join("text").attr("x",_-30).attr("class","myText_high").attr("dominant-baseline","middle").attr("y",15).text("High").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828");var k=X.w("body").append("div").attr("class","tooltip2").style("opacity",0);X.x(".exp_circles").on("mouseover",(function(e){k.transition().duration(200).style("opacity",.9),k.html("<p>"+e.State+"</p><p>Model: "+X.w(this).attr("dataset_name")+"</p>").style("left",X.g.pageX+"px").style("top",X.g.pageY-28+"px")})).on("mouseout",(function(e){X.x(".tooltip2").transition().duration(500).style("opacity",0)}))},xe=(a(246),a(248),function(e,t,a,r){var n=X.v().exponent(.4).domain(X.h(r.deviation_array)).range([6,1]),i=t+"_contribution",o=(a=a.map((function(e){var t=e[1].filter((function(e){return e.deviation<r.threshold&&parseFloat(e[i])>0}));return[e[0],t]})),0),l=30,s=70,d=40,c=0,_=520-d-l,p=250-o-s,u=X.w("#"+r.myid).attr("width",_+d+l).attr("height",p+o+s+c),m=u.selectAll(".svg11").data([0]).join("svg").attr("y",c).attr("class","svg11").selectAll(".myg").data([0]).join("g").attr("class","myg").attr("transform","translate("+d+","+o+")");(m=u.selectAll(".svg11").data([0]).join("svg").attr("class","svg11").selectAll(".myg").data([0]).join("g").attr("class","myg").attr("transform","translate("+d+","+o+")")).selectAll(".myline2").data([0]).join("line").attr("class","myline2").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",p).attr("stroke","#EBEBEB"),m.selectAll(".myline3").data([0]).join("line").attr("class","myline3").attr("x1",0).attr("y1",p).attr("x2",_).attr("y2",p).attr("stroke","#EBEBEB"),m.selectAll(".scatterplot_g").data(a).join("g").attr("id",(function(e){return e[0]+"scatterplot_g_id"})).attr("class","scatterplot_g").attr("ax",(function(e){var a=e[1].map((function(e){return parseFloat(e[i])})),l=e[1].map((function(e){return parseFloat(e[t])})),s=X.u().domain(X.h(a)).range([8,_-8]).nice(),d=X.u().domain(X.h(l)).range([p,4]).nice();console.log(l,"data_for_y_axis"),m.selectAll(".myYaxis").data([0]).join("g").attr("class","myYaxis").attr("transform","translate(0,"+o+")").call(X.c(d).ticks(5).tickSize(-_).tickFormat((function(e){return e%1!==0?X.i(".2f")(e):X.i(".2s")(e)}))).select(".domain").remove(),m.selectAll(".tick line").attr("stroke","#EBEBEB"),X.w(this).selectAll("circle").data(e[1]).join("circle").attr("cx",(function(e,t){return s(e[i])})).attr("cy",(function(e,a){return d(parseFloat(e[t]))<10?10:d(parseFloat(e[t]))>p-10?p-10:d(parseFloat(e[t]))-0})).attr("actual_Y_value",(function(e){return e[t]+" : x value : "+e[i]})).attr("r",(function(e){return parseFloat(e[i])<=0?0:n(e.deviation)})).attr("fill",(function(e){return r.diverginColor(e.two_realRank).replace(")",",.6)")})).attr("class",(function(e){return"my_circles"})).attr("id",(function(e){return e.id})).on("click",(function(e){r.Set_clicked_circles(r.clicked_circles.includes(e.id)?r.clicked_circles.filter((function(t){return t!=e.id})):[].concat(Object(Q.a)(r.clicked_circles),[e.id]))}))})),m.selectAll(".my_temp_rect").data([0]).join("rect").attr("class","my_temp_rect").attr("width","100%").attr("height",100).style("fill","white").attr("y",p),m.selectAll(".myXaxis").raise(),m.selectAll(".my_line").raise(),m.selectAll(".scatterplot_g").raise();u.selectAll(".ft_svg").remove();var f=u.selectAll(".ft_svg").data([Math.random()]).join("svg").attr("x",40).attr("y",p+10).attr("class","ft_svg").attr("width",_).attr("height",25);f.selectAll("defs").data([0]).join("defs").selectAll("#arrow").data([0]).join("marker").attr("id","arrow").attr("viewBox",[0,0,8,8]).attr("refX",4).attr("refY",4).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto-start-reverse").append("path").attr("id","path1").attr("d",X.m()([[0,0],[0,7],[7,3.8]])).attr("stroke","#777777").attr("fill","#777777"),f.append("path").attr("d",X.m()([[_/2-65,15],[50,15]])).attr("stroke","#777777").attr("marker-end","url(#arrow)").attr("fill","none"),f.append("path").attr("d",X.m()([[_-50,15],[65+_/2,15]])).attr("stroke","#777777").attr("marker-start","url(#arrow)").attr("fill","none"),f.selectAll(".myText_low").data([0]).join("text").attr("x",30).attr("class","myText_low").attr("dominant-baseline","middle").attr("y",15).text("Low").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),f.selectAll(".myText").data([0]).join("text").attr("x",_/2).attr("class","myText").attr("dominant-baseline","middle").attr("y",15).text("Attribute Importance").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),f.selectAll(".myText_high").data([0]).join("text").attr("x",_-30).attr("class","myText_high").attr("dominant-baseline","middle").attr("y",15).text("High").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),m.selectAll(".myText2").data([0]).join("text").attr("class","myText2").attr("dominant-baseline","middle").attr("text-anchor","middle").text("attribute value").attr("fill","#5b5959").attr("font-size",13).attr("transform",(function(e){return"rotate(-90,0,"+p/2+")"})).attr("x",0).attr("y",d+20)}),we=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({a:5})}},{key:"componentDidUpdate",value:function(){var e=this,t={};this.props.default_models.filter((function(e){return"ListNet"!=e})).map((function(a){t[a]=e.props.popup_chart_data[0][a].filter((function(t){return t.deviation<e.props.threshold})).map((function(e){return e.id=e.State.replace(/ /g,"").replace(/[^a-zA-Z ]/g,""),e}))}));var a=[].concat.apply([],Object.values(t)),r=Object.entries(this.props.popup_chart_data[0]).filter((function(t){return e.props.pop_over_models.includes(t[0])}));a.length>0&&isNaN(a[0][this.props.popup_chart_data[1]])?ke(a,this.props.popup_chart_data[1],r,this.props,this.props.deviation_array):xe(a,this.props.popup_chart_data[1],r,this.props,this.props.deviation_array),ae(0,this.props.clicked_circles,this.props.anim_config)}},{key:"render",value:function(){return n.a.createElement("div",{key:this.props.popup_chart_data[1],style:{margin:10,padding:10,border:0==this.props.index?"3px solid #e5e5e5":"white"}},n.a.createElement("svg",{id:this.props.myid,className:"pop_over"}," "),n.a.createElement("p",{style:{color:"#4f4c4c",marginLeft:"42%",marginTop:-25,marginBottom:0}},this.props.popup_chart_data[1]))}}]),a}(r.Component),je=Object(Z.b)((function(e){return{pop_over_models:e.pop_over_models,clicked_circles:e.clicked_circles,threshold:e.threshold,anim_config:e.anim_config,deviation_array:e.deviation_array}}),(function(e){return{Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})}}}))(we),Ee=a(67),Se=a.n(Ee),Oe=a(330),Ce=a(173),Re=a(327),Ae=a(329),Ie=a(344),Me=a(328),Ne=a(45),Te=a.n(Ne);var Le=Object(Z.b)((function(e){return{pop_over_models:e.pop_over_models}}),(function(e){return{Set_pop_over_models:function(t){return e({type:"pop_over_models",value:t})}}}))((function(e){var t=n.a.useState(null),a=Object(re.a)(t,2),r=a[0],i=a[1],o=Boolean(r),l=n.a.useState([0]),s=Object(re.a)(l,2),d=s[0],c=s[1],_=function(e){return function(){var t=d.indexOf(e),a=Object(Q.a)(d);-1===t?a.push(e):a.splice(t,1),c(a)}};return n.a.createElement("div",null,n.a.createElement(le.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)}},"Add More Rankers",n.a.createElement(Te.a,null)),n.a.createElement(Ce.a,{id:"fade-menu",anchorEl:r,keepMounted:!0,open:o,onClose:function(){i(null)},TransitionComponent:Me.a},n.a.createElement("div",{className:"CheckboxContainer"},n.a.createElement(Re.a,null,e.default_models.map((function(t){var a="checkbox-list-label-".concat(t);return n.a.createElement(Ae.a,{key:t,role:void 0,onClick:_(t)},n.a.createElement(Ie.a,{checked:e.pop_over_models.includes(t),edge:"start",tabIndex:-1,value:t,onChange:function(t,a){!function(t){var a=Object(Q.a)(e.pop_over_models).filter((function(e){return"ListNet"!=e}));a.includes(t.target.value)?(a=e.pop_over_models.filter((function(e){return e!=t.target.value})),e.Set_pop_over_models(a)):(a.push(t.target.value),e.Set_pop_over_models(a))}(t)}}),n.a.createElement("p",{className:"list_item_label",id:a},t))}))))))}));var Be=Object(Z.b)((function(e){return{popup_chart_data:e.popup_chart_data,pop_over:e.pop_over,dbclicked_features:e.dbclicked_features,mode:e.mode}}),(function(e){return{set_pop_over:function(t){return e({type:"pop_over",value:t})},set_dbclicked_features:function(t){return e({type:"dbclicked_features",value:t})},set_clicked_features:function(t){return e({type:"clicked_features",value:t})}}}))((function(e){return n.a.createElement("div",{className:"pop_over",style:{position:"relative"}},1==e.pop_over?n.a.createElement("div",{style:{top:"2%",left:"14%",position:"fixed",pointerEvents:"none",backgroundColor:"transparent"}},n.a.createElement(Se.a,null,n.a.createElement(Oe.a,{style:{backgroundColor:"#ffffff",boxShadow:"3px 2px 15px -7px #000000",pointerEvents:"auto"}},n.a.createElement(Oe.a,{container:!0,style:{borderBottom:"1px solid #e2e2e2",marginBottom:20},direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(Le,{default_models:e.default_models}),n.a.createElement(le.a,{color:"secondary",id:"draggable-dialog-title",onClick:function(){e.set_pop_over(!1),e.set_dbclicked_features([])}},"close")),"Model"==e.mode?n.a.createElement(Oe.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{maxHeight:700,overflow:"scroll",maxWidth:1600}},e.dbclicked_features.length>0?e.dbclicked_features.map((function(t,a){return n.a.createElement(je,{index:a,popup_chart_data:[e.popup_chart_data[0],t],default_models:e.default_models,myid:t.replace(/\s/g,"").replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),diverginColor:e.diverginColor})})):n.a.createElement(je,{popup_chart_data:e.popup_chart_data,default_models:e.default_models,myid:"myid1",diverginColor:e.diverginColor,textClickHandler_original:e.textClickHandler_original})):null,"Ranges"==e.mode?n.a.createElement(Oe.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{maxHeight:700,overflow:"scroll",maxWidth:1600}},e.dbclicked_features.length>0?e.dbclicked_features.map((function(t,a){return n.a.createElement(je,{index:a,popup_chart_data:[e.popup_chart_data[0],t],default_models:e.default_models,myid:t.replace(/\s/g,"").replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),diverginColor:e.diverginColor})})):n.a.createElement(je,{popup_chart_data:e.popup_chart_data,default_models:e.default_models,myid:"myid1",diverginColor:e.diverginColor,textClickHandler_original:e.textClickHandler_original})):null,"Time"==e.mode?n.a.createElement(Oe.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{maxHeight:700,overflow:"scroll",maxWidth:1600}},e.dbclicked_features.length>0?e.dbclicked_features.map((function(t,a){return n.a.createElement(je,{index:a,popup_chart_data:[e.popup_chart_data[0],t],default_models:e.default_models,myid:t.replace(/\s/g,"").replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),diverginColor:e.diverginColor})})):n.a.createElement(je,{popup_chart_data:e.popup_chart_data,default_models:e.default_models,myid:"myid1",diverginColor:e.diverginColor,textClickHandler_original:e.textClickHandler_original})):null))):null)})),ze=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).line_color=null,r.state={height_slope_exp_chart:700,mouseX:0,mouseY:0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({width:window.innerHeight})}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentDidUpdate",value:function(e,t){var a=this,r=this,n=X.r(this.props.state_range[0],this.props.state_range[1]+1);this.props.histogram_data.length>0&&(n=this.props.histogram_data);var i=X.p(n),o=X.n(n),l=X.t([o,parseInt((o+i)/2),i],X.l(["#b37cd3","#d9d58c","#71ce6c"])),s=[],d=this.props.original_data.filter((function(e){return a.props.selected_year==e["1-qid"]}));this.props.default_models.map((function(e){d.map((function(t){var r=parseInt(t.two_realRank),n=parseInt(t[e]);Math.abs(n-r)<a.props.threshold&&s.push(r)}))})),te("dev_plot_container_svg","exp",n=n.filter((function(e){return s.includes(e)})),this.props.original_data,this.props.default_models,this.props.anim_config,this.props.selected_year,this.props.average_m,this.props.clicked_circles,this.props.Set_clicked_circles,l,this.props.sparkline_data,this.props.Set_selected_year,this.props.dataset,this.props.threshold),ae(0,this.props.clicked_circles,this.props.anim_config),X.x(".model_p").on("mouseover",(function(){var e=X.w(this).attr("modelName");r.props.default_models.includes(e)&&(X.x(".dev_circles").attr("opacity",.1),X.x("."+e).attr("opacity",1))})).on("mouseout",(function(){X.x(".dev_circles").attr("opacity",1)}))}},{key:"render",value:function(){var e=this,t=X.r(this.props.state_range[0],this.props.state_range[1]+1);this.props.histogram_data.length>0&&(t=this.props.histogram_data);var a=X.p(t),r=X.n(t),i=X.t([r,parseInt((r+a)/2),a],X.l(["#b37cd3","#d9d58c","#71ce6c"]));this.props.Set_selected_instances(t);var o=[];return console.log("Default Models: ",this.props.default_models,this.props.dataset),this.props.default_models.map((function(a){e.props.lime_data[a].map((function(a){a["1-qid"]==e.props.selected_year&&t.includes(parseInt(a.two_realRank))&&o.push(a.deviation)}))})),this.props.Set_deviation_array(o),n.a.createElement(be.a,{className:"ModelChartParent",container:!0,direction:"row",justify:"flex-start",alignItems:"center",style:{height:"100%",width:"100%",backgroundColor:"white",margin:2,padding:2,boxShadow:"-2px 1px 4px -1px white"}}," ",n.a.createElement(be.a,{item:!0,className:"left_container",style:{width:400,backgroundColor:"#fcfcfc"}},n.a.createElement("div",{className:"year_and_model_selector_and_slider_container",style:{"z-index":1}}," ",n.a.createElement(ve,null),n.a.createElement(ce,null)),n.a.createElement("div",{class:"deviation_plot_container_div",style:{width:"100%",height:K(".ModelChartParent").height()-K(".year_and_model_selector_and_slider_container").height(),marginBottom:0,overflow:"scroll"}},n.a.createElement("svg",{id:"dev_plot_container_svg",style:{width:"100%",overflow:"hidden"}}))),null!=this.props.rank_data?n.a.createElement(be.a,{className:"right_container",item:!0,container:!0,xs:!0,direction:"row",columnSpacing:1,style:{height:"100%"}},this.props.default_models.map((function(t,a){return n.a.createElement(be.a,{item:!0,xs:12/e.props.default_models.length,style:{height:"100%"}},n.a.createElement(ye,{diverginColor:i,exp_id:"exp"+a,default_models:e.props.default_models,state_range:e.props.state_range,selected_year:e.props.selected_year,model_name:t}))}))):null,n.a.createElement(Be,{diverginColor:i,default_models:this.props.default_models}))}}]),a}(r.Component),De=Object(Z.b)((function(e){var t;return t={default_models:e.default_models,histogram_data:e.histogram_data,state_range:e.state_range,selected_year:e.selected_year,lime_data:e.lime_data},Object(J.a)(t,"default_models",e.default_models),Object(J.a)(t,"original_data",e.original_data),Object(J.a)(t,"dataset",e.dataset),Object(J.a)(t,"sparkline_data",e.sparkline_data),Object(J.a)(t,"dataset",e.dataset),Object(J.a)(t,"anim_config",e.anim_config),Object(J.a)(t,"average_m",e.average_m),Object(J.a)(t,"rank_data",e.rank_data),Object(J.a)(t,"clicked_circles",e.clicked_circles),Object(J.a)(t,"threshold",e.threshold),t}),(function(e){return{Set_selected_instances:function(t){return e({type:"selected_instances",value:t})},Set_deviation_array:function(t){return e({type:"deviation_array",value:t})},Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})},Set_selected_year:function(t){return e({type:"selected_year",value:t})}}}))(ze),He=(a(150),Object(ie.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},tRoot:{marginBottom:35},rang_input:{marginLeft:10}}})));var Fe=Object(Z.b)((function(e){return{slider_max:e.slider_max,range_mode_range1:e.range_mode_range1}}),(function(e){return{Set_range_mode_range1:function(t){return e({type:"range_mode_range1",value:t})},Set_changed:function(t){return e({type:"changed",value:t})}}}))((function(e){for(var t,a=He(),r=n.a.useState(e.range_mode_range1),i=Object(re.a)(r,2),o=i[0],l=i[1],s=[],d=(e.slider_max-1)/5,c=0;c<6;c++)s.push(1+d*c);var _=s.map((function(e){var t=parseInt(e);return{value:t,label:t}}));return n.a.createElement("div",{className:"Modelslider",style:{height:70,width:"100%",marginBottom:5,padding:30,border:"1px solid rgb(178, 178, 178,0.5)"}},n.a.createElement("div",{className:"lower",style:{padding:"0px 0px",marginTop:-20}},n.a.createElement(oe.a,{classes:{input:a.rang_input},id:"standard-basic",label:"Lower",value:o[0],style:{width:"100%"},onChange:function(e){isNaN(parseInt(e.target.value))?l(["",o[1]]):l([e.target.value,o[1]])}})),n.a.createElement("div",{className:"slider",style:{width:"100%",margin:"0px 0px"}},n.a.createElement(ne.a,(t={value:o,onChange:function(e,t){return l(t)},onChangeCommitted:function(t,a){return e.Set_changed("range")},valueLabelDisplay:"auto","aria-labelledby":"range-slider"},Object(J.a)(t,"valueLabelDisplay","on"),Object(J.a)(t,"min",1),Object(J.a)(t,"max",e.slider_max),Object(J.a)(t,"marks",_),t))),n.a.createElement("div",{className:"upper",style:{padding:"0px 0px",marginTop:-20}},n.a.createElement(oe.a,{classes:{input:a.rang_input},id:"standard-basic",label:"Upper",value:o[1],style:{width:"100%"},onChange:function(t){isNaN(parseInt(t.target.value))?l([o[0],""]):parseInt(t.target.value)>e.slider_max?l([o[0],e.slider_max]):l([o[0],parseInt(t.target.value)])}})),n.a.createElement("div",{className:"button",item:!0,xs:"2",style:{marginTop:-10}},n.a.createElement(le.a,{className:"range_button",style:{backgroundColor:"#ededed",height:30},onClick:function(){o[0]>o[1]?alert("Lower range can not be larger than the upper range"):o[1]<o[0]?alert("upper range can not be smaller than the lower range"):e.Set_range_mode_range1(o)}},"Update range")))})),We=Object(ie.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},tRoot:{marginBottom:35},rang_input:{marginLeft:10}}}));var qe=Object(Z.b)((function(e){return{slider_max:e.slider_max,range_mode_range2:e.range_mode_range2}}),(function(e){return{Set_range_mode_range2:function(t){return e({type:"range_mode_range2",value:t})},Set_changed:function(t){return e({type:"changed",value:t})}}}))((function(e){for(var t,a=We(),r=n.a.useState(e.range_mode_range2),i=Object(re.a)(r,2),o=i[0],l=i[1],s=[],d=(e.slider_max-1)/5,c=0;c<6;c++)s.push(1+d*c);var _=s.map((function(e){var t=parseInt(e);return{value:t,label:t}}));return n.a.createElement("div",{className:"Modelslider",style:{height:70,width:"100%",marginBottom:5,paddingTop:30,paddingLeft:15,border:"1px solid rgb(178, 178, 178,0.5)"}},n.a.createElement("div",{className:"lower",style:{padding:"0px 0px",marginTop:-20}},n.a.createElement(oe.a,{classes:{input:a.rang_input},id:"standard-basic",label:"Lower",value:o[0],style:{width:"100%"},onChange:function(e){isNaN(parseInt(e.target.value))?l(["",o[1]]):l([e.target.value,o[1]])}})),n.a.createElement("div",{className:"slider",style:{width:"100%",margin:"0px 0px"}},n.a.createElement(ne.a,(t={value:o,onChange:function(e,t){return l(t)},onChangeCommitted:function(t,a){return e.Set_changed("range")},valueLabelDisplay:"auto","aria-labelledby":"range-slider"},Object(J.a)(t,"valueLabelDisplay","on"),Object(J.a)(t,"min",1),Object(J.a)(t,"max",e.slider_max),Object(J.a)(t,"marks",_),t))),n.a.createElement("div",{className:"upper",style:{padding:"0px 0px",marginTop:-20}},n.a.createElement(oe.a,{classes:{input:a.rang_input},id:"standard-basic",label:"Upper",value:o[1],style:{width:"100%"},onChange:function(t){isNaN(parseInt(t.target.value))?l([o[0],""]):parseInt(t.target.value)>e.slider_max?l([o[0],e.slider_max]):l([o[0],parseInt(t.target.value)])}})),n.a.createElement("div",{className:"button",item:!0,xs:"2",style:{marginTop:-10}},n.a.createElement(le.a,{className:"range_button",style:{backgroundColor:"#ededed",height:30},onClick:function(){o[0]>o[1]?alert("Lower range can not be larger than the upper range"):o[1]<o[0]?alert("upper range can not be smaller than the lower range"):e.Set_range_mode_range2(o)}},"Update range")))}));a(256);var Ue=Object(Z.b)((function(e){return{all_models:e.all_models,selected_year:e.selected_year,years_for_dropdown:e.years_for_dropdown,default_models:e.default_models,range_mode_model:e.range_mode_model,dataset:e.dataset}}),(function(e){return{Set_selected_year:function(t){return e({type:"selected_year",value:t})},Set_range_mode_model:function(t){return e({type:"range_mode_model",value:t})}}}))((function(e){if("rur"==e.dataset)var t=["MART","RandomFor"];else var t=e.all_models;return"ice"===e.exp_method?(t=(t=e.all_models).filter((function(e){return"RandomFor"!==e}))).includes("SVM")||t.push("SVM"):t=e.all_models,n.a.createElement("div",{className:"range_topbar",style:{width:"100%",marginBottom:2,display:"flex",justifyContent:"center",margin:0}},n.a.createElement("div",null,n.a.createElement("h5",{style:{display:"inline-block",marginLeft:0,marginRight:3,fontSize:16,fontWeight:600}},"airbnb"===e.dataset?"Boroughs:":"Years:"," "),e.years_for_dropdown.map((function(t){return n.a.createElement("p",{className:e.selected_year==t?"years_p_selected years_p":"years_p",onClick:function(){return a=t,void e.Set_selected_year(a);var a}},t)}))),n.a.createElement("div",{style:{marginLeft:20}},n.a.createElement("h5",{style:{display:"inline-block",marginLeft:0,marginRight:3,fontSize:16,fontWeight:600}},"Rankers:"),t.map((function(t){return n.a.createElement("p",{className:e.range_mode_model==t?"years_p_selected years_p":"years_p",onClick:function(){return a=t,e.Set_range_mode_model(a);var a}},t)}))))})),Ye=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).Createsvg=function(e,t,a){var n=Object(d.a)(r),i=X.r(a[0],a[1]+1);r.props.histogram_data.length>0&&(i=r.props.histogram_data);var o=[],l=r.props.original_data.filter((function(e){return r.props.selected_year==e["1-qid"]}));r.props.default_models.map((function(e){l.map((function(t){var a=parseInt(t.two_realRank),n=parseInt(t[e]);Math.abs(n-a)>r.props.threshold&&o.push(a)}))})),i=i.filter((function(e){return!o.includes(e)}));var s=8+n.state.excluded_features.length,c=$(r.props.lime_data[e],i,r.props.selected_year).filter((function(e){return!r.state.excluded_features.includes(e)})).slice(0,s).map((function(e,t){return[e,t]})),_=parseInt(K(".explanation_chart_parent").height())-r.state.mds_height-parseInt(K(".title_p").height()),p=parseInt(K("#"+r.props.exp_id).width()),u=(_-10)/c.length-5,m=X.w("#"+r.props.exp_id).attr("height",_).selectAll(".feature_items").data(c,(function(e){return e[0]})).join((function(e){return e.append("svg").attr("y",(function(e,t){return 5+t*(u+5)}))}),(function(e){return e.transition().duration(2e3).attr("y",(function(e,t){return 5+t*(u+5)}))}),(function(e){return e.remove()}));m.attr("class",(function(e){return"feature_items "+e[0]})).attr("myindex",(function(e,t){return t})).attr("feature_name",(function(e){return e[0]})),m.attr("add_title_text_and_rect_for_title_text",(function(e,t){X.w(this).selectAll(".title_rect").data([0]).join("rect").attr("class","title_rect").attr("myindex",t).attr("feature_name",e[0]).attr("width","100%").attr("height",18).attr("fill","#e2e2e2").attr("y",0).attr("x",0),X.w(this).selectAll(".title_text").data([0]).join("text").attr("class","title_text").attr("myindex",t).attr("feature_name",e[0]).attr("x",p/2).text(e[0]).attr("dominant-baseline","hanging").attr("y",2).attr("text-anchor","middle").attr("font-size",12)})),m.attr("add_cross_button",(function(e,t){X.w(this).selectAll(".cross_button").data([0]).join("text").attr("y",7.3).attr("dominant-baseline","middle").attr("myindex",t).attr("feature_name",e[0]).raise().attr("x",p-15).style("cursor","pointer").attr("font-size",14).attr("fill","black").text("\uf410").attr("class","cross_button fa make_cursor").on("click",(function(){X.g.preventDefault(),n.setState({excluded_features:[].concat(Object(Q.a)(n.state.excluded_features),[e[0]])})})),X.w(this).selectAll(".expand_button").data([0]).join("text").attr("y",7.3).attr("dominant-baseline","middle").attr("myindex",t).attr("feature_name",e[0]).raise().attr("x",p-35).style("cursor","pointer").attr("font-size",12).attr("fill","black").text("\uf31e").attr("class","expand_button fa make_cursor").on("click",(function(){var t=e[0],a=n.props.selected_year;X.g.preventDefault();var r=Object(Q.a)(n.props.dbclicked_features);r.includes(t)||(r.unshift(t),X.x(".rect").classed("exp_chart_clicked",!0)),n.props.set_dbclicked_features(r);var o={};n.props.default_models.filter((function(e){return"ListNet"!=e})).map((function(e){var t=[];t=n.props.histogram_data.length>0?n.props.lime_data[e].filter((function(e){if(parseInt(e["1-qid"])==parseInt(a)&&n.props.histogram_data.includes(parseInt(e.two_realRank)))return e})):n.props.lime_data[e].filter((function(e){return parseInt(e["1-qid"])==parseInt(a)&&i.includes(parseInt(e.two_realRank))})),o[e]=t})),n.props.Set_popup_chart_data([o,t]),n.props.set_pop_over(!0)}))})),m.attr("add_rect_for_circle_background_and_handle_clicks",(function(e,t){X.w(this).selectAll(".circ_rect").data([0]).join("rect").attr("class","circ_rect").attr("myindex",t).attr("feature_name",e[0]).attr("width","100%").attr("height",u-18).attr("fill","#f2f2f2").attr("y",18).attr("x",0).on("click",(function(){n.props.clicked_features.includes(e[0])?(n.props.Set_clicked_features(n.props.clicked_features.filter((function(t){return t!=e[0]}))),X.x("."+e[0]).selectAll(".border_rect").remove()):(n.props.Set_clicked_features([].concat(Object(Q.a)(n.props.clicked_features),[e[0]])),X.x("."+e[0]).selectAll(".border_rect").data([0]).join("rect").attr("class","border_rect").attr("width","100%").attr("height","100%").style("stroke","black").style("fill","none").style("stroke-width",5))}))})),m.attr("CreatexpCircle",(function(t,a){he(t,X.w(this),i,n.props.lime_data,n.props.selected_year,[e],n.props.clicked_circles,n.props.Set_clicked_circles,n.props.diverginColor,n.props.anim_config,p,u-15,n.props.deviation_array,a,n.props.threshold,n.props.dataset,16,"label_on",c)})).attr("height",(function(e){if(e[1]==c.length-1){var t=X.w(this.parentNode).selectAll(".ft_svg").data([0]).join("svg").attr("x",0).attr("y",_-25).attr("class","ft_svg").attr("width",p).attr("height",25);return t.append("defs").append("marker").attr("id","arrow").attr("viewBox",[0,0,8,8]).attr("refX",4).attr("refY",4).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto-start-reverse").append("path").attr("d",X.m()([[0,0],[0,7],[7,3.8]])).attr("stroke","#777777").attr("fill","#777777"),t.append("path").attr("d",X.m()([[p/2-65,15],[50,15]])).attr("stroke","#777777").attr("marker-end","url(#arrow)").attr("fill","none"),t.append("path").attr("d",X.m()([[p-50,15],[65+p/2,15]])).attr("stroke","#777777").attr("marker-start","url(#arrow)").attr("fill","none"),t.selectAll(".myText_low").data([0]).join("text").attr("x",30).attr("class","myText_low").attr("dominant-baseline","middle").attr("y",15).text("Low").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),t.selectAll(".myText").data([0]).join("text").attr("x",p/2).attr("class","myText").attr("dominant-baseline","middle").attr("y",15).text("attribute Importance").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),t.selectAll(".myText_high").data([0]).join("text").attr("x",p-30).attr("class","myText_high").attr("dominant-baseline","middle").attr("y",15).text("High").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),u-10-5}return u-10-5})).attr("width",p),m.attr("check_clicked_features",(function(e){n.props.clicked_features.includes(e[0])&&X.x("."+e[0]).selectAll(".border_rect").data([0]).join("rect").attr("class","border_rect").attr("width","100%").attr("height","100%").style("stroke","black").style("fill","none").style("stroke-width",5)}))},r.line_color=null,r.exp=n.a.createRef(),r.mds=n.a.createRef(),r.state={mds_height:10,mouseX:0,mouseY:0,excluded_features:[],sorted_features:null,circle_data:null,indexed_features:null,random:!0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({width:window.innerHeight})}},{key:"componentDidUpdate",value:function(e,t){this.Createsvg(this.props.model_name,this.props.exp_id,this.props.state_range)}},{key:"render",value:function(){return n.a.createElement("div",{className:"explanation_chart_parent exp"+this.props.model_name,style:{width:"100%",height:"100%",border:"Model"==this.props.mode?"2px solid #e2e2e2":"none",padding:"2px 5px"}},n.a.createElement("p",{className:"title_p",style:{padding:0,margin:0}},this.props.model_name),n.a.createElement("svg",{id:this.props.exp_id,style:{marginTop:this.state.mds_height,width:"100%"}}),n.a.createElement("marker",{id:"arrow",markerUnits:"strokeWidth",markerWidth:"12",markerHeight:"12",viewBox:"0 0 12 12",refX:"6",refY:"6",orient:"auto"},n.a.createElement("path",{d:"M2,2 L10,6 L2,10 L6,6 L2,2",style:{fill:"black"}})))}}]),a}(r.Component),Ve=Object(Z.b)((function(e){return{deviation_array:e.deviation_array,original_data:e.original_data,time_mode_model:e.time_mode_model,dataset:e.dataset,histogram_data:e.histogram_data,sparkline_data:e.sparkline_data,anim_config:e.anim_config,show:e.show,average_m:e.average_m,average_y:e.average_y,lime_data:e.lime_data,rank_data:e.rank_data,clicked_circles:e.clicked_circles,clicked_features:e.clicked_features,threshold:e.threshold,mode:e.mode,dbclicked_features:e.dbclicked_features,dragged_features:e.dragged_features,url:e.url}}),(function(e){return{Set_dragged_features:function(t){return e({type:"dragged_features",value:t})},Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})},Set_prev_prop:function(t){return e({type:"prev_prop",value:t})},Set_sparkline_data:function(t){return e({type:"sparkline_data",value:t})},Set_replay:function(t){return e({type:"replay",value:t})},Set_clicked_features:function(t){return e({type:"clicked_features",value:t})},Set_selected_year:function(t){return e({type:"selected_year",value:t})},set_dbclicked_features:function(t){return e({type:"dbclicked_features",value:t})},Set_popup_chart_data:function(t){return e({type:"popup_chart_data",value:t})},set_pop_over:function(t){return e({type:"pop_over",value:t})}}}))(Ye),Xe=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({a:5})}},{key:"componentDidUpdate",value:function(){var e=this.props.popup_chart_data[0],t=[[this.props.popup_chart_data[1],this.props.popup_chart_data[0]]];e.length>0&&isNaN(e[0][this.props.popup_chart_data[1]])?ke(e,this.props.popup_chart_data[1],t,this.props,this.props.deviation_array):xe(e,this.props.popup_chart_data[1],t,this.props,this.props.deviation_array),ae(0,this.props.clicked_circles,this.props.anim_config)}},{key:"render",value:function(){return n.a.createElement("div",{key:this.props.popup_chart_data[1],style:{margin:10,padding:10,border:0==this.props.index?"3px solid #e5e5e5":"white"}},n.a.createElement("p",{style:{color:"#4f4c4c",marginLeft:"42%",marginTop:0,marginBottom:5,fontWeight:600}},this.props.group),n.a.createElement("svg",{id:this.props.myid,style:{marginTop:10}}," "),n.a.createElement("p",{style:{color:"#4f4c4c",marginLeft:"42%",marginTop:-25,marginBottom:0}},this.props.popup_chart_data[1]))}}]),a}(r.Component),Pe=Object(Z.b)((function(e){return{clicked_circles:e.clicked_circles,threshold:e.threshold,anim_config:e.anim_config,deviation_array:e.deviation_array}}),(function(e){return{Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})}}}))(Xe);var Ge,$e=Object(Z.b)((function(e){return{range_mode_range1:e.range_mode_range1,range_mode_range2:e.range_mode_range2,range_mode_model:e.range_mode_model,popup_chart_data:e.popup_chart_data,pop_over:e.pop_over,dbclicked_features:e.dbclicked_features,selected_year:e.selected_year,threshold:e.threshold,original_data:e.original_data,lime_data:e.lime_data,histogram_data:e.histogram_data}}),(function(e){return{set_pop_over:function(t){return e({type:"pop_over",value:t})},set_dbclicked_features:function(t){return e({type:"dbclicked_features",value:t})},set_clicked_features:function(t){return e({type:"clicked_features",value:t})}}}))((function(e){var t=X.r(X.p([e.range_mode_range1[0],e.range_mode_range2[0]]),X.n([e.range_mode_range1[1],e.range_mode_range2[1]])+1),a=X.p(t),r=(X.n(t)-a)/8,i=(X.u().domain([a+7*r,a+6*r,a+5*r,a+4*r,a+3*r,a+2*r,a]).interpolate(X.k).range(["#af8dc3","#b197c1","#dbd88c","#dbd88c","#dbd88c","#90bc8d","#7fbf7b"]),X.r(e.range_mode_range1[0],e.range_mode_range1[1]+1)),o=[];e.original_data.filter((function(t){return e.selected_year==t["1-qid"]})).map((function(t){var a=parseInt(t.two_realRank),r=parseInt(t[e.range_mode_model]);Math.abs(r-a)<e.threshold&&o.push(a)})),i=i.filter((function(e){return o.includes(e)}));var l=e.lime_data[e.range_mode_model].filter((function(t){return parseInt(t["1-qid"])==parseInt(e.selected_year)&&i.includes(parseInt(t.two_realRank))})),s=X.r(e.range_mode_range2[0],e.range_mode_range2[1]+1);o=[],e.original_data.filter((function(t){return e.selected_year==t["1-qid"]})).map((function(t){var a=parseInt(t.two_realRank),r=parseInt(t[e.range_mode_model]);Math.abs(r-a)<e.threshold&&o.push(a)})),s=s.filter((function(e){return o.includes(e)}));var d=e.lime_data[e.range_mode_model].filter((function(t){return parseInt(t["1-qid"])==parseInt(e.selected_year)&&s.includes(parseInt(t.two_realRank))}));return n.a.createElement("div",{className:"pop_over",style:{position:"relative"}},1==e.pop_over?n.a.createElement("div",{style:{top:"2%",left:"14%",position:"fixed",pointerEvents:"none",backgroundColor:"transparent"}},n.a.createElement(Se.a,null,n.a.createElement(be.a,{style:{backgroundColor:"#ffffff",boxShadow:"3px 2px 15px -7px #000000",pointerEvents:"auto",display:"relative",zIndex:6}},n.a.createElement(be.a,{container:!0,style:{borderBottom:"1px solid #e2e2e2",marginBottom:20},direction:"row",justifyContent:"flex-end",alignItems:"center"},n.a.createElement(le.a,{color:"secondary",id:"draggable-dialog-title",onClick:function(){e.set_pop_over(!1),e.set_dbclicked_features([])}},"close")),n.a.createElement(be.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{maxHeight:700,overflow:"scroll",maxWidth:1600}},e.dbclicked_features.length>0?e.dbclicked_features.map((function(t,a){return n.a.createElement(be.a,{item:!0,container:!0,direction:"row"},n.a.createElement(Pe,{index:a,popup_chart_data:[l,t],default_models:e.default_models,group:"Group 1",myid:t.replace(/\s/g,"").replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"")+"range1",diverginColor:e.diverginColor}),n.a.createElement(Pe,{index:a,group:"Group 2",popup_chart_data:[d,t],default_models:e.default_models,myid:t.replace(/\s/g,"").replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"")+"range2",diverginColor:e.diverginColor}))})):n.a.createElement(Pe,{popup_chart_data:l,default_models:e.default_models,myid:"myid1",diverginColor:e.diverginColor,textClickHandler_original:e.textClickHandler_original}))))):null)})),Je=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).line_color=null,r.state={height_slope_exp_chart:700,mouseX:0,mouseY:0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({width:window.innerHeight})}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentDidUpdate",value:function(e,t){var a=this,r=X.r(X.p([this.props.range_mode_range1[0],this.props.range_mode_range2[0]]),X.n([this.props.range_mode_range1[1],this.props.range_mode_range2[1]])+1),n=X.p(r),i=(X.n(r)-n)/8,o=X.u().domain([n+7*i,n+6*i,n+5*i,n+4*i,n+3*i,n+2*i,n]).interpolate(X.k).range(["#af8dc3","#b197c1","#dbd88c","#dbd88c","#dbd88c","#90bc8d","#7fbf7b"]),l=X.r(this.props.range_mode_range1[0],this.props.range_mode_range1[1]+1),s=[];this.props.original_data.filter((function(e){return a.props.selected_year==e["1-qid"]})).map((function(e){var t=parseInt(e.two_realRank),r=parseInt(e[a.props.range_mode_model]);Math.abs(r-t)<a.props.threshold&&s.push(t)})),te("r1d","r1exp",l=l.filter((function(e){return s.includes(e)})),this.props.original_data,[this.props.range_mode_model],this.props.anim_config,this.props.selected_year,this.props.average_m,this.props.clicked_circles,this.props.Set_clicked_circles,o,this.props.sparkline_data,this.props.Set_selected_year,this.props.dataset,this.props.threshold);var d=X.r(this.props.range_mode_range2[0],this.props.range_mode_range2[1]+1);s=[];this.props.original_data.filter((function(e){return a.props.selected_year==e["1-qid"]})).map((function(e){var t=parseInt(e.two_realRank),r=parseInt(e[a.props.range_mode_model]);Math.abs(r-t)<a.props.threshold&&s.push(t)})),te("r2d","r2exp",d=d.filter((function(e){return s.includes(e)})),this.props.original_data,[this.props.range_mode_model],this.props.anim_config,this.props.selected_year,this.props.average_m,this.props.clicked_circles,this.props.Set_clicked_circles,o,this.props.sparkline_data,this.props.Set_selected_year,this.props.dataset,this.props.threshold),ae(0,this.props.clicked_circles,this.props.anim_config)}},{key:"render",value:function(){var e,t=this,a=X.r(X.p([this.props.range_mode_range1[0],this.props.range_mode_range2[0]]),X.n([this.props.range_mode_range1[1],this.props.range_mode_range2[1]])+1),r=X.p(a),i=(X.n(a)-r)/8,o=X.u().domain([r+7*i,r+6*i,r+5*i,r+4*i,r+3*i,r+2*i,r]).interpolate(X.k).range(["#af8dc3","#b197c1","#dbd88c","#dbd88c","#dbd88c","#90bc8d","#7fbf7b"]);this.props.Set_selected_instances(a);var l=[];return this.props.lime_data[this.props.range_mode_model].map((function(e){e["1-qid"]==t.props.selected_year&&a.includes(parseInt(e.two_realRank))&&l.push(e.deviation)})),this.props.Set_deviation_array(l),n.a.createElement(Oe.a,(e={key:this.props.mode,className:"RangeChartParent",container:!0,direction:"row",justifyContent:"space-between"},Object(J.a)(e,"className","slope_chart_exp"),Object(J.a)(e,"style",{width:"100%",height:"100%",backgroundColor:"white",padding:"0px 0px",overflow:"hidden"}),e),n.a.createElement("div",{className:"year_and_model_selector_and_slider_container",style:{width:"100%"}}," ",n.a.createElement(Ue,null)),n.a.createElement(Oe.a,{className:"Group1_container",style:{height:"100%",width:"49.4%",paddingRight:0,border:"2px solid #eaeaea",overflow:"hidden"},container:!0,item:!0,direction:"column",justifyContent:"space-between"},n.a.createElement("p",{className:"title_p1",style:{margin:0,paddingLeft:"45%",backgroundColor:"rgb(232, 232, 232,0.4)",fontWeight:"bolder",borderBottom:"1px solid #cecece"}},"Group 1"),n.a.createElement(Oe.a,{className:"slidergroup1",item:!0,style:{backgroundColor:"rgb(232, 232, 232,0.4)"}},n.a.createElement(Fe,null)),n.a.createElement(Oe.a,{className:"dev_plot_and_exp_container",style:{width:"100%",height:K(".Group1_container").height()-(K(".title_p1").height()+K(".slidergroup1").height()+K(".year_and_model_selector_and_slider_container").height()+5)},container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement(Oe.a,{className:"deviation_plot_container_div",item:!0,style:{width:"49%",height:K(".Group1_container").height()-(K(".title_p1").height()+K(".slidergroup1").height()+K(".year_and_model_selector_and_slider_container").height()+5),overflow:"scroll",borderRight:"1px solid #dbdbdb"}},n.a.createElement("svg",{id:"r1d",style:{width:"100%",padding:5}})),null!=this.props.rank_data?n.a.createElement(Oe.a,{className:"explanation_plot_container",item:!0,style:{width:"49%",height:"100%"}},n.a.createElement(Ve,{diverginColor:o,exp_data:[["r1exp",this.props.range_mode_range1],["r2exp",this.props.range_mode_range2]],exp_id:"r1exp",state_range:this.props.range_mode_range1,selected_year:this.props.selected_year,model_name:this.props.range_mode_model,default_models:[this.props.range_mode_model]})):null)),n.a.createElement(Oe.a,{className:"Group2_container",style:{height:"100%",width:"49.4%",marginLeft:"0.5%",paddingRight:0,border:"2px solid #eaeaea",overflow:"hidden"},container:!0,item:!0,direction:"column",justifyContent:"space-between"},n.a.createElement("p",{className:"title_p2",style:{margin:0,paddingLeft:"45%",backgroundColor:"rgb(232, 232, 232,0.4)",fontWeight:"bolder",borderBottom:"1px solid #cecece"}},"Group 2"),n.a.createElement(Oe.a,{className:"slidergroup2",item:!0,style:{backgroundColor:"rgb(232, 232, 232,0.4)"}},n.a.createElement(qe,null)),n.a.createElement(Oe.a,{className:"dev_plot_and_exp_container",style:{width:"100%",height:K(".Group2_container").height()-(K(".title_p2").height()+K(".slidergroup2").height()+K(".year_and_model_selector_and_slider_container").height()+5)},container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement(Oe.a,{className:"deviation_plot_container_div",item:!0,style:{width:"49%",height:K(".Group1_container").height()-(K(".title_p2").height()+K(".slidergroup2").height()+K(".year_and_model_selector_and_slider_container").height()+5),overflow:"scroll",borderRight:"1px solid #dbdbdb"}},n.a.createElement("svg",{id:"r2d",style:{width:"100%",padding:5}})),null!=this.props.rank_data?n.a.createElement(Oe.a,{className:"explanation_plot_container",item:!0,style:{width:"49%",height:"100%"}},n.a.createElement(Ve,{diverginColor:o,exp_data:[["r1exp",this.props.range_mode_range1],["r2exp",this.props.range_mode_range2]],exp_id:"r2exp",state_range:this.props.range_mode_range2,selected_year:this.props.selected_year,model_name:this.props.range_mode_model,default_models:[this.props.range_mode_model]})):null)),n.a.createElement($e,{diverginColor:o,default_models:[this.props.range_mode_model]}))}}]),a}(r.Component),Ze=Object(Z.b)((function(e){var t;return t={mode:e.mode,range_mode_range1:e.range_mode_range1,range_mode_range2:e.range_mode_range2,range_mode_model:e.range_mode_model,lime_data:e.lime_data,selected_year:e.selected_year,original_data:e.original_data,dataset:e.dataset,sparkline_data:e.sparkline_data},Object(J.a)(t,"dataset",e.dataset),Object(J.a)(t,"anim_config",e.anim_config),Object(J.a)(t,"average_m",e.average_m),Object(J.a)(t,"rank_data",e.rank_data),Object(J.a)(t,"clicked_circles",e.clicked_circles),Object(J.a)(t,"threshold",e.threshold),Object(J.a)(t,"histogram_data",e.histogram_data),t}),(function(e){return{Set_selected_instances:function(t){return e({type:"selected_instances",value:t})},Set_deviation_array:function(t){return e({type:"deviation_array",value:t})},Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})},Set_selected_year:function(t){return e({type:"selected_year",value:t})}}}))(Je),Qe=(a(257),a(341)),Ke=a(171);Object(Ke.a)({palette:{primary:{main:"#0069d9"},secondary:{main:"#0069d9"}}}),Object(Ke.a)({overrides:(Ge={MuiAutocomplete:{root:{}},MuiFilledInput:{root:{backgroundColor:"none"}},MuiInputLabel:{root:{}},MuiTextField:{root:{}},MuiButton:{root:{textTransform:"none",padding:"15px"},fullWidth:{maxWidth:"100%"}}},Object(J.a)(Ge,"MuiFilledInput",{root:{padding:0,backgroundColor:"yellow"}}),Object(J.a)(Ge,"MuiAutocomplete",{Root:{padding:0}}),Ge),props:{MuiButton:{disableRipple:!0,variant:"contained",color:"primary"},MuiCheckbox:{disableRipple:!0},MuiTextField:{variant:"filled",InputLabelProps:{shrink:!0}},MuiPaper:{elevation:12},MuiCard:{elevation:2}}});var et=Object(Z.b)((function(e){return{time_mode_year1:e.time_mode_year1,years_for_dropdown:e.years_for_dropdown,dataset:e.dataset}}),(function(e){return{Set_time_mode_year1:function(t){return e({type:"time_mode_year1",value:t})}}}))((function(e){return n.a.createElement("div",{className:"year_drop_down_container1"},n.a.createElement("p",{style:{margin:0,marginTop:3,fontSize:16,fontWeight:600}},"airbnb"===e.dataset?"Borough 1 :":"Year 1 :"),n.a.createElement(Qe.a,{style:{width:"airbnb"===e.dataset?160:100},disableClearable:!0,defaultValue:e.time_mode_year1.toString(),id:"debug",debug:!0,options:e.years_for_dropdown.map((function(e){return e})),renderInput:function(e){return n.a.createElement(oe.a,Object.assign({},e,{margin:"normal",fullWidth:!0,InputProps:Object(pe.a)({},e.InputProps,{disableUnderline:!0})}))},onChange:function(t,a){e.Set_time_mode_year1(a)}}))}));var tt=Object(Z.b)((function(e){return{time_mode_year2:e.time_mode_year2,years_for_dropdown:e.years_for_dropdown,dataset:e.dataset}}),(function(e){return{Set_time_mode_year2:function(t){return e({type:"time_mode_year2",value:t})}}}))((function(e){return n.a.createElement("div",{className:"year_drop_down_container1"},n.a.createElement("p",{style:{margin:0,marginTop:3,fontSize:16,fontWeight:600}},"airbnb"===e.dataset?"Borough 2 :":"Year 2 :"),n.a.createElement(Qe.a,{style:{width:"airbnb"===e.dataset?160:100},disableClearable:!0,defaultValue:e.time_mode_year2.toString(),id:"debug",debug:!0,options:e.years_for_dropdown.map((function(e){return e})),renderInput:function(e){return n.a.createElement(oe.a,Object.assign({},e,{margin:"normal",fullWidth:!0,InputProps:Object(pe.a)({},e.InputProps,{disableUnderline:!0})}))},onChange:function(t,a){e.Set_time_mode_year2(a)}}))})),at=(a(258),a(259),Object(ie.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},tRoot:{marginBottom:35},rang_input:{marginLeft:10}}})));var rt=Object(Z.b)((function(e){return{slider_max:e.slider_max,time_mode_range:e.time_mode_range}}),(function(e){return{Set_time_mode_range:function(t){return e({type:"time_mode_range",value:t})},Set_changed:function(t){return e({type:"changed",value:t})}}}))((function(e){for(var t,a=at(),r=n.a.useState(e.time_mode_range),i=Object(re.a)(r,2),o=i[0],l=i[1],s=[],d=(e.slider_max-1)/5,c=0;c<6;c++)s.push(1+d*c);var _=s.map((function(e){var t=parseInt(e);return{value:t,label:t}}));return n.a.createElement("div",{className:"YearSlider",style:{height:70,width:"100%",padding:30}},n.a.createElement("div",{className:"lower",style:{padding:"0px 0px",marginTop:-20}},n.a.createElement(oe.a,{classes:{input:a.rang_input},id:"standard-basic",label:"Lower",value:o[0],style:{width:"100%"},onChange:function(e){isNaN(parseInt(e.target.value))?l(["",o[1]]):l([e.target.value,o[1]])}})),n.a.createElement("div",{className:"slider",style:{width:"100%",margin:"0px 0px"}},n.a.createElement(ne.a,(t={value:o,onChange:function(e,t){return l(t)},onChangeCommitted:function(t,a){return e.Set_changed("range")},valueLabelDisplay:"auto","aria-labelledby":"range-slider"},Object(J.a)(t,"valueLabelDisplay","on"),Object(J.a)(t,"min",1),Object(J.a)(t,"max",e.slider_max),Object(J.a)(t,"marks",_),t))),n.a.createElement("div",{className:"upper",style:{padding:"0px 0px",marginTop:-20}},n.a.createElement(oe.a,{classes:{input:a.rang_input},id:"standard-basic",label:"Upper",value:o[1],style:{width:"100%"},onChange:function(t){isNaN(parseInt(t.target.value))?l([o[0],""]):parseInt(t.target.value)>e.slider_max?l([o[0],e.slider_max]):l([o[0],parseInt(t.target.value)])}})),n.a.createElement("div",{className:"button",item:!0,style:{marginTop:-10}},n.a.createElement(le.a,{className:"range_button",style:{backgroundColor:"#ededed",height:30,fontWeight:600,fontSize:18},onClick:function(){console.log(o[0],"-----",o[1],"cons"),o[0]>o[1]?alert("Lower range can not be larger than the upper range"):o[1]<o[0]?alert("upper range can not be smaller than the lower range"):e.Set_time_mode_range(o)}},"Update range")))}));var nt=Object(Z.b)((function(e){return{all_models:e.all_models,selected_year:e.selected_year,years_for_dropdown:e.years_for_dropdown,default_models:e.default_models,time_mode_model:e.time_mode_model,dataset:e.dataset}}),(function(e){return{Set_selected_year:function(t){return e({type:"selected_year",value:t})},Set_time_mode_model:function(t){return e({type:"time_mode_model",value:t})}}}))((function(e){if("rur"==e.dataset)var t=["MART","RandomFor"];else var t=e.all_models;return"ice"===e.exp_method?(t=(t=e.all_models).filter((function(e){return"RandomFor"!==e}))).includes("SVM")||t.push("SVM"):t=e.all_models,n.a.createElement(Oe.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",style:{width:"100%",height:76,padding:3}},n.a.createElement(Oe.a,{item:!0,xs:4,style:{marginTop:5,marginLeft:5,verticalAlign:"baseline"}},n.a.createElement("h5",{style:{display:"inline-block",marginRight:5,marginTop:-4,fontSize:20,fontWeight:600}},"Rankers:"),t.map((function(t){return n.a.createElement("p",{className:e.time_mode_model==t?"years_p_selected years_p":"years_p",onClick:function(){return a=t,e.Set_time_mode_model(a);var a}},t)}))),n.a.createElement(Oe.a,{item:!0,xs:6,style:{marginLeft:15,overflow:"scroll"}},n.a.createElement(rt,null)))})),it=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).Createsvg=function(e,t,a,n){var i=Object(d.a)(r),o=X.r(a[0],a[1]+1);r.props.histogram_data.length>0&&(o=r.props.histogram_data);var l=[],s=r.props.original_data.filter((function(e){return r.props.selected_year==e["1-qid"]}));r.props.default_models.map((function(e){s.map((function(t){var a=parseInt(t.two_realRank),n=parseInt(t[e]);Math.abs(n-a)>r.props.threshold&&l.push(a)}))})),o=o.filter((function(e){return!l.includes(e)}));var c=8+i.state.excluded_features.length,_=$(r.props.lime_data[e],o,r.props.selected_year).filter((function(e){return!r.state.excluded_features.includes(e)})).slice(0,c).map((function(e,t){return[e,t]})),p=parseInt(K(".explanation_chart_parent").height())-r.state.mds_height-parseInt(K(".title_p").height()),u=parseInt(K("#"+r.props.exp_id).width()),m=(p-10)/_.length-5,f=X.w("#"+r.props.exp_id).attr("height",p).selectAll(".feature_items").data(_,(function(e){return e[0]})).join((function(e){return e.append("svg").attr("y",(function(e,t){return 5+t*(m+5)}))}),(function(e){return e.transition().duration(2e3).attr("y",(function(e,t){return 5+t*(m+5)}))}),(function(e){return e.remove()}));f.attr("class",(function(e){return"feature_items "+e[0]})).attr("myindex",(function(e,t){return t})).attr("feature_name",(function(e){return e[0]})),f.attr("add_title_text_and_rect_for_title_text",(function(e,t){X.w(this).selectAll(".title_rect").data([0]).join("rect").attr("class","title_rect").attr("myindex",t).attr("feature_name",e[0]).attr("width","100%").attr("height",18).attr("fill","#e2e2e2").attr("y",0).attr("x",0),X.w(this).selectAll(".title_text").data([0]).join("text").attr("class","title_text").attr("myindex",t).attr("feature_name",e[0]).attr("x",u/2).text(e[0]).attr("dominant-baseline","hanging").attr("y",2).attr("text-anchor","middle").attr("font-size",12)})),f.attr("add_cross_button",(function(e,t){X.w(this).selectAll(".cross_button").data([0]).join("text").attr("y",7.3).attr("dominant-baseline","middle").attr("myindex",t).attr("feature_name",e[0]).raise().attr("x",u-15).style("cursor","pointer").attr("font-size",14).attr("fill","black").text("\uf410").attr("class","cross_button fa make_cursor").on("click",(function(){X.g.preventDefault(),i.setState({excluded_features:[].concat(Object(Q.a)(i.state.excluded_features),[e[0]])})})),X.w(this).selectAll(".expand_button").data([0]).join("text").attr("y",7.3).attr("dominant-baseline","middle").attr("myindex",t).attr("feature_name",e[0]).raise().attr("x",u-35).style("cursor","pointer").attr("font-size",12).attr("fill","black").text("\uf31e").attr("class","expand_button fa make_cursor").on("click",(function(){var t=e[0],a=n;X.g.preventDefault();var r=Object(Q.a)(i.props.dbclicked_features);r.includes(t)||(r.unshift(t),X.x(".rect").classed("exp_chart_clicked",!0)),i.props.set_dbclicked_features(r);var l={};i.props.default_models.filter((function(e){return"ListNet"!=e})).map((function(e){var t=[];t=i.props.histogram_data.length>0?i.props.lime_data[e].filter((function(e){if(parseInt(e["1-qid"])==parseInt(a)&&i.props.histogram_data.includes(parseInt(e.two_realRank)))return e})):i.props.lime_data[e].filter((function(e){return parseInt(e["1-qid"])==parseInt(a)&&o.includes(parseInt(e.two_realRank))})),l[e]=t})),i.props.Set_popup_chart_data([l,t]),i.props.set_pop_over(!0)}))})),f.attr("add_rect_for_circle_background_and_handle_clicks",(function(e,t){X.w(this).selectAll(".circ_rect").data([0]).join("rect").attr("class","circ_rect").attr("myindex",t).attr("feature_name",e[0]).attr("width","100%").attr("height",m-18).attr("fill","#f2f2f2").attr("y",18).attr("x",0).on("click",(function(){i.props.clicked_features.includes(e[0])?(i.props.Set_clicked_features(i.props.clicked_features.filter((function(t){return t!=e[0]}))),X.x("."+e[0]).selectAll(".border_rect").remove()):(i.props.Set_clicked_features([].concat(Object(Q.a)(i.props.clicked_features),[e[0]])),X.x("."+e[0]).selectAll(".border_rect").data([0]).join("rect").attr("class","border_rect").attr("width","100%").attr("height","100%").style("stroke","black").style("fill","none").style("stroke-width",5))}))})),f.attr("CreatexpCircle",(function(t,a){he(t,X.w(this),o,i.props.lime_data,n,[e],i.props.clicked_circles,i.props.Set_clicked_circles,i.props.diverginColor,i.props.anim_config,u,m-15,i.props.deviation_array,a,i.props.threshold,i.props.dataset,16,"label_on",_)})).attr("height",(function(e){if(e[1]==_.length-1){var t=X.w(this.parentNode).selectAll(".ft_svg").data([0]).join("svg").attr("x",0).attr("y",p-25).attr("class","ft_svg").attr("width",u).attr("height",25);return t.append("defs").append("marker").attr("id","arrow").attr("viewBox",[0,0,8,8]).attr("refX",4).attr("refY",4).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto-start-reverse").append("path").attr("d",X.m()([[0,0],[0,7],[7,3.8]])).attr("stroke","#777777").attr("fill","#777777"),t.append("path").attr("d",X.m()([[u/2-65,15],[50,15]])).attr("stroke","#777777").attr("marker-end","url(#arrow)").attr("fill","none"),t.append("path").attr("d",X.m()([[u-50,15],[65+u/2,15]])).attr("stroke","#777777").attr("marker-start","url(#arrow)").attr("fill","none"),t.selectAll(".myText_low").data([0]).join("text").attr("x",30).attr("class","myText_low").attr("dominant-baseline","middle").attr("y",15).text("Low").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),t.selectAll(".myText").data([0]).join("text").attr("x",u/2).attr("class","myText").attr("dominant-baseline","middle").attr("y",15).text("attribute Importance").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),t.selectAll(".myText_high").data([0]).join("text").attr("x",u-30).attr("class","myText_high").attr("dominant-baseline","middle").attr("y",15).text("High").attr("text-anchor","middle").attr("font-size",12).attr("fill","#2b2828"),m-10-5}return m-10-5})).attr("width",u),f.attr("check_clicked_features",(function(e){i.props.clicked_features.includes(e[0])&&X.x("."+e[0]).selectAll(".border_rect").data([0]).join("rect").attr("class","border_rect").attr("width","100%").attr("height","100%").style("stroke","black").style("fill","none").style("stroke-width",5)}))},r.mds=n.a.createRef(),r.state={mds_height:10,mouseX:0,mouseY:0,excluded_features:[],sorted_features:null,circle_data:null,indexed_features:null,random:!0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({width:window.innerHeight})}},{key:"componentDidUpdate",value:function(e,t){this.Createsvg(this.props.model_name,this.props.exp_id,this.props.state_range,this.props.selected_year)}},{key:"render",value:function(){return n.a.createElement("div",{className:"explanation_chart_parent exp"+this.props.model_name,style:{width:"100%",height:"100%",border:"Model"==this.props.mode?"2px solid #e2e2e2":"none",padding:"2px 5px"}},n.a.createElement("p",{className:"title_p",style:{padding:0,margin:0}},this.props.model_name),n.a.createElement("svg",{id:this.props.exp_id,style:{marginTop:this.state.mds_height,width:"100%"}}),n.a.createElement("marker",{id:"arrow",markerUnits:"strokeWidth",markerWidth:"12",markerHeight:"12",viewBox:"0 0 12 12",refX:"6",refY:"6",orient:"auto"},n.a.createElement("path",{d:"M2,2 L10,6 L2,10 L6,6 L2,2",style:{fill:"black"}})))}}]),a}(r.Component),ot=Object(Z.b)((function(e){return{deviation_array:e.deviation_array,original_data:e.original_data,time_mode_model:e.time_mode_model,chart_scale_type:e.chart_scale_type,dataset:e.dataset,histogram_data:e.histogram_data,sparkline_data:e.sparkline_data,anim_config:e.anim_config,show:e.show,average_m:e.average_m,average_y:e.average_y,lime_data:e.lime_data,rank_data:e.rank_data,clicked_circles:e.clicked_circles,clicked_features:e.clicked_features,threshold:e.threshold,mode:e.mode,dbclicked_features:e.dbclicked_features,dragged_features:e.dragged_features,url:e.url}}),(function(e){return{Set_dragged_features:function(t){return e({type:"dragged_features",value:t})},Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})},Set_prev_prop:function(t){return e({type:"prev_prop",value:t})},Set_sparkline_data:function(t){return e({type:"sparkline_data",value:t})},Set_replay:function(t){return e({type:"replay",value:t})},Set_clicked_features:function(t){return e({type:"clicked_features",value:t})},Set_selected_year:function(t){return e({type:"selected_year",value:t})},set_dbclicked_features:function(t){return e({type:"dbclicked_features",value:t})},Set_popup_chart_data:function(t){return e({type:"popup_chart_data",value:t})},set_pop_over:function(t){return e({type:"pop_over",value:t})},Set_deviation_array:function(t){return e({type:"deviation_array",value:t})}}}))(it),lt=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({a:5})}},{key:"componentDidUpdate",value:function(){var e=this.props.popup_chart_data[0],t=[[this.props.popup_chart_data[1],this.props.popup_chart_data[0]]];e.length>0&&isNaN(e[0][this.props.popup_chart_data[1]])?ke(e,this.props.popup_chart_data[1],t,this.props,this.props.deviation_array):xe(e,this.props.popup_chart_data[1],t,this.props,this.props.deviation_array),ae(0,this.props.clicked_circles,this.props.anim_config)}},{key:"render",value:function(){return n.a.createElement("div",{key:this.props.popup_chart_data[1],style:{margin:10,padding:10,border:0==this.props.index?"3px solid #e5e5e5":"white"}},n.a.createElement("p",{style:{color:"#4f4c4c",marginLeft:"42%",marginTop:0,marginBottom:5,fontWeight:600}},this.props.group),n.a.createElement("svg",{id:this.props.myid}," "),n.a.createElement("p",{style:{color:"#4f4c4c",marginLeft:"42%",marginTop:-25,marginBottom:0}},this.props.popup_chart_data[1]))}}]),a}(r.Component),st=Object(Z.b)((function(e){return{clicked_circles:e.clicked_circles,threshold:e.threshold,anim_config:e.anim_config,deviation_array:e.deviation_array}}),(function(e){return{Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})}}}))(lt);var dt=Object(Z.b)((function(e){return{time_mode_year1:e.time_mode_year1,time_mode_year2:e.time_mode_year2,time_mode_model:e.time_mode_model,time_mode_range:e.time_mode_range,popup_chart_data:e.popup_chart_data,pop_over:e.pop_over,dbclicked_features:e.dbclicked_features,selected_year:e.selected_year,threshold:e.threshold,original_data:e.original_data,lime_data:e.lime_data,histogram_data:e.histogram_data}}),(function(e){return{set_pop_over:function(t){return e({type:"pop_over",value:t})},set_dbclicked_features:function(t){return e({type:"dbclicked_features",value:t})},set_clicked_features:function(t){return e({type:"clicked_features",value:t})}}}))((function(e){var t=X.r(e.time_mode_range[0],e.time_mode_range[1]+1),a=X.p(t),r=(X.n(t)-a)/8,i=(X.u().domain([a+7*r,a+6*r,a+5*r,a+4*r,a+3*r,a+2*r,a]).interpolate(X.k).range(["#af8dc3","#b197c1","#dbd88c","#dbd88c","#dbd88c","#90bc8d","#7fbf7b"]),[]);e.original_data.filter((function(t){return e.time_mode_year1==t["1-qid"]})).map((function(t){var a=parseInt(t.two_realRank),r=parseInt(t[e.time_mode_model]);Math.abs(r-a)<e.threshold&&i.push(a)}));var o=t.filter((function(e){return i.includes(e)})),l=e.lime_data[e.time_mode_model].filter((function(t){return parseInt(t["1-qid"])==parseInt(e.time_mode_year1)&&o.includes(parseInt(t.two_realRank))}));i=[],e.original_data.filter((function(t){return e.time_mode_year2==t["1-qid"]})).map((function(t){var a=parseInt(t.two_realRank),r=parseInt(t[e.time_mode_model]);Math.abs(r-a)<e.threshold&&i.push(a)}));var s=t.filter((function(e){return i.includes(e)})),d=e.lime_data[e.time_mode_model].filter((function(t){return parseInt(t["1-qid"])==parseInt(e.time_mode_year2)&&s.includes(parseInt(t.two_realRank))}));return n.a.createElement("div",{className:"pop_over",style:{position:"relative"}},1==e.pop_over?n.a.createElement("div",{style:{top:"2%",left:"14%",position:"fixed",pointerEvents:"none",backgroundColor:"transparent"}},n.a.createElement(Se.a,null,n.a.createElement(be.a,{style:{backgroundColor:"#ffffff",boxShadow:"3px 2px 15px -7px #000000",pointerEvents:"auto",display:"relative",zIndex:6}},n.a.createElement(be.a,{container:!0,style:{borderBottom:"1px solid #e2e2e2",marginBottom:20},direction:"row",justifyContent:"flex-end",alignItems:"center"},n.a.createElement(le.a,{color:"secondary",id:"draggable-dialog-title",onClick:function(){e.set_pop_over(!1),e.set_dbclicked_features([])}},"close")),n.a.createElement(be.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{maxHeight:700,overflow:"scroll",maxWidth:1600}},e.dbclicked_features.length>0?e.dbclicked_features.map((function(t,a){return n.a.createElement(be.a,{item:!0,container:!0,direction:"row"},n.a.createElement(st,{index:a,group:"Year 1 : "+e.time_mode_year1,popup_chart_data:[l,t],default_models:e.default_models,myid:t.replace(/\s/g,"").replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"")+"range1",diverginColor:e.diverginColor}),n.a.createElement(st,{index:a,group:"Year 2 : "+e.time_mode_year2,popup_chart_data:[d,t],default_models:e.default_models,myid:t.replace(/\s/g,"").replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"")+"range2",diverginColor:e.diverginColor}))})):n.a.createElement(st,{popup_chart_data:l,default_models:e.default_models,myid:"myid1",diverginColor:e.diverginColor,textClickHandler_original:e.textClickHandler_original}))))):null)})),ct=a(348),_t=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).line_color=null,r.state={height_slope_exp_chart:700,mouseX:0,mouseY:0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({width:window.innerHeight})}},{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentDidUpdate",value:function(e,t){var a=this,r=X.r(this.props.time_mode_range[0],this.props.time_mode_range[1]+1),n=X.p(r),i=(X.n(r)-n)/8,o=X.u().domain([n+7*i,n+6*i,n+5*i,n+4*i,n+3*i,n+2*i,n]).interpolate(X.k).range(["#af8dc3","#b197c1","#dbd88c","#dbd88c","#dbd88c","#90bc8d","#7fbf7b"]),l=[];this.props.original_data.filter((function(e){return a.props.time_mode_year1==e["1-qid"]})).map((function(e){var t=parseInt(e.two_realRank),r=parseInt(e[a.props.time_mode_model]);Math.abs(r-t)<a.props.threshold&&l.push(t)})),te("r1d","r1exp",r.filter((function(e){return l.includes(e)})),this.props.original_data,[this.props.time_mode_model],this.props.anim_config,this.props.time_mode_year1,this.props.average_m,this.props.clicked_circles,this.props.Set_clicked_circles,o,this.props.sparkline_data,this.props.Set_time_mode_year1,this.props.dataset,this.props.threshold);l=[];this.props.original_data.filter((function(e){return a.props.time_mode_year2==e["1-qid"]})).map((function(e){var t=parseInt(e.two_realRank),r=parseInt(e[a.props.time_mode_model]);Math.abs(r-t)<a.props.threshold&&l.push(t)})),te("r2d","r2exp",r.filter((function(e){return l.includes(e)})),this.props.original_data,[this.props.time_mode_model],this.props.anim_config,this.props.time_mode_year2,this.props.average_m,this.props.clicked_circles,this.props.Set_clicked_circles,o,this.props.sparkline_data,this.props.Set_time_mode_year2,this.props.dataset,this.props.threshold),ae(0,this.props.clicked_circles,this.props.anim_config)}},{key:"render",value:function(){var e=this,t=X.r(this.props.time_mode_range[0],this.props.time_mode_range[1]+1),a=[];this.props.lime_data[this.props.time_mode_model].map((function(r){r["1-qid"]!=e.props.time_mode_year1&&r["1-qid"]!=e.props.time_mode_year2||!t.includes(parseInt(r.two_realRank))||a.push(r.deviation)})),console.log(a,"deviation_array"),this.props.Set_deviation_array(a);var r=X.p(t),i=(X.n(t)-r)/8,o=X.u().domain([r+7*i,r+6*i,r+5*i,r+4*i,r+3*i,r+2*i,r]).interpolate(X.k).range(["#af8dc3","#b197c1","#dbd88c","#dbd88c","#dbd88c","#90bc8d","#7fbf7b"]);return this.props.Set_selected_instances(t),n.a.createElement(ct.a,{className:"box_root",sx:{width:"100%",height:"100%",padding:.5}},n.a.createElement(be.a,{container:!0,justifyContent:"space-between"},n.a.createElement(be.a,{item:!0,xs:12},n.a.createElement("div",{className:"year_and_model_selector_and_slider_container",style:{width:"100%"}},n.a.createElement(nt,null))),n.a.createElement(be.a,{item:!0,xs:5.9,className:"Group1_container",style:{borderTop:"2px solid #eaeaea",borderLeft:"2px solid #eaeaea",borderRight:"2px solid #eaeaea"}},n.a.createElement(be.a,{container:!0},n.a.createElement(be.a,{item:!0,xs:12,style:{padding:0}},n.a.createElement("div",{className:"slidergroup1",style:{width:"100%",height:30}},n.a.createElement(et,null))),n.a.createElement(be.a,{className:"dev_plot_and_exp_container",item:!0,xs:6},n.a.createElement("div",{className:"deviation_plot_container_div",style:{width:"100%",height:K(".box_root").height()-(K(".year_and_model_selector_and_slider_container").height()+K(".slidergroup1").height()),overflow:"scroll"}},n.a.createElement("svg",{id:"r1d",style:{width:"100%"}}))),n.a.createElement(be.a,{item:!0,xs:6},null!=this.props.rank_data?n.a.createElement("div",{className:"explanation_plot_container",style:{width:"100%",height:"100%"}},n.a.createElement(ot,{exp_data:[["r1exp",this.props.time_mode_year1],["r2exp",this.props.time_mode_year2]],diverginColor:o,exp_id:"r1exp",default_models:[this.props.time_mode_model],state_range:this.props.time_mode_range,selected_year:this.props.time_mode_year1,model_name:this.props.time_mode_model})):null))),n.a.createElement(be.a,{item:!0,xs:5.9,style:{borderTop:"2px solid #eaeaea",borderLeft:"2px solid #eaeaea",borderRight:"2px solid #eaeaea"}},n.a.createElement(be.a,{container:!0},n.a.createElement(be.a,{item:!0,xs:12,style:{padding:0}},n.a.createElement("div",{className:"slidergroup2",style:{width:"100%",height:30}},n.a.createElement(tt,null))),n.a.createElement(be.a,{item:!0,xs:6},n.a.createElement("div",{className:"deviation_plot_container_div",style:{width:"100%",height:K(".box_root").height()-(K(".year_and_model_selector_and_slider_container").height()+K(".slidergroup2").height()),overflow:"scroll"}},n.a.createElement("svg",{id:"r2d",style:{width:"100%"}}))),n.a.createElement(be.a,{item:!0,xs:6},null!=this.props.rank_data?n.a.createElement("div",{className:"explanation_plot_container",style:{width:"100%",height:500}},n.a.createElement(ot,{exp_data:[["r1exp",this.props.time_mode_year1],["r2exp",this.props.time_mode_year2]],diverginColor:o,exp_id:"r2exp",default_models:[this.props.time_mode_model],state_range:this.props.time_mode_range,selected_year:this.props.time_mode_year2,model_name:this.props.time_mode_model})):null)))),n.a.createElement(dt,{diverginColor:o,default_models:[this.props.time_mode_model]}))}}]),a}(r.Component),pt=Object(Z.b)((function(e){var t;return t={time_mode_year1:e.time_mode_year1,time_mode_year2:e.time_mode_year2,mode:e.mode,time_mode_range:e.time_mode_range,time_mode_model:e.time_mode_model,default_models:e.default_models,original_data:e.original_data,dataset:e.dataset,sparkline_data:e.sparkline_data},Object(J.a)(t,"dataset",e.dataset),Object(J.a)(t,"anim_config",e.anim_config),Object(J.a)(t,"average_m",e.average_m),Object(J.a)(t,"rank_data",e.rank_data),Object(J.a)(t,"clicked_circles",e.clicked_circles),Object(J.a)(t,"threshold",e.threshold),Object(J.a)(t,"histogram_data",e.histogram_data),Object(J.a)(t,"lime_data",e.lime_data),t}),(function(e){return{Set_selected_instances:function(t){return e({type:"selected_instances",value:t})},Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})},Set_time_mode_year1:function(t){return e({type:"time_mode_year1",value:t})},Set_time_mode_year2:function(t){return e({type:"time_mode_year2",value:t})},Set_deviation_array:function(t){return e({type:"deviation_array",value:t})}}}))(_t),ut=a(347),mt=a(336),ft=a(323),ht=a(342),gt=a(349),yt=a(324),vt=a(131),bt=a.n(vt),kt=a(132),xt=a.n(kt),wt=a(170),jt=a.n(wt),Et=a(133),St=a.n(Et);var Ot=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).store_instances=function(e,t){var a=Object(pe.a)({},r.state.all_instances);a[e]=t,r.setState({all_instances:a})},r.state={feature_data:[]},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;"fiscal"==this.props.dataset?e=bt.a:"school"==this.props.dataset?e=xt.a:"house"==this.props.dataset?e=jt.a:"rur"==this.props.dataset&&(e=St.a),X.e(e).then((function(e){t.setState({feature_data:e,all_instances:{}})}))}},{key:"shouldComponentUpdate",value:function(e,t){return"undefined"==typeof this.state.all_instances||JSON.stringify(t.all_instances)===JSON.stringify(this.state.all_instances)}},{key:"componentDidUpdate",value:function(){var e=this,t=this,a=X.r(this.props.state_range[0],this.props.state_range[1]+1),r=this.props.rank_data[this.props.default_models[0]].filter((function(t){if(parseInt(t["1-qid"])==parseInt(e.props.selected_year))return t})),n=a.map((function(e){return r[e]})),i=Object.keys(n[0]).filter((function(e){return e.includes("_feature_rank")})).map((function(e){return e.replace("_feature_rank","")})).sort((function(e,t){return e.localeCompare(t)}));console.log(i,"dddd"),"fiscal"==this.props.dataset?bt.a:"school"==this.props.dataset?xt.a:"rur"==this.props.dataset&&St.a,X.w(".feature_histograms_container").selectAll(".feature").data(i,(function(e){return e})).join("svg").attr("class","feature").attr("add_histogram",(function(e,a){var r=[];isNaN(t.state.feature_data[0][e])?(t.state.feature_data.forEach((function(a){if(a["1-qid"]==t.props.selected_year){var n={};n.x=parseInt(a.two_realRank),n.y=a[e],r.push(n)}})),function(e,t,a,r,n,i,o){console.log(a,e,"feature_name");var l=K(".feature_histograms_container").width(),s=(K(".feature_histograms_container").height(),K(".feature_histograms_container").width()),d=10,c=40;X.w(".feature_histograms_container").attr("height",120*n+20),t.attr("y",120*r).attr("width",l).attr("height",120);var _={};e.map((function(e){e.y in _?_[e.y]=_[e.y]+1:_[e.y]=1}));var p=Object.entries(_).sort((function(e,t){return t[1]-e[1]})),u=p.map((function(e){return e[1]})),m=X.y(u);t.selectAll(".item_svg").data(p).join("svg").attr("class","item_svg").attr("x",(function(e,t){return X.y(u.slice(0,t))/m*s})).attr("y",d).attr("width",(function(e,t){return e[1]/m*s-.2})).attr("height",120-c).attr("add_rectangle",(function(t){X.w(this).selectAll(".my_rect").data([0]).join("rect").attr("class","my_rect").attr("width","100%").attr("height",120-c).style("fill","gray").attr("check",(function(){a+t[0]in o&&o[a+t[0]].length>0&&X.w(this).classed("feature_clicked",!0)})).on("click",(function(){X.w(this).classed("feature_clicked")?(X.w(this).classed("feature_clicked",!1),i(a+t[0],[])):(X.w(this).classed("feature_clicked",!0),i(a+t[0],e.filter((function(e){return e.y==t[0]})).map((function(e){return e.x}))))}))})).attr("add_text",(function(e){X.w(this).selectAll("text").data([0]).join("text").text(e[0]).attr("x","50%").attr("y","50%").attr("dominant-baseline","middle").style("font-size",X.w(this).attr("width")>11?10:X.w(this).attr("width")-2).style("writing-mode","tb").style("text-anchor","middle").style("cursor","pointer")})),t.selectAll(".hist_title").data([0]).join("text").attr("class","hist_title").attr("y",110).attr("x",s/2).attr("text-anchor","middle").attr("font-size",14).text(a).style("text-transform","capitalize")}(r,X.w(this),e,a,i.length,t.store_instances,t.state.all_instances)):(t.state.feature_data.forEach((function(a){if(a["1-qid"]==t.props.selected_year){var n={};n.x=parseInt(a.two_realRank),n.y=parseFloat(a[e]),r.push(n)}})),function(e,t,a,r,n,i){var o=10,l=5,s=50,d=5,c=K(".feature_histograms_container").width(),_=c;X.w(".feature_histograms_container").attr("height",120*n+20),t.attr("y",120*r).attr("width",c).attr("height",120);var p=e.map((function(e){return e.y})),u=120-o-s,m=X.u().domain(X.h(p)).range([o,u]),f=m.ticks(25),h=X.j().value((function(e){return e})).domain(m.domain()).thresholds(f)(p),g=[];h.map((function(e,t){return g.push([e.x1,e.length])})),console.log(a,e);var y=X.u().domain(X.h(g.map((function(e){return e[0]})))).range([d,_-l]),v=X.u().domain([0,X.n(g.map((function(e){return e[1]})))]).range([u,0]),b=X.a().curve(X.f).x((function(e){return y(e[0])})).y0(v(0)).y1((function(e){return v(e[1])}));t.append("path").attr("transform","translate(0,"+o+")").attr("d",b(g)).style("fill","gray"),t.selectAll(".xAxis_g").data([0]).join("g").attr("class","xAxis_g").attr("transform","translate(0,"+(120-s)+")").call(X.b(y).ticks(5).tickFormat(X.i(".2s"))),t.selectAll(".domain").attr("stroke","#dddddd"),t.call(X.d().extent([[0,o],[400,u+o]]).on("end",(function(){var t=X.g.selection;if(null!=t){var r=y.invert(t[0]),n=y.invert(t[1]),o=e.filter((function(e){return e.y>=r&&e.y<=n})).map((function(e){return e.x}));i(a,o)}else i(a,[])}))),t.selectAll(".title").data([0]).join("text").attr("class","title").attr("x",_/2).attr("y",92).attr("dominant-baseline","hanging").attr("text-anchor","middle").text(a).attr("font-size",14).style("text-transform","capitalize").attr("fill","#3d3b3b")}(r,X.w(this),e,a,i.length,t.store_instances)),"UAAL_pension_risk_free"==e&&console.log(e,t.state.feature_data,"dddd")})).attr("id",(function(e){return e}))}},{key:"render",value:function(){var e=this;return null!=this.props.original_data?n.a.createElement("div",{style:{display:"relative",width:400,marginTop:-8}},n.a.createElement(le.a,{fullWidth:!0,style:{margin:0,position:"sticky",top:0,backgroundColor:"gray",borderRadius:0},onClick:function(){var t,a=Object(Q.a)(new Set((t=[]).concat.apply(t,Object(Q.a)(Object.values(e.state.all_instances))))).filter((function(t){return t>=e.props.state_range[0]&&t<=e.props.state_range[1]}));e.props.handleClose(),0==a.length&&alert("No instance is available withing the selected range!"),e.props.Set_histogram_data(Object(Q.a)(a))}}," Update "),n.a.createElement("div",{className:"feature_histograms_container_div",style:{display:"relative",width:400,height:window.innerHeight,overflow:"scroll",marginTop:-8}},n.a.createElement("svg",{className:"feature_histograms_container",style:{width:"100%",padding:10}}," "))):null}}]),a}(r.Component),Ct=Object(Z.b)((function(e){return{dataset:e.dataset,deviate_by:e.deviate_by,state_range:e.state_range,default_models:e.default_models,selected_year:e.selected_year,sparkline_data:e.sparkline_data,show:e.show,mode:e.mode,original_data:e.original_data,rank_data:e.rank_data}}),(function(e){return{Set_slider_max:function(t){return e({type:"slider_max",value:t})},Set_state_range:function(t){return e({type:"state_range",value:t})},Set_histogram_data:function(t){return e({type:"histogram_data",value:t})}}}))(Ot);function Rt(){var e=n.a.useState(null),t=Object(re.a)(e,2),a=t[0],r=t[1],i=function(){r(null)};return n.a.createElement("div",{style:{marginTop:-2}},n.a.createElement(le.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)}},"Select Attributes",n.a.createElement(Te.a,null)),n.a.createElement(Ce.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:i,style:{marginTop:0}},a?n.a.createElement(Ct,{handleClose:i}):null))}var At=a(338);var It=Object(Z.b)((function(e){return{state_range:e.state_range}}),(function(e){return{Set_mode:function(t){return e({type:"mode",value:t})},Set_histogram_data:function(t){return e({type:"histogram_data",value:t})}}}))((function(e){var t=this,a=n.a.useState(null),r=Object(re.a)(a,2),i=r[0],o=r[1],l=function(){o(null)};return n.a.createElement("div",{style:{marginTop:-2}},n.a.createElement(le.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},"Select Mode",n.a.createElement(Te.a,null)),n.a.createElement(Ce.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:l,style:{marginTop:0}},i?n.a.createElement("div",{style:{paddingLeft:10}},n.a.createElement("form",{onSubmit:function(){return t.buttonclickHandler(1,"form")}},n.a.createElement(ft.a,{component:"fieldset"},n.a.createElement(yt.a,{component:"legend"}),n.a.createElement(gt.a,{"aria-label":"gender",name:"gender1",onChange:function(t,a){l(),e.Set_histogram_data([]),e.Set_mode(a)}},["Model","Ranges","Time"].map((function(e){return n.a.createElement(mt.a,{value:e,control:n.a.createElement(ht.a,null),label:"Model"==e?"Ranker":e})})))))):null))}));var Mt,Nt=Object(Z.b)((function(e){return{state_range:e.state_range,dataset:e.dataset,exp_method:e.exp_method,default_models:e.default_models}}),(function(e){return{Set_exp_method:function(t){return e({type:"exp_method",value:t})},Set_histogram_data:function(t){return e({type:"histogram_data",value:t})},Set_default_models:function(t){return e({type:"default_models",value:t})},Set_lime_data:function(t){return e({type:"lime_data",value:t})}}}))((function(e){var t=this,a=n.a.useState(null),r=Object(re.a)(a,2),i=r[0],o=r[1],l=function(){o(null)};return n.a.createElement("div",{style:{marginTop:-2}},n.a.createElement(le.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},"Select Explanation Method",n.a.createElement(Te.a,null)),n.a.createElement(Ce.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:l,style:{marginTop:0}},i?n.a.createElement("div",{style:{paddingLeft:10}},n.a.createElement("form",{onSubmit:function(){return t.buttonclickHandler(1,"form")}},n.a.createElement(ft.a,{component:"fieldset"},n.a.createElement(yt.a,{component:"legend"}),n.a.createElement(gt.a,{"aria-label":"gender",name:"gender1",onChange:function(t,a){l(),function(e,t,a){var r="";"fiscal"===e&&(r="lime"===t?E.a:O.a),"school"===e&&(r="lime"===t?I.a:N.a),X.e(r).then((function(e){var t=e.map((function(e){for(var t={},a=0,r=Object.keys(e);a<r.length;a++){var n=r[a];t[n]=""===e[n]?"0":e[n]}return t})).map((function(e){return e.predicted=parseInt(e.predicted),e.two_realRank=parseInt(e.two_realRank),e.deviation=Math.abs(e.predicted-e.two_realRank),e})),r={};X.q().key((function(e){return e.model})).entries(t).map((function(e){r[e.key]=e.values})),a(r)}))}(e.dataset,a,e.Set_lime_data),"ice"===a&&e.Set_default_models(e.default_models.filter((function(e){return"RandomFor"!=e}))),console.log(a),e.Set_exp_method(a)}},["LIME","ICE"].map((function(t){return n.a.createElement(mt.a,{value:t.toLowerCase(),control:n.a.createElement(ht.a,null),label:t,checked:e.exp_method===t.toLowerCase()})})))))):null))})),Tt=a(321),Lt=a(337),Bt=(Object(Ke.a)({palette:{primary:{main:"#0069d9"},secondary:{main:"#0069d9"}}}),Object(Ke.a)({spacing:2,overrides:(Mt={MuiFilledInput:{root:{backgroundColor:"none",padding:0}},MuiInputLabel:{root:{backgroundColor:"yellow"}},MuiTextField:{root:{}},MuiButton:{root:{textTransform:"none",padding:"15px"},fullWidth:{maxWidth:"100%"}}},Object(J.a)(Mt,"MuiFilledInput",{root:{padding:0,backgroundColor:"yellow"}}),Object(J.a)(Mt,"MuiAutocomplete",{Root:{padding:0}}),Mt),props:{MuiButton:{disableRipple:!0,variant:"contained",color:"primary"},MuiCheckbox:{disableRipple:!0},MuiTextField:{variant:"filled",InputLabelProps:{shrink:!0}}}})),zt=Object(ie.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}}));var Dt=Object(Z.b)((function(e){return{threshold:e.threshold}}),(function(e){return{Set_threshold:function(t){return e({type:"threshold",value:t})}}}))((function(e){var t=Object(r.useState)(e.threshold),a=Object(re.a)(t,2),i=a[0],o=a[1],l=zt();return n.a.createElement(Lt.a,{theme:Bt},n.a.createElement("form",{className:l.root,noValidate:!0,autoComplete:"off"},n.a.createElement("span",{style:{fontSize:14}},"Deviation threshold:"),n.a.createElement(Tt.a,{style:{width:30},defaultValue:i,inputProps:{"aria-label":"description"},onChange:function(e){return o(e.target.value)}}),n.a.createElement(le.a,{style:{height:20,color:"black",fontSize:16,backgroundColor:"#f2f2f2"},variant:"string",onClick:function(){return e.Set_threshold(i)}},"Update")))}));var Ht=Object(Z.b)((function(e){return{default_models:e.default_models,sort_by:e.sort_by,state_range:e.state_range,selected_year:e.selected_year,grouped_by_year_data:e.grouped_by_year_data}}),(function(e){return{Set_sort_by:function(t){return e({type:"sort_by",value:t})},Set_default_models:function(t){return e({type:"default_models",value:t})},Set_default_model_scores:function(t){return e({type:"default_model_scores",value:t})}}}))((function(e){var t=n.a.useState(null),a=Object(re.a)(t,2),r=a[0],i=a[1],o=n.a.useState(null),l=Object(re.a)(o,2),s=l[0],d=l[1],c=n.a.useState(e.sort_by),_=Object(re.a)(c,2),p=_[0],u=_[1],m=Boolean(r),f=Boolean(s);return n.a.createElement("div",{className:"sort",style:{borderRight:"1px dashed #eaeaea",paddingLeft:5}},n.a.createElement(le.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){return i(e.currentTarget)}},"Advanced ",n.a.createElement(Te.a,null)),n.a.createElement(Ce.a,{id:"fade-menu",anchorEl:r,keepMounted:!0,open:m,onClose:function(){return i(null)},TransitionComponent:Me.a},n.a.createElement("div",{style:{padding:"0px 14px"}},n.a.createElement(Dt,null)),n.a.createElement("div",{style:{padding:"0px 10px"}},n.a.createElement(le.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){return d(e.currentTarget)}},"Select Metrics ",n.a.createElement(Te.a,null)),n.a.createElement(Ce.a,{id:"fade-menu",anchorEl:s,keepMounted:!0,open:f,onClose:function(){return d(null)},TransitionComponent:Me.a},n.a.createElement("div",{style:{padding:"0px 10px"}},n.a.createElement(ft.a,{component:"fieldset"},n.a.createElement(yt.a,{component:"legend"}),n.a.createElement(gt.a,{"aria-label":"gender",name:"gender1",value:p,onChange:function(t){if(u(t.target.value),"None"==t.target.value)var a="Alphabetically";else a=t.target.value;e.Set_sort_by(a);var r=P(a,e.state_range,e.default_models,e.selected_year,e.grouped_by_year_data)[0],n=P(a,e.state_range,e.default_models,e.selected_year,e.grouped_by_year_data)[1];e.Set_default_model_scores(n),e.Set_default_models(Object(Q.a)(r)),d(null)}},["Discounted Cumulative Gain","Average Precision","None"].map((function(e){return n.a.createElement(mt.a,{value:e,control:n.a.createElement(ht.a,null),label:e})})))))))))})),Ft=a(351),Wt=a(343),qt=a(339),Ut=a(267);var Yt=Object(Z.b)((function(e){return{label_on:e.label_on}}),(function(e){return{Set_label_on:function(t){return e({type:"label_on",value:t})}}}))((function(e){return r.createElement("div",{style:{marginTop:7}},r.createElement(Ft.a,null,r.createElement(Wt.a,{sx:{margin:0,padding:0},control:r.createElement(qt.a,{size:"small",sx:{marginTop:0,padding:0,color:"gray","&.Mui-checked":{color:"gray"}},checked:e.label_on,onClick:function(){return e.Set_label_on(!e.label_on)}}),label:r.createElement(Ut.a,{style:{fontSize:14,fontFamily:"Open Sans",marginLeft:3}},"Rank Label On")})))})),Vt=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).buttonclickHandler=function(e,t){console.log(e),setTimeout((function(){r.setState({random:Math.random()})}),500),r.props.Set_view_data(e),r.setState({view_data:e})},r.state={random:10,original_data:null,grouped_by_year_data:null,show:["Slope charts","Rankings","Explanation"],view_data:1,histogram_data:[],ref_year:null,features_dict:{},features_voted:null,Legend_ready_to_vis:null,legend_model:"CordAscent"},r}return Object(s.a)(a,[{key:"shouldComponentUpdate",value:function(){return!0}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(Oe.a,{container:!0,style:{position:"relative"}},n.a.createElement(At.a,{"aria-label":"outlined button group",style:{marginRight:150,border:"none"}},n.a.createElement(le.a,{style:{borderRadius:0,border:"none",borderRight:"1px solid #bfbfbf"},onClick:function(){return e.buttonclickHandler(1,"button")}},"View Data"),n.a.createElement(le.a,{style:{borderRadius:0,border:"none",borderRight:"1px solid #bfbfbf"},onClick:function(){return e.buttonclickHandler(0,"button")}},"Load Data")),n.a.createElement(It,null),"Model"==this.props.mode?n.a.createElement(Rt,null):null,n.a.createElement(Nt,null),n.a.createElement(Yt,null),"Model"==this.props.mode?n.a.createElement("div",{style:{position:"absolute",right:"20px"}},n.a.createElement(Ht,null)):null),0==this.props.view_data?n.a.createElement(ut.a,{className:"Topbar_container"},n.a.createElement("div",{className:"load"},n.a.createElement("form",{onSubmit:function(){return e.buttonclickHandler(1,"form")}},n.a.createElement(ft.a,{component:"fieldset"},n.a.createElement(yt.a,{component:"legend"}),n.a.createElement(gt.a,{"aria-label":"gender",name:"gender1",onChange:function(t,a){return e.props.handleradioChange(a)}},["Fiscal Dataset","School Dataset (World)","Airbnb Dataset","School Dataset (USA)"].map((function(e){return n.a.createElement(mt.a,{value:e,control:n.a.createElement(ht.a,null),label:e})}))),n.a.createElement(le.a,{type:"submit",variant:"outlined",color:"primary"},"Load"))))):null)}}]),a}(r.Component),Xt=Object(Z.b)((function(e){return{view_data:e.view_data,mode:e.mode}}),(function(e){return{Set_view_data:function(t){return e({type:"view_data",value:t})}}}))(Vt),Pt=(a(261),function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({rand:10})}},{key:"componentDidUpdate",value:function(){var e=K(".legend_container").width(),t=K(".legend_container").height(),a=X.u().domain(X.h(this.props.deviation_array)).range([this.props.global_config.max_circle_r,this.props.global_config.min_circle_r]),r=X.u().domain(X.h(this.props.deviation_array)).range([this.props.global_config.max_circle_r,95]);if(this.props.deviation_array.length>3)var n=[X.p(this.props.deviation_array),Math.ceil(.33*X.n(this.props.deviation_array)),Math.ceil(.66*X.n(this.props.deviation_array)),X.n(this.props.deviation_array)];else n=this.props.deviation_array;n=n.filter((function(e){return e%1===0}));var i=X.w("#legend1").attr("width",e).attr("height",100);i.selectAll(".legend1_circles").data(n).join("circle").attr("class","legend1_circles").attr("cx",10).attr("cy",(function(e){return r(e)})).attr("r",(function(e){return a(e)})).attr("fill","grey"),i.selectAll(".legend1_text").data(n).join("text").attr("class","legend1_text").attr("x",23).attr("y",(function(e){return r(e)})).attr("dominant-baseline","middle").attr("font-size",10).text((function(e){return e==X.p(n)?e+" (Most Precise)":e==X.n(n)?e+" (Least Precise)":e}));var o=X.p(this.props.selected_instances),l=X.n(this.props.selected_instances),s=X.t([l,parseInt((l+o)/2),o],X.l(["#b37cd3","#d9d58c","#71ce6c"])),d=t/2-50,c=X.u().domain([o,l]).range([5,d-10]),_=X.r(o,l+1,l/10),p=d/_.length,u=X.w("#legend2").attr("width",e).attr("height",d);u.selectAll(".legend2_rects").data(_).join("rect").attr("class","legend2_rects").attr("x",10).attr("y",(function(e,t){return p*t})).attr("width",12).attr("height",p).attr("fill",(function(e){return s(e)})),u.selectAll(".legend2_labels").data([o,parseInt(l/2),l]).join("text").attr("x",24).attr("class","legend2_labels").attr("dominant-baseline","middle").attr("y",(function(e,t){return 0==t?c(e)+p/2:c(e)})).text((function(e){return e})).attr("font-size",12)}},{key:"render",value:function(){return n.a.createElement(be.a,{className:"legend_container",container:!0,direction:"column",justifyContent:"center",alignItems:"flex-start",style:{width:"100%",height:"100%"}},n.a.createElement(be.a,{item:!0,style:{width:this.props.legend_width}},n.a.createElement("div",{item:!0,style:{backgroundColor:"rgb(211, 211, 211,0.5)",padding:5,marginBottom:5}},n.a.createElement("p",{className:"title",style:{marginBottom:10}}," Rank Deviation"),n.a.createElement("svg",{id:"legend1"}," "))),n.a.createElement(be.a,{item:!0,container:!0,direction:"column",alignItems:"center",style:{width:this.props.legend_width,backgroundColor:"rgb(211, 211, 211,0.5)",padding:5}},n.a.createElement("p",{className:"title",style:{marginBottom:10}}," Rank Range"),n.a.createElement("p",{style:{margin:0,fontSize:12,display:"block"}},"High"),n.a.createElement(be.a,{item:!0},n.a.createElement("svg",{id:"legend2",style:{marginTop:3,marginBottom:0},transform:"translate(40,0)"})),n.a.createElement("p",{style:{margin:0,fontSize:12}},"Low")))}}]),a}(r.Component)),Gt=Object(Z.b)((function(e){return{selected_instances:e.selected_instances,deviation_array:e.deviation_array,global_config:e.global_config}}),(function(e){return{Set_legend_year:function(t){return e({type:"legend_year",value:t})}}}))(Pt),$t=function(e){Object(_.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).dataprocessor=function(e,t){"school"==e&&r.process_data(f.a,R.a,"lime"===t?I.a:N.a,e),"fiscal"==e&&r.process_data(u.a,w.a,"lime"===t?E.a:O.a,e),"airbnb"==e&&r.process_data(k.a,L.a,z.a,e),"house"==e&&r.process_data(g.a,U.a,V.a,e),"rur"==e&&r.process_data(v.a,H.a,W.a,e)},r.process_data=function(e,t,a,n){var i=Object(d.a)(r);X.e(e).then((function(e){var t=G(e).years,a=G(e).sparkline_data,r=Object.keys(t);i.props.Set_sparkline_data(a),i.props.Set_slider_max(t[r[0]].length),i.setState({years_for_dropdown:r}),i.props.Set_years_for_dropdown(r),i.props.Set_time_mode_year1(r[0]),i.props.Set_time_mode_year2(r[1]),i.props.Set_legend_year(r[0]),i.setState({ref_year:r[0]}),i.props.Set_grouped_by_year_data(t),i.setState({grouped_by_year_data:t}),i.setState({original_data:e}),i.props.Set_original_data(e)})),X.e(t).then((function(e){var t={};X.q().key((function(e){return e.model})).entries(e).map((function(e){t[e.key]=e.values})),i.props.Set_rank_data(t)})),X.e(a).then((function(e){var t=e.map((function(e){for(var t={},a=0,r=Object.keys(e);a<r.length;a++){var n=r[a];t[n]=""===e[n]?"0":e[n]}return t})).map((function(e){return e.predicted=parseInt(e.predicted),e.two_realRank=parseInt(e.two_realRank),e.deviation=Math.abs(e.predicted-e.two_realRank),e})),a={};X.q().key((function(e){return e.model})).entries(t).map((function(e){a[e.key]=e.values})),i.props.Set_lime_data(a)}))},r.handleradioChange=function(e){r.props.Set_rank_data(null),r.props.Set_clicked_items_in_slopechart([]),r.props.Set_state_range([1,25]),r.props.Set_histogram_data([]),r.props.Set_mode("Model"),r.props.Set_range_mode_range1([1,25]),r.props.Set_range_mode_range2([15,40]),r.props.Set_time_mode_range([5,35]),"Fiscal Dataset"==e?(r.setState({dataset:"fiscal"}),r.props.Set_dataset("fiscal"),r.dataprocessor("fiscal",r.props.exp_method)):"Airbnb Dataset"==e?(r.setState({dataset:"airbnb"}),r.props.Set_dataset("airbnb"),r.dataprocessor("airbnb")):"House Dataset"==e?(r.setState({dataset:"house"}),r.props.Set_dataset("house"),r.dataprocessor("house")):"School Dataset (USA)"==e?(r.setState({dataset:"rur"}),r.props.Set_dataset("rur"),r.dataprocessor("rur"),r.props.Set_selected_year(2012)):(r.setState({dataset:"school"}),r.props.Set_dataset("school"),r.dataprocessor("school",r.props.exp_method))},r.state={random:10,original_data:null,grouped_by_year_data:null,show:["Slope charts","Rankings","Explanation"],view_data:1,histogram_data:[],ref_year:null,features_dict:{},features_voted:null,Legend_ready_to_vis:null,legend_model:"CordAscent",width:window.innerWidth},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.dataprocessor(this.props.dataset,this.props.exp_method),K(document).keyup((function(t){"Escape"===t.key&&(e.props.Set_clicked_circles([]),e.props.Set_clicked_features([]))}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"root_container",style:{height:window.innerHeight,width:window.innerWidth}},n.a.createElement("div",{className:"topBar_root",style:{height:35,width:window.innerWidth}},n.a.createElement(Xt,{handleradioChange:this.handleradioChange})),this.props.view_data?n.a.createElement(ut.a,null,n.a.createElement("div",{style:{width:window.innerWidth,height:window.innerHeight-K(".topBar_root").height(),padding:"2px 0px"},key:this.props.view_data},1==this.state.view_data?n.a.createElement(be.a,{className:"charts_and_legend_container",style:{height:"100%",width:window.innerWidth,border:"2px solid grey"},container:!0,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement(be.a,{className:"charts_container",style:{height:"100%",width:window.innerWidth-120},container:!0,spacing:0,direction:"row",justify:"space-evenly"},"Model"==this.props.mode&&null!=this.state.grouped_by_year_data&&null!=this.props.original_data&&null!=this.props.lime_data?n.a.createElement(De,null):null,"Ranges"==this.props.mode&&null!=this.state.grouped_by_year_data&&null!=this.props.original_data&&null!=this.props.lime_data?n.a.createElement(Ze,null):null,"Time"==this.props.mode&&null!=this.state.grouped_by_year_data&&null!=this.props.original_data&&null!=this.props.lime_data?n.a.createElement(pt,null):null),n.a.createElement("div",{style:{padding:0,marginTop:5,height:"100%",width:110}},n.a.createElement(Gt,{legend_width:120}))):null)):null)}}]),a}(r.Component),Jt=Object(Z.b)((function(e){return{tracking:e.tracking,state_range:e.state_range,deviate_by:e.deviate_by,default_models:e.default_models,sparkline_data:e.sparkline_data,selected_year:e.selected_year,mode:e.mode,range_mode_model:e.range_mode_model,original_data:e.original_data,time_mode_model:e.time_mode_model,chart_scale_type:e.chart_scale_type,dataset:e.dataset,histogram_data:e.histogram_data,sort_by:e.sort_by,time_mode_year1:e.time_mode_year1,time_mode_year2:e.time_mode_year2,popup_chart_data:e.popup_chart_data,clicked_items_in_slopechart:e.clicked_items_in_slopechart,config:e.config,lime_data:e.lime_data,view_data:e.view_data,exp_method:e.exp_method}}),(function(e){return{Set_dataset:function(t){return e({type:"dataset",value:t})},Set_default_models:function(t){return e({type:"default_models",value:t})},Set_sparkline_data:function(t){return e({type:"sparkline_data",value:t})},Set_slider_max:function(t){return e({type:"slider_max",value:t})},Set_years_for_dropdown:function(t){return e({type:"years_for_dropdown",value:t})},Set_selected_year:function(t){return e({type:"selected_year",value:parseInt(t)})},Set_ref_year:function(t){return e({type:"ref_year",value:t})},Set_original_data:function(t){return e({type:"original_data",value:t})},Set_grouped_by_year_data:function(t){return e({type:"grouped_by_year_data",value:t})},Set_slider_and_feature_value:function(t){return e({type:"slider_and_feature_value",value:t})},Set_clicked_items_in_slopechart:function(t){return e({type:"clicked_items_in_slopechart",value:t})},Set_histogram_data:function(t){return e({type:"histogram_data",value:t})},Set_state_range:function(t){return e({type:"state_range",value:t})},Set_legend_year:function(t){return e({type:"legend_year",value:t})},Set_mode:function(t){return e({type:"mode",value:t})},Set_range_mode_range1:function(t){return e({type:"range_mode_range1",value:t})},Set_range_mode_range2:function(t){return e({type:"range_mode_range2",value:t})},Set_time_mode_range:function(t){return e({type:"time_mode_range",value:t})},Set_time_mode_year1:function(t){return e({type:"time_mode_year1",value:t})},Set_time_mode_year2:function(t){return e({type:"time_mode_year2",value:t})},Set_rank_data:function(t){return e({type:"rank_data",value:t})},Set_lime_data:function(t){return e({type:"lime_data",value:t})},Set_pop_over_models:function(t){return e({type:"pop_over_models",value:t})},Set_default_model_scores:function(t){return e({type:"default_model_scores",value:t})},Set_clicked_circles:function(t){return e({type:"clicked_circles",value:t})},Set_clicked_features:function(t){return e({type:"clicked_features",value:t})}}}))($t),Zt=(a(262),Object(Ke.a)({palette:{primary:{main:"#7f7f7f"},secondary:{main:"#7f7f7f"}},spacing:3,typography:{button:{textTransform:"none"}},overrides:{MuiGrid:{root:{margin:0,padding:0}}}})),Qt=Object(_e.b)(me);o.a.render(n.a.createElement(Lt.a,{theme:Zt},n.a.createElement(Z.a,{store:Qt},n.a.createElement(Jt,null))),document.getElementById("root"))},90:function(e,t,a){e.exports=a.p+"static/media/fiscal_lime_may25.c7da8bee.csv"},91:function(e,t,a){e.exports=a.p+"static/media/fiscal_ice_may25.fdc31ac9.csv"},92:function(e,t,a){e.exports=a.p+"static/media/school_lime_may25.d3117c82.csv"},93:function(e,t,a){e.exports=a.p+"static/media/school_ice_may25.c13bd244.csv"}},[[235,1,2]]]);
//# sourceMappingURL=main.ddf42cfe.chunk.js.map