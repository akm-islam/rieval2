{"version":3,"sources":["Data/fiscal.csv","Data/school.csv","Data/house.csv","Data/data/fiscal/lime/fiscal_rank.csv","Data/data/fiscal/lime/fiscal_lime.csv","Data/data/school/lime/school_rank.csv","Data/data/school/lime/school_lime.csv","Data/data/house/lime/house_rank.csv","Data/data/house/lime/house_lime.csv","Data/data/house/lime/chart1_data.csv","Algorithms/algo1.js","components/Charts/Model/ModelChart.js","components/Charts/deviation_chart.js","components/Charts/misc_algo.js","components/Charts/explanation_chart.js","components/Charts/Range/sparkline1.js","components/Charts/Range/sparkline2.js","components/Charts/Range/RangeChart.js","components/Charts/Range/slopechart1.js","components/Charts/Time/sparkline1.js","components/Charts/Time/sparkline2.js","components/Charts/Time/YearChart.js","components/Charts/Time/slopechart1.js","components/TopBar/DefaultModels.js","components/TopBar/Sort.js","components/TopBar/TopBar.js","components/Sidebar/Histogram.js","components/Sidebar/Histograms.js","components/Sidebar/Tracking.js","components/Sidebar/Modes.js","components/Sidebar/Sidebar.js","App.js","store/reducer.js","Themes.js","index.js","Data/data/fiscal/lime/chart1_data.csv","Data/data/school/lime/chart1_data.csv"],"names":["module","exports","groupby_year","original_data","years","sparkline_data","forEach","element","replace","temp_dict","year","parseInt","rank","push","sort","type","state_range","default_models","selected_year","grouped_by_year_data","nDCG_dict","i","Object","keys","key","parseFloat","items","map","substring","first","second","temp_ndcg","length","includes","temp1","myitem","console","log","mydict","model","temp","Math","sqrt","temp_ap","features_with_score","dataset","models","number_of_charts","rank_data","temp_final","temp2","v","top_nine","data","feautures","tempvoted_data_with_score","data2","filter","index","item","feauture","items2","sorted_features","key2","SlopeChart","props","line_color","state","height_slope_exp_chart","mouseX","mouseY","this","setState","width","window","innerHeight","prevProps","prevState","selected_instances","d3","defualt_models","config","selected_years","average","clicked_circles","Set_clicked_circles","div","selectAll","join","attr","style","parent_width","$","temp_scale_data","abs","y_distance","circle_radius","d","text","data_for_all_years","line_data","model_name","a","temp_max","sclale1","domain","range","transition","duration","d2","circ_data","avg","on","html","pageX","pageY","deviation_chart","average_m","class_name","algo1","lime_data","margin","parent_height","height","item_width","item_height","parent_svg","svg_index","feature_name","feature_contrib_name","parentNode","xScale","yScale","explanation_chart","entries","b","slice","lines","points","each","misc_algo","id","Grid","container","className","padding","border","boxShadow","marginBottom","Component","connect","deviate_by","clicked_items_in_slopechart","tracking","time_mode_model","chart_scale_type","histogram_data","show","default_model_scores","sort_by","average_y","dispatch","val","value","Set_prev_prop","Set_sparkline_data","Set_clicked_items_in_slopechart","Set_replay","sparklineGen","appHandleChange","className2","sparkline_color","path_id","s_margin","s_width","s_height","s_svg","x","select","datum","y0","y","y1","preventDefault","divid","remove","append","temp_data","enter","CreateCharts","animate","range_mode_range1","range_mode_range2","mydata3","selected_by_year_data","max_rank","range_mode_model","start_range","deviate_check_lower","end_range","deviate_check_upper","tempA","tempB","node","textClickHandler_original","actual_model_for_range_and_time_mode","slope_chart_anim1","animation1","slope_chart_anim2","animation2","number_of_elements","all_together","nestedByName","name","range_chart_col_range1_height","height_between","range_chart_col_range2_height","yOffset","labelGroupOffset","labelKeyOffset","radius","sparkline_height","var_to_lift_up","values","svg","borderLines","undefined","selection","call","g","sparkline1","split","sparkline2","slopechart1","color_gen","my_state_range","ref_year","track_states_ranged_dictionary","track_states_year_data","min","max","line_color2","interpolate","Rgbdict","addEventListener","innerWidth","JSON","stringify","replay","task2","marginRight","marginTop","paddingRight","xs","ref","changed","popup_chart_data","Set_defualt_models","task1","time_mode_year1","time_mode_year2","time_mode_range","cmodel","slopechart_col_height","myRef","React","createRef","random","Set_pop_over_models","useState","anchorEl","setAnchorEl","open","Boolean","checked","setChecked","handleToggle","currentIndex","indexOf","newChecked","splice","borderRight","Button","aria-controls","aria-haspopup","onClick","event","currentTarget","Menu","keepMounted","onClose","TransitionComponent","Fade","List","labelId","ListItem","role","Checkbox","edge","tabIndex","onChange","temp_Models","target","myfunc","checkboxChanged","Set_sort_by","Set_default_model_scores","set_sort_by","FormControl","component","FormLabel","RadioGroup","aria-label","FormControlLabel","control","Radio","label","useStyles","makeStyles","theme","MuiAutocompleteroot","root","listroot","maxWidth","paper","heading","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","all_models","years_for_dropdown","mode","prev_prop","add","Set_selected_years","Set_selected_year","set_tracking","Set_histogram_data","Set_changed","Set_state_range","Set_slider_max","Set_range_mode_range1","Set_range_mode_range2","Set_time_mode_range","Set_average_m","handle_year_click","handle_model_click","display","marginLeft","CreateChart","feature","feature_height","handleHistogramselection","feature_data","feature_width","isNaN","occur","sum_x","cScale","interpolator","svg1","classed","statelist","country","cat_states","temp_x","tick_values","nice","ticks","hist_height","bins","thresholds","histogram","y_hist","svg0","x0","x1","tickValues","tickFormat","selectionRect","previousElement","currentY","currentX","originX","originY","setElement","ele","getNewAttributes","getCurrentAttributes","x2","y2","getCurrentAttributesAsText","attrs","init","newX","newY","rectElement","update","NewAttr","focus","removePrevious","dragBehavior","p","finalAttributes","myx1","myx2","temp_range","invert","toFixed","states","sourceEvent","Chart","selected_states","update_histogram_data","alert","filtered_states","slider_and_feature_value","makeArr","startValue","stopValue","arr","feaures_dict","features_voted","filename","self","exp_fiscal_CordAscent","exp_school_CordAscent","exp_house_CordAscent","then","legend_data","exp_chart_height","floor","features_dict","feature_index","feature_id","setTimeout","direction","justify","alignItems","labelPlacement","color","flexBasis","flexShrink","secondaryHeading","palette","secondary","tRoot","rang_input","slider_max","Set_years_for_dropdown","Set_mode","Set_range_mode_model","Set_time_mode_model","Set_time_mode_year1","Set_time_mode_year2","Set_slider_and_feature_value","classes","sliderRange","set_sliderRange","range_mode_slider_value1","set_range_mode_slider_value1","range_mode_slider_value2","set_range_mode_slider_value2","time_mode_slider_value","set_time_mode_slider_value","set_dummy","temp_marks","step","marks","borderTop","Autocomplete","borderRadius","paddingTop","paddingBottom","defaultValue","debug","options","renderInput","params","TextField","fullWidth","InputProps","disableUnderline","paddingLeft","backgroundColor","temp_val","Slider","newValue","onChangeCommitted","valueLabelDisplay","aria-labelledby","input","Histograms","toString","Sidebar_width","option","Typography","Set_ref_year","Set_original_data","Set_deviate_by","Set_show","view_data","variant","inputchanged","temp_show","App","handleradioChange","Set_dataset","dataprocessor","reduced_opacity","idName","state_name","dataset_name","process_data","school","school_rank","school_lime","fiscal","fiscal_rank","fiscal_lime","house","house_rank","house_lime","slopechart_data_filename","rank_data_filename","lime_data_filename","Set_legend_year","Set_grouped_by_year_data","nested_data","Set_rank_data","Set_lime_data","buttonclickHandler","Legend_ready_to_vis","legend_model","Row","Col","minHeight","spacing","left","onSubmit","ModelChart","initialState","slope_chart_ready_to_vis","slider_min","dummy","legend_show_option","legend_year","reducer","action","dbclicked_features","drag_drop_feautre_data","pop_over","pop_over_models","clicked_features","createMuiTheme","button","textTransform","store","createStore","ReactDOM","render","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.2d1af5f5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/fiscal.977bae2d.csv\";","module.exports = __webpack_public_path__ + \"static/media/school.2d2c77ef.csv\";","module.exports = __webpack_public_path__ + \"static/media/house.88979d03.csv\";","module.exports = __webpack_public_path__ + \"static/media/fiscal_rank.6e0a824e.csv\";","module.exports = __webpack_public_path__ + \"static/media/fiscal_lime.7992abf1.csv\";","module.exports = __webpack_public_path__ + \"static/media/school_rank.edf0b9e3.csv\";","module.exports = __webpack_public_path__ + \"static/media/school_lime.644683c6.csv\";","module.exports = __webpack_public_path__ + \"static/media/house_rank.f85c2352.csv\";","module.exports = __webpack_public_path__ + \"static/media/house_lime.b31dfb61.csv\";","module.exports = __webpack_public_path__ + \"static/media/chart1_data.45acbae8.csv\";","export function groupby_year(original_data) {\n  var years = {}\n  var sparkline_data = {}\n  original_data.forEach(element => {\n    years[element['1-qid']] = []\n    sparkline_data[element['State'].replace(/ /g, '').replace(/[^\\w\\s]/gi, '')] = []\n  });\n\n  original_data.forEach(element => {\n    var temp_dict = { year: parseInt(element['1-qid']), rank: parseInt(element['two_realRank']) }\n    sparkline_data[element['State'].replace(/ /g, '').replace(/[^\\w\\s]/gi, '')].push(temp_dict)\n    years[element['1-qid']].push(element)\n  });\n  return { years: years, sparkline_data: sparkline_data };\n}\n//------------------------------------------------------------------------------------------------- Sort Models\nexport function sort(type, state_range, default_models, selected_year, grouped_by_year_data) {\n  //------------Handle ndgc sorting\n  if (type == 'Discounted Cumulative Gain') {\n    var nDCG_dict = { \"ndcg_term_CordAscent\": 0, \"ndcg_term_LambdaMART\": 0, \"ndcg_term_LambdaRank\": 0, \"ndcg_term_LinearReg\": 0, \"ndcg_term_ListNet\": 0, \"ndcg_term_MART\": 0, \"ndcg_term_RandomFor\": 0, \"ndcg_term_RankBoost\": 0, \"ndcg_term_RankNet\": 0 }\n    for (var i = state_range[0]; i < state_range[1]; i++) {\n      Object.keys(nDCG_dict).forEach(key => {\n          nDCG_dict[key] = nDCG_dict[key] + parseFloat(grouped_by_year_data[selected_year][i][key])\n      })\n    }\n    //---- sort\n    var items = Object.keys(nDCG_dict).map(function (key) {\n      return [key.substring(10), nDCG_dict[key]];\n    });\n    items.sort(function (first, second) {\n      return second[1] - first[1];\n    });\n    var temp_ndcg = []\n    for (var i = 0; i < items.length; i++) {\n      if (default_models.includes(items[i][0])) {\n        temp_ndcg.push(items[i][0])\n      }\n    }\n    var temp1={}\n    items.map(myitem=>{temp1[myitem[0]]=myitem[1]})\n    console.log(items)\n    return [temp_ndcg,temp1]\n  }\n  //----\n\n  //------------Handle AP sorting\n  if (type == 'Average Precision') {\n    var mydict = {}\n    default_models.forEach((model) => {\n      var temp = 1\n      for (var i = state_range[0]; i < state_range[1]; i++) {\n        temp = temp + (grouped_by_year_data[selected_year][i][\"two_realRank\"] - grouped_by_year_data[selected_year][i][model]) ** 2\n      }\n      mydict[model] = ((state_range[1] - state_range[0]) + 1) / (Math.sqrt(temp))\n    })\n    //---- sort\n    var items = Object.keys(mydict).map(function (key) {\n      return [key, mydict[key]];\n    });\n    items.sort(function (first, second) {\n      return second[1] - first[1];\n    });\n    var temp_ap = []\n    for (var i = 0; i < items.length; i++) {\n      if (default_models.includes(items[i][0])) {\n        temp_ap.push(items[i][0])\n      }\n    }\n    return [temp_ap,mydict]\n  }\n  //------------Handle Alphabatic sorting\n  if (type == 'Alphabetically') {\n    var temp=default_models.sort()\n    return [temp,[0]]\n  }\n}\n\n\nexport function features_with_score(dataset, models, state_range, selected_year, number_of_charts, rank_data) {\n  var temp1 = {}\n  var temp_final = {}\n  models.map(model => {\n    var temp2 = {}\n    var v = number_of_charts;\n    var top_nine = sorted_features(dataset, model, state_range, selected_year,rank_data)\n    if (top_nine.length < number_of_charts) { v = top_nine.length;; number_of_charts = top_nine.length } // This is because number of charts is calculated based on space but there are cases when we don't have that many features\n    for (var i = 0; i < number_of_charts; i++) {\n      temp2[top_nine[i]] = v;\n      v = v - 1\n    }\n    temp1[model] = temp2\n  });\n\n  for (var key in temp1) {\n    for (var key2 in temp1[key]) {\n      if (temp_final[key2] > 0) {\n\n        temp_final[key2] = temp_final[key2] + temp1[key][key2]\n      }\n      else {\n        temp_final[key2] = temp1[key][key2]\n      }\n    }\n  }\n  return temp_final;\n}\n\n\nexport function sorted_features(dataset, model, state_range, selected_year,rank_data) { // Uses feature rank to rank and return features name by removing the feature_rank string\n  if (!state_range.length > 0) { return [] }\n  state_range = state_range.map(element => element - 1)\n  var tempvoted_data_with_score = {},items,data,feautures;\n\n  if (model == \"ListNet\") { return [] }\n  var data2 = rank_data[model].filter(element => { if (parseInt(element['1-qid']) == parseInt(selected_year)) { return element } })\n  data = state_range.map(index => data2[index])\n  feautures = Object.keys(data[0])\n\n  data.map(item => {\n    feautures.forEach(feauture => {\n      if (tempvoted_data_with_score[feauture] >= 0 || tempvoted_data_with_score[feauture] < 0) {\n        tempvoted_data_with_score[feauture] = tempvoted_data_with_score[feauture] + (parseFloat(item[feauture]))\n      }\n      else { tempvoted_data_with_score[feauture] = parseFloat(item[feauture]) }\n    })\n  })\n  //-----------------------------------------------------------------\n  // Create items array\n  items = Object.keys(tempvoted_data_with_score).map(function (key) {\n    return [key, tempvoted_data_with_score[key]];\n  });\n  // Sort the array based on the second element\n  items.sort(function (first, second) {\n    return first[1] - second[1];\n  });\n  var items2 = items.map((element) => element[0].replace(\"_feature_rank\", \"\"))\n  items2 = items2.filter(item => item != \"1-qid\" && item!=\"model\")\n  return items2;\n  //-----------------------------------------------------------------\n}\n","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport * as $ from 'jquery';\nimport * as explanation_chart from \"../explanation_chart\";\nimport { connect } from \"react-redux\";\nimport Grid from '@material-ui/core/Grid';\nimport * as algo1 from \"../../../Algorithms/algo1\";\nimport * as deviation_chart from \"../deviation_chart\"\nimport * as misc_algo from '../misc_algo'\nclass SlopeChart extends Component {\n  constructor(props) {\n    super(props);\n    this.line_color = null;\n    this.state = { height_slope_exp_chart: 700, mouseX: 0, mouseY: 0 }\n  }\n  componentDidMount() {\n    this.setState({ width: window.innerHeight })\n  }\n  shouldComponentUpdate(prevProps, prevState) {\n    return true;\n  }\n  componentDidUpdate(prevProps, prevState) {\n    var selected_instances=d3.range(this.props.state_range[0], this.props.state_range[1]+1)\n    deviation_chart.Create_deviation_chart(selected_instances, this.props.original_data, this.props.defualt_models, this.props.config, this.props.selected_years, this.props.average_m,this.props.clicked_circles,this.props.Set_clicked_circles)\n    var number_of_charts=9\n    var features_with_score=algo1.features_with_score(this.props.dataset, this.props.defualt_models, this.props.state_range, this.props.selected_year, number_of_charts, this.props.rank_data)\n    var sorted_features=Object.entries(features_with_score).sort((a,b)=>a[1]-b[1]).slice(0,8)\n    explanation_chart.CreatexpChart(selected_instances,sorted_features,this.props.lime_data,this.props.selected_year,this.props.defualt_models,this.props.clicked_circles,this.props.Set_clicked_circles)\n    \n    misc_algo.draw_lines(this.props.clicked_circles)\n    misc_algo.handle_transparency(\"circle2\",this.props.clicked_circles)\n  }\n  render() {\n    return (\n      <Grid container className=\"slope_chart_exp\" style={{ padding: \"0px 0px\", border: \"1px solid #eaeaea\", width: \"99%\", boxShadow: \"-2px 1px 4px -1px white\" }}>\n        <svg id=\"dev_plot_container\" style={{ width: \"100%\", height: \"50%\",marginBottom:10 }}></svg>\n        <svg id=\"exp_container\" style={{ width: \"100%\", height: \"50%\" }}></svg>\n      </Grid>\n    )\n  }\n}\nconst maptstateToprop = (state) => {\n  return {\n    state_range: state.state_range,\n    selected_year: state.selected_year,\n    selected_years: state.selected_years,\n    deviate_by: state.deviate_by,\n    clicked_items_in_slopechart: state.clicked_items_in_slopechart,\n    tracking: state.tracking,\n    defualt_models: state.defualt_models,\n    original_data: state.original_data,\n    time_mode_model: state.time_mode_model,\n    chart_scale_type: state.chart_scale_type,\n    features_with_score: state.features_with_score,\n    dataset: state.dataset,\n    histogram_data: state.histogram_data,\n    sparkline_data: state.sparkline_data,\n    dataset: state.dataset,\n    config: state.config,\n    show: state.show,\n    default_model_scores: state.default_model_scores,\n    sort_by: state.sort_by,\n    average_m: state.average_m,\n    average_y: state.average_y,\n    lime_data: state.lime_data,\n    features_with_score: state.features_with_score,\n    rank_data: state.rank_data,\n    clicked_circles:state.clicked_circles\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_clicked_circles: (val) => dispatch({ type: \"clicked_circles\", value: val }),\n    Set_prev_prop: (val) => dispatch({ type: \"prev_prop\", value: val }),\n    Set_sparkline_data: (val) => dispatch({ type: \"sparkline_data\", value: val }),\n    Set_clicked_items_in_slopechart: (val) => dispatch({ type: \"clicked_items_in_slopechart\", value: val }),\n    Set_replay: (val) => dispatch({ type: \"replay\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(SlopeChart);","import * as d3 from 'd3';\nimport * as $ from 'jquery';\nimport * as misc_algo from './misc_algo'\nexport function Create_deviation_chart(selected_instances, original_data, defualt_models, config, selected_years, average,clicked_circles,Set_clicked_circles) {\n  var div = d3.select(\"body\").selectAll('.tooltip').data([0]).join(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n  var parent_width = $(\"#dev_plot_container\").width()\n  var data = original_data.filter(item => selected_years.includes(item['1-qid']) && selected_instances.includes(parseInt(item['two_realRank'])))\n  var temp_scale_data = []\n  data.map(item => {defualt_models.map(model => temp_scale_data.push(Math.abs(parseInt(item[model]) - parseInt(item['two_realRank'])))) })\n  var config = { fontSize: 12, font_dy: -6, font_line_gap: 4, line_stroke_width: 10, animation_duration: 0, container_height: 100, my_svg_top_margin: 10, myg_top_margin: 10, left_margin: 100 }\n  var y_distance = config.line_stroke_width + 2\n  var circle_radius = config.line_stroke_width / 2\n  var parent_g = d3.select(\"#dev_plot_container\").style(\"background-color\", \"#ededed\").attr('height', y_distance + data.length * y_distance)\n    .selectAll(\".parent_g\").data([0]).join('g').attr('class', 'parent_g').attr('transform', \"translate(\" + 0 + \",20)\")\n  parent_g.selectAll(\".items\").data(data).join(\"g\").attr(\"class\", \"items\").attr('transform', (d, i) => \"translate(\" + config.left_margin + \",\" + i * y_distance + \")\")\n    .attr(\"add_state\", function (d) {\n      d3.select(this).selectAll(\"text\").data([d]).join('text').text(d['State']+\" (\"+d['two_realRank']+\")\").attr('fill', '#494949').attr(\"dominant-baseline\", \"hanging\").attr(\"font-size\", config.fontSize)\n        .attr(\"x\", 0).attr('text-anchor', 'end').attr(\"dy\", config.font_dy)\n    })\n    .attr(\"add_lines_and_circles\", function (d) {\n      var data_for_all_years = data.filter(item => d['two_realRank'] == parseInt(item['two_realRank']))\n      var line_data = []\n      defualt_models.map(model_name => {\n        data_for_all_years.map(item => {\n          var a = {}\n          a['two_realRank'] = parseInt(item['two_realRank'])\n          a['predicted_rank'] = parseInt(item[model_name])\n          a[\"model\"] = model_name\n          a['year'] = item['1-qid']\n          line_data.push(a)\n        })\n      })\n      // This is only for scaling starts here\n      var temp_scale_data = []\n      data.map(item => { defualt_models.map(model => temp_scale_data.push(Math.abs(parseInt(item[model]) - parseInt(item['two_realRank'])))) })\n      var temp_max=d3.max(temp_scale_data)\n      var sclale1 = d3.scaleLinear().domain([0, temp_max]).range([config.font_line_gap, parent_width - (config.left_margin + circle_radius)])\n      if(temp_max==0){var sclale1 = d3.scaleLinear().domain([0, temp_max]).range([config.font_line_gap, 0])}\n      // This is only for scaling ends here\n      d3.select(this).selectAll(\"line\").data([d]).join('line')\n        .attr(\"x1\", config.font_line_gap).attr(\"y1\", (d, i) => y_distance * i).attr(\"y2\", (d, i) => y_distance * i).attr(\"stroke-width\", config.line_stroke_width).attr(\"stroke\", \"#cecece\")\n        .transition().duration(config.animation_duration).attr(\"x2\", (d2) => {\n          var temp = []\n          line_data.map(item => temp.push(Math.abs(item[\"predicted_rank\"] - item[\"two_realRank\"])))\n          return sclale1(d3.max(temp))\n        })\n      // ------------ Circles start here\n      var data_for_all_years = data.filter(item => d['two_realRank'] == parseInt(item['two_realRank']))\n      var circ_data = []\n      defualt_models.map(model_name => {\n        data_for_all_years.map(item => {\n          var a = {}\n          a['two_realRank'] = parseInt(item['two_realRank'])\n          a['predicted_rank'] = parseInt(item[model_name])\n          a[\"model\"] = model_name\n          a['year'] = item['1-qid']\n          a['id'] = item['State'].replace(/\\s/g,'')+item['1-qid']+model_name.replace(/\\s/g,'')\n          circ_data.push(a)\n        })\n      })\n      if (average) {\n        var avg = d3.mean(circ_data.map(item => item['predicted_rank']))\n        circ_data = circ_data.map(item => {\n          item['predicted_rank'] = avg\n          item['model'] = \"Average\"\n          item['year'] = \"Average\"\n          return item;\n        })\n      }\n      d3.select(this).selectAll(\"circle\").data(circ_data).join(\"circle\").attr('id',d=>d['id']).attr('class','circle2')\n        .attr(\"r\", circle_radius).attr('fill', '#7c7b7b')\n        // .transition().duration(config.animation_duration)\n        .attr(\"cx\", (d2, i) => {\n          if (d2[\"predicted_rank\"] - d2['two_realRank'] == 0) { return sclale1(Math.abs(d2[\"predicted_rank\"] - d2['two_realRank'])) + circle_radius }\n          return sclale1(Math.abs(d2[\"predicted_rank\"] - d2['two_realRank']))\n        })\n        .on('click',d=>Set_clicked_circles(clicked_circles.includes(d['id'])?clicked_circles.filter(item=>item!=d['id']):[...clicked_circles,d['id']]))\n        .on(\"mouseover\", function (d2) {\n          div.transition().duration(200).style(\"opacity\", .9);\n          div.html(\"Year : \" + d2[\"year\"] + \"<br></br>\" +\"Model: \"+ d2[\"model\"]+\"<br></br>\"+\"Deviation: \"+ Math.abs(d2[\"predicted_rank\"] - d2['two_realRank'])).style(\"left\", (d3.event.pageX - 140) + \"px\").style(\"top\", (d3.event.pageY - 98) + \"px\");\n        }).on(\"mouseout\", function (d2) {\n          div.transition()\n            .duration(500)\n            .style(\"opacity\", 0);\n        })\n    })\n}","import * as d3 from 'd3';\nimport { line } from 'd3';\nexport function handle_transparency(class_name, clicked_circles) {\n    if (clicked_circles.length == 0) { d3.selectAll(\".\" + class_name).attr('opacity', 1) }\n    else {\n        d3.selectAll(\".\" + class_name).attr('opacity', 0.5)\n        clicked_circles.map(id => d3.selectAll(\"#\" + id).attr('opacity', 1))\n    }\n}\nexport function draw_lines(clicked_circles) {\n    var lines=[]\n    clicked_circles.map(d=>{\n    var points = []\n    d3.select(\"#exp_container\").selectAll(\"#\" + d).each(function (d) {\n        points.push([d3.select(this).attr('cx'), d3.select(this).attr('cy')])\n    })\n    lines.push([d,d3.line()(points)])\n    console.log(lines)\n})\nd3.select(\"#exp_container\").selectAll('.mypath').data(lines).join('path').attr('class','mypath').attr('d', d=>d[1]).attr(\"fill\", \"none\").attr(\"stroke\", \"grey\").attr(\"stroke-width\", 2);\n}","\nimport * as d3 from 'd3';\nimport * as $ from 'jquery';\nimport * as misc_algo from './misc_algo'\n\nexport function CreatexpChart(selected_instances, sorted_features, lime_data, selected_year, defualt_models, clicked_circles, Set_clicked_circles) {\n  console.log(defualt_models)\n  var margin = { item_top_margin: 15, right: 14, bottom: 0, left: 20, circ_radius: 5, item_left_margin: 25, item_right_margin: 3 }\n  var parent_width = $(\"#exp_container\").width() - margin.item_left_margin\n  var parent_height = $(\"#exp_container\").height() - margin.item_top_margin * 2\n  var item_width = parent_width / sorted_features.length - margin.item_right_margin\n  var item_height = parent_height\n  // Parent svg\n  var parent_svg = d3.select(\"#exp_container\")\n  // Draw ++ --\n  parent_svg.selectAll(\".ylabels\").data([[.125, \"++\"], [.375, \"+\"], [.5, \"0\"], [.625, \"-\"], [.875, \"--\"]]).join('text').attr('class', 'ylabels')\n    .attr(\"y\", d => d[0] * item_height).attr(\"x\", margin.item_left_margin - 5)// change x and text-anchor together\n    .attr('text-anchor', 'end').attr('dominant-baseline', 'hanging')\n    .text(d => d[1]).attr(\"font-size\", 14).attr('fill', \"#636363\")\n  // Add title rectangle, title text and rectangles around each feature\n  parent_svg.selectAll('.title_rect').data(sorted_features).join('rect').attr('class', 'title_rect').attr('width', item_width + 2).attr('height', margin.item_top_margin).attr('x', (d, i) => margin.item_left_margin + item_width * i + (margin.item_right_margin * i - 1)).attr('fill', '#d1d1d1')\n  parent_svg.selectAll(\".title_text\").data(sorted_features).join('text').attr('class', 'title_text').text(d => d[0]).attr('y', 0).attr('dominant-baseline', 'hanging').attr(\"font-size\", 12).attr('x', (d, i) => (margin.item_left_margin + margin.item_right_margin * i) + item_width * i + item_width / 2).attr('text-anchor', 'middle')\n  parent_svg.selectAll('.item_rect').data(sorted_features).join('rect').attr('class', 'item_rect').attr('width', item_width).attr('height', item_height).attr('x', (d, i) => margin.item_left_margin + item_width * i + (margin.item_right_margin * i))\n    .attr('y', margin.item_top_margin).attr('fill', '#d1d1d1').attr('fill-opacity', 0).attr('stroke', '#b2b0b0')\n    //Add circles and lines to divide the rectangle\n    .attr('add_contrib_lines', function (d, svg_index) {\n      parent_svg.selectAll(\".mylines\" + svg_index).data([[.25], [.5], [.75]]).join('line').attr('class', 'mylines' + svg_index)\n      .attr('x1', margin.item_left_margin + item_width * svg_index + (margin.item_right_margin * svg_index)).attr('x2', margin.item_left_margin + item_width * svg_index + (margin.item_right_margin * svg_index + item_width))\n      .attr('y1', d => d * (item_height + margin.item_top_margin)).attr('y2', d => d * (item_height + margin.item_top_margin)).attr('stroke-width', 1).attr(\"stroke\", \"#bababa\")\n    })\n\n    .attr('add_circle_and_contrib_lines', function (d, svg_index) {\n      var feature_name = d[0]\n      var feature_contrib_name = d[0] + \"_contribution\"\n      d3.select(this.parentNode).selectAll(\".model_g\").data(defualt_models).join('g').attr('class','model_g').attr('add_circles',function(model){\n        var circ_data = []\n        lime_data[model].map(item => {\n          if (item['1-qid'] == selected_year && selected_instances.includes(parseInt(item['two_realRank']))) {\n            item['id'] = item['State'].replace(/\\s/g, '') + item['1-qid'] + model.replace(/\\s/g, '')\n            circ_data.push(item)\n          }\n        })\n        // Draw circle starts here\n        var xScale = d3.scaleLinear().domain([d3.min(circ_data.map(item => parseFloat(item[d[0]]))), d3.max(circ_data.map(item => parseFloat(item[d[0]])))]).range([margin.item_left_margin + 2 * margin.circ_radius, item_width - 2 * margin.circ_radius])\n        var yScale = d3.scaleLinear().domain([d3.min(circ_data.map(item => parseFloat(item[feature_contrib_name]))), d3.max(circ_data.map(item => parseFloat(item[feature_contrib_name])))]).range([margin.item_top_margin + margin.circ_radius, item_height - margin.circ_radius])\n        d3.select(this).selectAll(\".my_circles\" + svg_index+model).data(circ_data).join('circle').attr('class', 'circle2 my_circles' + svg_index+model)\n          .attr('cx', (d, i) => (item_width * svg_index) + margin.item_left_margin + margin.circ_radius / 2 + xScale(parseFloat(d[feature_name]))).attr('cy', d => margin.circ_radius / 2 + yScale(parseFloat(d[feature_contrib_name]))).attr('r', margin.circ_radius).attr('fill', 'grey')\n          .attr('id', d => d['id']).on('click', d => Set_clicked_circles(clicked_circles.includes(d['id']) ? clicked_circles.filter(item => item != d['id']) : [...clicked_circles, d['id']]))\n        // Draw circle ends here\n      })\n      \n    })    \n}\n","import * as d3 from 'd3';\nimport * as $ from 'jquery';\n//--------\nexport function sparklineGen(className, sparkline_data, key, state, year, appHandleChange, className2, sparkline_color, path_id) {\n  var config = { labelKeyOffset: 55, radius: 3, sparkline_height: 20 }\n  var s_margin = { top: 0, right: 0, bottom: 0, left: 4 },\n    s_width = config.labelKeyOffset / 2 - 5,\n    s_height = config.sparkline_height - 2;\n  var s_svg = d3.select(\".\"+className)\n    .attr(\"width\", s_width + s_margin.left + s_margin.right)\n    .attr(\"height\", s_height + s_margin.top + s_margin.bottom)\n  var data = sparkline_data[key]\n  // Add X axis  \n  var x = d3.scaleLinear()\n    .domain(d3.extent(data, function (d) { return d.year; }))\n    .range([0, s_width]);\n  //-----------------------------------------------------------------------------------------------------------------------------------------Add the area\n  s_svg.select(\"path\")\n    .datum(data, d => d)\n    .attr(\"id\", \"A\"+path_id)\n    .attr(\"opacity\",1)\n    .attr(\"fill\", sparkline_color) //#969696\n    .attr(\"stroke\", sparkline_color)\n    .attr(\"stroke-width\", (d) => {\n      return 1.5\n    })\n    .attr(\"d\", d3.area()\n      .x(function (d) { return x(d.year) })\n      .y0(function () {\n        var y = d3.scaleLinear().domain([0, d3.max(data, function (d) { return +d.rank; })]).range([s_height, 0]);\n        return y(0)\n      })\n      .y1(function (d) {\n        var y = d3.scaleLinear().domain([0, d3.max(data, function (d) { return +d.rank; })]).range([0, s_height]);\n        return y(d.rank)\n      })\n    )\n  //------------Circles\n  s_svg.selectAll('circle').data(data).join('circle')\n    .attr('cx', function (d, i) { return x(d.year) })\n    .attr('cy', s_height - 2)\n    .attr(\"class\", \"myid\" + className2)\n    .on(\"mouseover\", function (d) {\n      d3.select(this).style('fill', 'black')\n      d3.select(this).attr('r', 3)\n    })\n    .style('fill', (d) => d.year != year ? 'transparent' : 'black')\n    .attr('class', (d) => d.year != year ? 'transparent_class' : 'red_class')\n    .attr('r', 2)\n    .on('dblclick', (d, i) => {\n      d3.event.preventDefault();\n      appHandleChange(d.year, \"year_changed\")\n    })\n    .on(\"mouseout\", function (d) {\n      d3.select(this).style('fill', 'transparent')\n      var divid=\"#div\"+className\n      d3.selectAll(divid).remove()\n    })\n    .on('click', (d) => {\n      d3.select(\"body\").append(\"div\")\n        .attr(\"id\", \"div\"+className)\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0)\n        .html(\"<p>\" + \"Year: \" + d.year + \"</p>\" + \"<p>\" + \"Rank: \" + d.rank + \"</p>\")\n        .style(\"left\", ((d) => {\n          var left_div_width = $('.Sidebar_parent').width()\n          return left_div_width - 125 + \"px\"\n        }))\n        .style(\"top\", (d3.event.pageY - 40) + \"px\")\n        .transition()\n        .duration(200)\n        .style(\"opacity\", .97);\n    })\n\n}","import * as d3 from 'd3';\nimport * as $ from 'jquery';\n//--------\nexport function sparklineGen(className, sparkline_data, key, model_name, original_data, state, year, appHandleChange, className2, sparkline_color, path_id) {\n  var temp_data = []\n  original_data.forEach(element => {\n    if (element['State'] == state && element[model_name]) {\n      temp_data.push({ year: parseInt(element['1-qid']), rank: parseInt(element[model_name]) })\n    }\n  });\n  var config = { labelKeyOffset: 55, radius: 3, sparkline_height: 20 }\n  var s_margin = { top: 0, right: 0, bottom: 0, left: 5 },\n    s_width = config.labelKeyOffset / 2,\n    s_height = config.sparkline_height - 2;\n  var s_svg = d3.selectAll(\".\"+className)\n  //var s_svg = d3.selectAll(\".\"+className).data([className],d=>d).join(\"svg\").attr(\"class\",className)\n    .attr(\"width\", s_width + s_margin.left + s_margin.right)\n    .attr(\"height\", s_height + s_margin.top + s_margin.bottom)\n  var data = temp_data\n  // Add X axis  \n  var x = d3.scaleLinear()\n    .domain(d3.extent(data, function (d) { return d.year; }))\n    .range([0, s_width]);\n  //---Add the area\n  s_svg.select(\"path\")\n    .datum(data, d => d)\n    .attr(\"id\", \"A\"+path_id)\n    .attr(\"fill\", sparkline_color) //#969696\n    .attr(\"stroke\", sparkline_color)\n    .attr(\"stroke-width\", (d) => {\n      return 1.5\n    })\n    .attr(\"d\", d3.area()\n      .x(function (d) { return x(d.year) })\n      .y0(function () {\n        var y = d3.scaleLinear().domain([0, d3.max(data, function (d) { return +d.rank; })]).range([s_height, 0]);\n        return y(0)\n      })\n      .y1(function (d) {\n        var y = d3.scaleLinear().domain([0, d3.max(data, function (d) { return +d.rank; })]).range([0, s_height]);\n        return y(d.rank)\n      })\n    )\n\n  var div = d3.select(\"body\").append(\"div\")\n    .attr(\"class\", \"tooltip\")\n    .style(\"opacity\", 0);\n  //------------Circles\n  s_svg.selectAll('circle').data(data).enter().append('circle')\n    .attr('cx', function (d, i) { return x(d.year) })\n    .attr('cy', s_height - 2)\n    .attr(\"class\", \"myid\" + className2)\n    .on(\"mouseover\", function (d) {\n      d3.select(this).style('fill', 'black')\n      d3.select(this).attr('r', 2)\n    })\n    .on(\"mouseout\", function (d) {\n      d3.select(this).style('fill', 'transparent')\n      var divid=\"#div\"+className\n      d3.selectAll(divid).remove()\n    })\n    .style('fill', (d) => d.year != year ? 'transparent' : 'black')\n    .attr('class', (d) => d.year != year ? 'transparent_class' : 'red_class')\n    .attr('r', 2)\n    .on('dblclick', (d, i) => {\n      d3.event.preventDefault();\n      appHandleChange(d.year, \"year_changed\")\n    })\n    .on('click', (d) => {\n      d3.select(\"body\").append(\"div\")\n        .attr(\"id\", \"div\"+className)\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0)\n        .html(\"<p>\" + \"Year: \" + d.year + \"</p>\" + \"<p>\" + \"Rank: \" + d.rank + \"</p>\")\n        .style(\"left\", ((d) => {\n          var left_div_width = $('.Sidebar_parent').width()\n          return left_div_width - 125 + \"px\"\n        }))\n        .style(\"top\", (d3.event.pageY - 40) + \"px\")\n        .transition()\n        .duration(200)\n        .style(\"opacity\", .97);\n    })\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport * as $ from 'jquery';\nimport * as slopechart1 from \"./slopechart1\";\nimport { connect } from \"react-redux\";\nimport Grid from '@material-ui/core/Grid';\n\n\nclass SlopeChart extends Component {\n  constructor(props) {\n    super(props);\n    this.line_color = null;\n    this.state = { height_slope_exp_chart: 700 }\n\n  }\n  componentDidMount() {\n    window.addEventListener('resize', () => {\n      this.setState({ width: window.innerWidth })\n      this.setState({ width: window.innerHeight })\n    });\n    this.CreateCharts()\n    this.setState({ width: window.innerHeight })\n  }\n  shouldComponentUpdate() {\n    return true;\n  }\n  componentDidUpdate(prevProps, prevState) {\n    //---- Animation replay starts\n    if (JSON.stringify(this.props.range_mode_range1) != JSON.stringify(prevProps.range_mode_range1)) {\n      //console.log(\"prev\",prevProps.range_mode_range1)\n      this.props.Set_prev_prop(prevProps)\n    }\n    if (this.props.selected_year !== prevProps.selected_year) {\n      this.props.Set_prev_prop(prevProps)\n    }//---- Animation replay ends\n\n    if (!this.props.replay) { // if replay is false\n      this.props.selected_year != prevProps.selected_year ? this.CreateCharts(\"animate\") : this.CreateCharts(\"dont_animate\")\n    }\n    else {\n      this.CreateCharts(\"dont_animate\")\n    }\n\n    //----------------------------------------------------------------------------------------------------------Set and unset Opacity\n    this.props.task2()\n  }\n  CreateCharts = (animate) => {\n    var state_range;\n    if (this.props.model_name == \"Range1\") { state_range = this.props.range_mode_range1 }\n    else {\n      state_range = this.props.range_mode_range2\n    }\n    //------------------------------------------------------\n    var mydata3 = { \"A\": [], \"B\": [] }\n    var deviate_by = this.props.deviate_by\n    var selected_by_year_data = this.props.grouped_by_year_data[this.props.selected_year] // This is the data passed a dictionay where year is the key\n    var max_rank = selected_by_year_data.length\n    var model_name = this.props.range_mode_model // This is the model name on the right side\n    //--------\n    var start_range = state_range != null ? state_range[0] : 10; // range to start\n    if (start_range > 0) { start_range -= 1 } // This is to start from index 0\n    if (start_range < 0) { start_range = 0 } // check if the deviation make the starting range less than the available rank\n    if (start_range < deviate_by) { deviate_by = start_range } // check if the deviation make the starting range less than the available rank\n    start_range = start_range - deviate_by\n    if (start_range < 0) { start_range = 0; deviate_by = 0 }\n    var deviate_check_lower = start_range + deviate_by + 1\n    //-----\n    deviate_by = this.props.deviate_by\n    var end_range = state_range != null ? state_range[1] : 25\n    var deviate_check_upper = end_range // Upper deviation check is this\n    end_range = end_range + deviate_by // changes the end range to include the deviation; next if checks when it goes beyond range\n    if (end_range > max_rank) {\n      deviate_check_upper = end_range - deviate_by; // set the upper range by subtracting the deviation\n      end_range = max_rank\n    }\n\n    for (var i = start_range; i < end_range; i++) {\n      var tempA = {}\n      var tempB = {}\n      tempA[\"Model\"] = model_name\n      tempA[\"name\"] = selected_by_year_data[i][\"State\"]\n      tempA[\"rank\"] = selected_by_year_data[i][\"two_realRank\"]\n      tempB[\"name\"] = selected_by_year_data[i][\"State\"]\n      tempB[\"rank\"] = selected_by_year_data[i][model_name]\n      mydata3[\"A\"].push(tempA)\n      mydata3[\"B\"].push(tempB)\n    }\n    //------------ Slopechart 1\n    slopechart1.CreateSlopeChart1(this.node, mydata3, start_range + 1, end_range, deviate_check_lower,\n      deviate_check_upper, this.props.model_name, this.props.selected_year, this.props.appHandleChange,\n      this.props.sparkline_data, this.props.original_data, this.props.histogram_data, this.props.textClickHandler_original,\n      this.color_gen(), animate, this.props.range_mode_model, this.props.config)\n    //------------        \n  }\n  color_gen = () => {\n    var my_state_range = [d3.min([this.props.range_mode_range1[0], this.props.range_mode_range2[0]]), d3.max([this.props.range_mode_range1[1], this.props.range_mode_range2[1]])] // Get the minimum and maximum from both\n    //------------------------------------------------------\n    var deviate_by = this.props.deviate_by\n    var selected_by_year_data = this.props.grouped_by_year_data[this.props.selected_year] // This is the data passed a dictionay where year is the key\n    var max_rank = selected_by_year_data.length\n    //--------\n    var start_range = my_state_range != null ? my_state_range[0] : 10; // range to start\n    if (start_range > 0) { start_range -= 1 } // This is to start from index 0\n    if (start_range < 0) { start_range = 0 } // check if the deviation make the starting range less than the available rank\n    if (start_range < deviate_by) { deviate_by = start_range } // check if the deviation make the starting range less than the available rank\n    start_range = start_range - deviate_by\n    if (start_range < 0) { start_range = 0; deviate_by = 0 }\n    var deviate_check_lower = start_range + deviate_by + 1\n    //-----\n    deviate_by = this.props.deviate_by\n    var end_range = my_state_range != null ? my_state_range[1] : 25\n    var deviate_check_upper = end_range // Upper deviation check is this\n    end_range = end_range + deviate_by // changes the end range to include the deviation; next if checks when it goes beyond range\n    if (end_range > max_rank) {\n      deviate_check_upper = end_range - deviate_by; // set the upper range by subtracting the deviation\n      end_range = max_rank\n    }\n    //---------------------------------------------------------------------------- Tracking starts here\n    var ref_year = this.props.ref_year\n    var track_states;\n    var track_states_ranged_dictionary = {}\n    if (this.props.tracking) {\n      var track_states_year_data = this.props.grouped_by_year_data[ref_year] // when tracking is activated we use reference year for color\n      var min = deviate_check_lower;\n      var max = deviate_check_upper;\n      for (var i = deviate_check_lower - 1; i < deviate_check_upper; i++) {\n        track_states_ranged_dictionary[track_states_year_data[i][\"State\"]] = track_states_year_data[i][\"two_realRank\"]\n      }\n      var d = (max - min) / 8;\n      var line_color2 = d3.scaleLinear().domain([min + d * 7, min + d * 6, min + d * 5, min + d * 4, min + d * 3, min + d * 2, min]).interpolate(d3.interpolateRgb).range(['#00429d', '#4771b2', '#73a2c6', '#a5d5d8', /*'#ffffe0',*/ '#ffbcaf', '#f4777f', '#cf3759', '#93003a']);\n      var Rgbdict = {}\n      for (var key in track_states_ranged_dictionary) {\n        Rgbdict[key] = line_color2(track_states_ranged_dictionary[key])\n      }\n      this.line_color = d3.scaleOrdinal().domain(Object.keys(Rgbdict)).range(Object.values(Rgbdict))\n      console.log(track_states_ranged_dictionary, min, max, Rgbdict, this.line_color.range())\n    }\n    //------------------------------If tracking is not activated\n    else {\n      var track_states_year_data = this.props.grouped_by_year_data[this.props.selected_year] // when tracking is not activated we use selected year for color\n      var track_states_ranged_dictionary = {}\n      for (var i = deviate_check_lower - 1; i < deviate_check_upper; i++) {\n        track_states_ranged_dictionary[track_states_year_data[i][\"State\"]] = track_states_year_data[i][\"two_realRank\"]\n      }\n      var min = deviate_check_lower;\n      var max = deviate_check_upper;\n      var d = (max - min) / 8;\n      var line_color2 = d3.scaleLinear().domain([min + d * 7, min + d * 6, min + d * 5, min + d * 4, min + d * 3, min + d * 2, min]).interpolate(d3.interpolateRgb).range(['#00429d', '#4771b2', '#73a2c6', '#a5d5d8', /*'#ffffe0',*/ '#ffbcaf', '#f4777f', '#cf3759', '#93003a']);\n      var Rgbdict = {}\n      for (var key in track_states_ranged_dictionary) {\n        Rgbdict[key] = line_color2(track_states_ranged_dictionary[key])\n      }\n      this.line_color = d3.scaleOrdinal().domain(Object.keys(Rgbdict)).range(Object.values(Rgbdict))\n      //console.log(Rgbdict,this.line_color.range())  \n    }\n    \n    //---------------------------------------------------------------------------- Tracking ends here \n    return this.line_color\n  }\n  render() {\n    return (\n      this.props.show.includes(\"Explanation\") ? <Grid container style={{ width: \"49.5%\", marginRight: \"0.5%\", marginTop: \"0.5%\", paddingRight: 0, border: \"1px solid #eaeaea\" }} key={JSON.stringify(this.props.range_mode_range1) + JSON.stringify(this.props.range_mode_range2)} className=\"Grid_container\">\n        <Grid item xs=\"6\" className={this.props.model_name == \"Range1\" ? \"slopechart range_chart_col range_chart_col_range1\" : \"slopechart range_chart_col range_chart_col_range2\"} style={{ width: '100%' }} >\n          <div className=\"slope_chart_title\">\n            <p>True Rank</p>\n            <p className=\"model_title\">{this.props.model_name == \"Range1\" ? \"Group 1\" : \"Group 2\"}</p>\n            <p>Predicted Rank</p>\n          </div>\n          <div className=\"mysvg\" ref={node => this.node = node}><svg id={this.props.model_name}><g id=\"myg\"></g></svg></div>\n        </Grid>\n        <Grid item xs=\"6\" className={this.props.model_name == \"Range1\" ? \"exp_chart exp_chart_range1\" : \"exp_chart exp_chart_range2\"}>\n          \n         \n        </Grid>\n\n      </Grid > :\n        <Grid item className={this.props.model_name == \"Range1\" ? \"range_chart_col range_chart_col_range1\" : \"range_chart_col range_chart_col_range2\"} style={{ marginTop: 5, border: \"1px solid #eaeaea\", width: \"48%\", marginRight: \"1%\", height: window.innerHeight - $('.uploader_topbar').height() }}>\n          <div className=\"slope_chart_title\">\n            <p>True Rank</p>\n            <p className=\"model_title\">{this.props.range_mode_model}</p>\n            <p>Predicted Rank</p>\n          </div>\n          <div className=\"mysvg\" ref={node => this.node = node}><svg id={this.props.model_name}><g id=\"myg\"></g></svg></div>\n        </Grid>\n    );\n  }\n\n}\nconst maptstateToprop = (state) => {\n  return {\n    deviate_by: state.deviate_by,\n    selected_year: state.selected_year,\n    range_mode_model: state.range_mode_model,\n    range_mode_range1: state.range_mode_range1,\n    range_mode_range2: state.range_mode_range2,\n    clicked_items_in_slopechart: state.clicked_items_in_slopechart,\n    replay: state.replay,\n    changed: state.changed,\n    popup_chart_data: state.popup_chart_data,\n    config: state.config,\n    show: state.show,\n\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n    Set_sparkline_data: (val) => dispatch({ type: \"sparkline_data\", value: val }),\n    Set_clicked_items_in_slopechart: (val) => dispatch({ type: \"clicked_items_in_slopechart\", value: val }),\n    Set_replay: (val) => dispatch({ type: \"replay\", value: val }),\n    Set_prev_prop: (val) => dispatch({ type: \"prev_prop\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(SlopeChart);","\nimport * as d3 from 'd3';\nimport * as $ from 'jquery';\nimport * as sparkline1 from \"./sparkline1\";\nimport * as sparkline2 from \"./sparkline2\";\nexport function CreateSlopeChart1(node, grouped_by_year_data, start_range, end_range, deviate_check_lower, deviate_check_upper, model_name, \n  year, appHandleChange, sparkline_data, original_data, histogram_data, textClickHandler_original, \n  line_color, animate, actual_model_for_range_and_time_mode,config) {\n  var base_height_between=18\n  // we don't need the delay here because the animations are happening one after the another\n  var slope_chart_anim1 = config.animation1\n  var slope_chart_anim2 = config.animation2\n  var number_of_elements = (end_range - start_range); // \n  var all_together = [];\n  grouped_by_year_data[\"A\"].forEach(function (d) { all_together.push(d); });\n  grouped_by_year_data[\"B\"].forEach(function (d) { all_together.push(d); });\n  var nestedByName = d3.nest().key(function (d) { return d.name }).entries(all_together);\n\n  //--------------------------------------------------------------------------------------------------------------------------------------------------------------Height management\n  var margin = { top: 10, right: 70, bottom: 10, left: 160 };\n  if (model_name == \"Range1\") {\n    var range_chart_col_range1_height = $('.slopechart_container').height(), \n    range_chart_col_range1_width = $('.range_chart_col_range1').width(),\n    width = range_chart_col_range1_width - margin.left - margin.right;\n  var height_between = range_chart_col_range1_height / number_of_elements\n  if(height_between<base_height_between){height_between=base_height_between}\n  var height = (number_of_elements * height_between)-10; // -10 is the bottom margin\n    d3.selectAll(\".range_chart_col_range1\").style(\"height\", height + \"px\");\n    d3.selectAll(\".exp_chart_range1\").style(\"height\", height + \"px!important\");\n  }\n  else {\n    var range_chart_col_range2_height = $('.slopechart_container').height(),\n    range_chart_col_range2_width = $('.range_chart_col_range2').width(),\n    width = range_chart_col_range2_width - margin.left - margin.right;\n  var height_between = range_chart_col_range2_height / number_of_elements\n  if(height_between<base_height_between){height_between=base_height_between}\n  var height = (number_of_elements * height_between)-10; // -10 is the bottom margin\n  d3.selectAll(\".range_chart_col_range2\").style(\"height\", height + \"px\");\n    d3.selectAll(\".slopechart_col\").style(\"height\", height + \"px\");\n    d3.selectAll(\".exp_chart\").style(\"height\", height + \"px\");\n    d3.selectAll(\".exp_chart_range2\").style(\"height\", height + \"px!important\");\n  }\n  height = height - 45 // This height is going to be used for slopechart\n  var config = { yOffset: 0, width: width, height: height, labelGroupOffset: 1, labelKeyOffset: 55, radius: 3, sparkline_height: height_between }\n  //--------------------------------------------------------------------------------------------------------------------------------------------------------------Height management\n  var yScale = d3.scaleLinear().range([0, height]).domain([start_range, end_range]);\n  var var_to_lift_up = yScale(nestedByName[0].values[0].rank); // nestedByName[5] places the 5th element at the beginning\n  var svg = d3.select(\"#\" + model_name).attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom)\n    .select(\"#myg\").attr('transform', `translate(150,10)`)\n\n  var borderLines = svg.selectAll(\".border-lines\").data([0]).join(\"g\").attr(\"class\", \"border-lines\") //--Ractangle that sets the boundary of lines  \n  borderLines.selectAll(\".line1\").data([0]).join(\"line\").attr(\"class\", \"line1\").attr(\"fill\", \"black\").attr(\"x1\", 0).attr(\"y1\", 0).attr(\"x2\", 0).attr(\"y2\", config.height); // left line x1,x2,y1 0 and y2 is the height\n  borderLines.selectAll(\".line2\").data([0]).join(\"line\").attr(\"class\", \"line2\").attr(\"fill\", \"black\").attr(\"x1\", width).attr(\"y1\", 0).attr(\"x2\", width).attr(\"y2\", config.height); // right line starts at x1,x2 at width and goes until height\n  //---------\n  var slopeGroups_upd = svg.selectAll(\".datapoint\").data(nestedByName, d => {\n    if (d !== undefined) {\n      return d.key;\n    }\n  }).join(onEnter, onUpdate, onExit)\n  //-----------------------------------------------------------------------------------------------------------------------------------------Enter function starts here\n  function onEnter(selection) {\n\n    const makeDatapoint = g => {\n      //-----------------------------------------------------------------------------------------------------------------------------------------state name text starts here\n      g.append(\"text\")\n        .attr(\"x\", d => -config.labelGroupOffset)\n        .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up)\n        .attr(\"dx\", -config.labelKeyOffset)\n        .attr(\"dy\", 3)\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"class\", (d) => {\n          return \"myid\" + d.values[0].rank + \" state_name\" + \" slopechart_text\"\n        })\n        .attr(\"text-anchor\", \"end\")\n        .on(\"mouseover\", function (d) { //-------Tooltip starts\t\t\n          var div = d3.select(\"body\").append(\"div\")\n            .attr(\"id\", \"div\" + d.key.replace(/ +/g, \"\"))\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0)\n          div.transition()\n            .duration(200)\n            .style(\"opacity\", .97)\n          div.html(\"<p>\" + d.key + \"</p>\" + \"<p>\" + \"Predicted rank: \" + d.values[1].rank + \"</p>\")\n            .style(\"left\", ((d) => {\n              var left_div_width = $('.Sidebar_parent').width()\n              return left_div_width - 125 + \"px\"\n            }))\n            .style(\"top\", (d3.event.pageY - 40) + \"px\");\n        })\n        .on(\"mouseout\", function (d) {\n          var myid = \"#div\" + d.key.replace(/ +/g, \"\")\n          d3.select(\"body\").selectAll(\".tooltip\").transition()\n            .duration(500)\n            .style(\"opacity\", 0).remove();\n        }) // Tooltip ends\n        .on(\"click\", function (d) {\n          return textClickHandler_original(\"A\" + d.key)\n          /*\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n            if (clicked_items_in_slopechart.includes(d.key.replace(/ +/g, \"\"))) { return textClickHandler_original(\"A\"+d.key) }\n          }\n          else { return textClickHandler_original(\"A\"+d.key) }\n          */\n        })\n        .text(d => {\n          var val = d.key\n          if (val.length > 15) { val = val.replace(\"University\", \"U\") }\n          return val.length > 15 ? val.substring(0, 15) : val\n        })\n        .attr(\"fill\", function (d) {\n          if (d.values[0].rank < deviate_check_lower) {\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else {\n            return line_color(d.key);\n          }\n        }) //state name text ends here\n      //-----------------------------------------------------------------------------------------------------------------------------------------Left sparkline starts here\n      g.append(\"svg\")\n        .attr('class', d => \"svg1 \" + model_name + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + 'original')\n        .attr(\"x\", d => {\n          return -config.labelGroupOffset - config.labelKeyOffset + 3;\n        })\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up - 14)\n        .append(\"path\")\n        .attr(\"class\", \"mypath\")\n        .attr(\"opacity\", d => {\n          var className = model_name + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + 'original'\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { var sparkline_color = \"grey\" } else { var sparkline_color = line_color(d.key) }\n          sparkline1.sparklineGen(className, sparkline_data, d.key.replace(/ /g, '').replace(/[^\\w\\s]/gi, ''), d.key, year, appHandleChange, d.values[0].rank, sparkline_color, d.key.replace(/ +/g, \"\"))\n          return 1;\n        }\n        )\n      //-----------------------------------------------------------------------------------------------------------------------------------------Left rank text starts here\n      g.append(\"text\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"class\", (d) => \"myid\" + d.values[0].rank + \" left_rank_text\" + \" slopechart_text\")\n        .attr(\"x\", d => -config.labelGroupOffset)\n        .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up)\n        .attr(\"dx\", -10)\n        .attr(\"dy\", 3)\n        .attr(\"text-anchor\", \"end\")\n        .text(d => (d.values[0].rank))\n        .attr(\"fill\", function (d) {\n          if (d.values[0].rank < deviate_check_lower) {\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else {\n            return line_color(d.key);\n          }\n        }); //rank text ends here\n      //-----------------------------------------------------------------------------------------------------------------------------------------circle starts\n      g.append(\"circle\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"r\", d => {\n          if (d.values[0].rank < deviate_check_lower) {\n            return 0\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return 0\n          }\n          else { return config.radius }\n        })\n        .attr(\"cy\", d => yScale(d.values[0].rank) - var_to_lift_up)\n        .attr(\"class\", (d) => {\n          return d.values[0].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + \" myid\" + d.values[0].rank + \" left_circle\"\n        })\n        .attr(\"fill\", function (d) {\n          if (d.values[0].rank < deviate_check_lower) {\n            //return line_color(d);\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            //return line_color(d);\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else {\n            return line_color(d.key);\n          }\n        }); //circle ends\n      //-----------------------------------------------------------------------------------------------------------------------------------------Slope lines starts here\n      g.append(\"line\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"class\", (d) => \"slope-line myid\" + d.values[0].rank)\n        .attr(\"x1\", 0)\n        .attr(\"x2\", config.width)\n        .on(\"click\", function (d) {\n          return textClickHandler_original(\"A\" + d.key)\n          // if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else { return textClickHandler_original(\"A\"+d.key) }\n        })\n        .attr(\"y1\", function (d) {\n          return yScale(d.values[0].rank) - var_to_lift_up;\n        })\n        .attr(\"y2\", function (d) {\n          return yScale(d.values[1].rank) - var_to_lift_up;\n        })\n        .attr(\"stroke\", (d) => {\n          if (d.values[0].rank < deviate_check_lower) {\n            return \"transparent\";\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return \"transparent\";\n          }\n          else {\n            return line_color(d.key)\n          }\n        })\n\n\n\n      //-----------------------------------------------------------------------------------------------------------------------------------------Right side   \n      //-----------------------------------------------------------------------------------------------------------------------------------------Right circle starts here      \n      g.append(\"circle\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"cy\", d => yScale(d.values[1].rank) - var_to_lift_up).attr(\"class\", (d) => {\n          return d.values[0].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + \" right_circle myid\" + d.values[0].rank\n        })\n        .attr(\"r\", d => {\n          if (d.values[0].rank < deviate_check_lower) {\n            return 0\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return 0\n          }\n          else { return config.radius }\n        })\n        .attr(\"cx\", config.width)\n        .attr(\"fill\", (d) => {\n          if (!(d.values[0].rank < deviate_check_lower | d.values[0].rank > deviate_check_upper)) {\n            return line_color(d.key);\n          }\n        });\n      //-----------------------------------------------------------------------------------------------------------------------------------------Right text - Ranks starts here\n      g.append(\"text\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"class\", (d) => \"slopechart_text right_rank_text myid\" + d.values[0].rank)\n        .attr(\"x\", d => width + config.labelGroupOffset)\n        .attr(\"y\", d => yScale(d.values[1].rank) - var_to_lift_up)\n        .attr(\"dx\", 10)\n        .attr(\"dy\", 3)\n        .attr(\"text-anchor\", \"start\")\n        .text(d => {\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n            return \"\";\n          }\n          else {\n            return d.values[1].rank\n          }\n        })\n        .attr(\"fill\", function (d) {\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n            return \"\";\n          }\n          else {\n            return line_color(d.key)\n          }\n        })\n        .on(\"click\", function (d) {\n          return textClickHandler_original(\"A\" + d.key)\n          // if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else { return textClickHandler_original(\"A\"+d.key) }\n        }); //Text - Ranks ends here\n      //-----------------------------------------------------------------------------------------------------------------------------------------Right sparkline starts here\n      g.append(\"svg\")\n        .attr('class', d => \"svg2 \" + model_name.replace(\".\", \"stupid\") + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '').split('.').join(' '))\n        .attr(\"x\", d => {\n          return width + config.labelGroupOffset + 25\n        })\n        .attr(\"y\", d => yScale(d.values[1].rank) - var_to_lift_up - 14)\n        .attr(\"width\", d => {\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n            return 0;\n          }\n        })\n        .append(\"path\")\n        .attr(\"class\", \"mypath2\")\n        .attr(\"opacity\", d => {\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else {\n            var className = model_name.replace(\".\", \"stupid\") + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '').split('.').join(' ')\n            sparkline2.sparklineGen(className, sparkline_data, d.key.replace(/ /g, '').replace(/[^\\w\\s]/gi, ''), actual_model_for_range_and_time_mode, original_data, d.key, year, appHandleChange, d.values[0].rank, line_color(d.key), d.key.replace(/ +/g, \"\"))\n            return 1;\n          }\n        })\n    }\n    return selection\n      .append(\"g\")\n      .attr(\"class\", \"datapoint\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .call(makeDatapoint);\n  }\n  //-----------------------------------------------------------------------------------------------------------------------------------------Onupdate starts here\n  function onUpdate(selection) {\n\n    //-----------------------------------------------------------------------------------------------------------------------------------------state name text ends here\n    selection.select(\".state_name\")\n      .attr(\"x\", -config.labelGroupOffset)\n      .attr(\"dx\", -config.labelKeyOffset)\n      .attr(\"dy\", 3)\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"class\", (d) => {\n        return \"slopechart_text myid\" + d.values[0].rank + \" state_name\"\n      })\n      .attr(\"text-anchor\", \"end\")\n      .on(\"mouseover\", function (d) { //-------Tooltip starts\t\t\n        var div = d3.select(\"body\").append(\"div\")\n          .attr(\"id\", \"div\" + d.key.replace(/ +/g, \"\"))\n          .attr(\"class\", \"tooltip\")\n          .style(\"opacity\", 0)\n        div.transition()\n          .duration(100)\n          .style(\"opacity\", .97)\n        div.html(\"<p>\" + d.key + \"</p>\" + \"<p>\" + \"Predicted rank: \" + d.values[1].rank + \"</p>\")\n          .style(\"left\", ((d) => {\n            var left_div_width = $('.Sidebar_parent').width()\n            return left_div_width - 125 + \"px\"\n          }))\n          .style(\"top\", (d3.event.pageY - 40) + \"px\");\n      })\n      .on(\"mouseout\", function (d) {\n        var myid = \"#div\" + d.key.replace(/ +/g, \"\")\n        d3.select(\"body\").selectAll(\".tooltip\").transition()\n          .duration(500)\n          .style(\"opacity\", 0).remove();\n      }) // Tooltip ends\n      .on(\"click\", function (d) {\n        return textClickHandler_original(\"A\" + d.key)\n        /*\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n          if (clicked_items_in_slopechart.includes(d.key.replace(/ +/g, \"\"))) { return textClickHandler_original(\"A\"+d.key) }\n        }\n        else { return textClickHandler_original(\"A\"+d.key) }\n        */\n      })\n      .text(d => {\n        var val = d.key\n        if (val.length > 15) { val = val.replace(\"University\", \"U\") }\n        return val.length > 15 ? val.substring(0, 15) : val\n      })\n      .attr(\"fill\", function (d) {\n        if (d.values[0].rank == 23) {\n\n        }\n        if ((d.values[0].rank < deviate_check_lower) || (d.values[0].rank > deviate_check_upper)) {\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else {\n          return line_color(d.key);\n        }\n      }).transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up)\n    //state name text ends here\n    //-----------------------------------------------------------------------------------------------------------------------------------------Left sparkline starts here\n    selection.select(\".svg1\")\n      .attr('class', d => \"svg1 \" + model_name + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + 'original')\n      .attr(\"x\", d => {\n        var className = model_name + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + 'original'\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { var sparkline_color = \"grey\" } else { var sparkline_color = line_color(d.key) }\n        sparkline1.sparklineGen(className, sparkline_data, d.key.replace(/ /g, '').replace(/[^\\w\\s]/gi, ''), d.key, year, appHandleChange, d.values[0].rank, sparkline_color, d.key.replace(/ +/g, \"\"))\n        return -config.labelGroupOffset - config.labelKeyOffset + 3;\n      })\n      .transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up - 14)\n      .attr(\"opacity\", 1)\n    //-----------------------------------------------------------------------------------------------------------------------------------------Left rank text starts here\n    selection.select(\".left_rank_text\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"class\", (d) => \"slopechart_text myid\" + d.values[0].rank + \" left_rank_text\")\n      .attr(\"x\", d => -config.labelGroupOffset)\n      .attr(\"dx\", -10)\n      .attr(\"dy\", 3)\n      .attr(\"text-anchor\", \"end\")\n      .text(d => (d.values[0].rank))\n      .attr(\"fill\", function (d) {\n        if (d.values[0].rank < deviate_check_lower) {\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else {\n          return line_color(d.key);\n        }\n      })\n      .transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up); //rank text ends here\n\n    //-----------------------------------------------------------------------------------------------------------------------------------------Left circle starts here\n    selection.select(\".left_circle\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"r\", d => {\n        if (d.values[0].rank < deviate_check_lower) {\n          return 0\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          return 0\n        }\n        else { return config.radius }\n      })\n      .attr(\"class\", (d) => {\n        return d.values[0].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + \" myid\" + d.values[0].rank + \" left_circle\"\n      })\n      .attr(\"fill\", function (d) {\n        if (d.values[0].rank < deviate_check_lower) {\n          //return line_color(d);\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          //return line_color(d);\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else {\n          return line_color(d.key);\n        }\n      })\n      .transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"cy\", d => yScale(d.values[0].rank) - var_to_lift_up); //left circle ends\n    //----------------------------------------------------------------------------------------------------------------------------------------- Slope lines starts here\n\n    selection.select(\".slope-line\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"class\", (d) => \"slope-line myid\" + d.values[0].rank)\n      .attr(\"x1\", 0)\n      .attr(\"x2\", config.width)\n      .on(\"click\", function (d) {\n        return textClickHandler_original(\"A\" + d.key)\n        // if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else { return textClickHandler_original(\"A\"+d.key) }\n      })\n      .attr(\"stroke\", (d) => {\n        if (d.values[0].rank < deviate_check_lower) {\n          return \"transparent\";\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          return \"transparent\";\n        }\n        else {\n          return line_color(d.key)\n        }\n      })\n      .transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y1\", function (d) {\n        return yScale(d.values[0].rank) - var_to_lift_up;\n      })\n      .transition().duration(d => { // we don't need to set delay here because this is happening one after another\n        if (animate == \"animate\") {\n          return slope_chart_anim2\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y2\", function (d) {\n        return yScale(d.values[1].rank);\n      }) // Right slope lines ends here\n    //-----------------------------------------------------------------------------------------------------------------------------------------Right side  \n    //-----------------------------------------------------------------------------------------------------------------------------------------Right circle starts here      \n    selection.select(\".right_circle\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"class\", (d) => {\n        return d.values[0].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + \" right_circle myid\" + d.values[0].rank\n      })\n      .attr(\"r\", d => {\n        if (d.values[0].rank < deviate_check_lower) {\n          return 0\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          return 0\n        }\n        else { return config.radius }\n      })\n      .attr(\"cx\", config.width)\n      .attr(\"cy\", d => {\n        return yScale(d.values[1].rank) - var_to_lift_up\n      })\n      .attr(\"fill\", (d) => {\n        if (!(d.values[0].rank < deviate_check_lower | d.values[0].rank > deviate_check_upper)) {\n          return line_color(d.key);\n        }\n      });\n    //-----------------------------------------------------------------------------------------------------------------------------------------Right text rank starts here\n    selection.select(\".right_rank_text\")\n      .attr(\"class\", (d) => \"slopechart_text right_rank_text myid\" + d.values[0].rank)\n      .attr(\"x\", d => width + config.labelGroupOffset)\n      .attr(\"y\", d => yScale(d.values[1].rank) - var_to_lift_up)\n      .attr(\"dx\", 10)\n      .attr(\"dy\", 3)\n      .attr(\"text-anchor\", \"start\")\n      .text(d => {\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n          return \"\";\n        }\n        else {\n          return d.values[1].rank\n        }\n      })\n      .attr(\"fill\", function (d) {\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n          return \"\";\n        }\n        else {\n          return line_color(d.key)\n        }\n      })\n      .on(\"click\", function (d) {\n        return textClickHandler_original(\"A\" + d.key)\n        // if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else { return textClickHandler_original(\"A\"+d.key) }\n      }); //Text - Ranks ends here\n    //-----------------------------------------------------------------------------------------------------------------------------------------Right sparkline starts here\n    selection.select(\".svg2\")\n      .attr('class', d => \"svg2 \" + model_name.replace(\".\", \"stupid\") + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '').split('.').join(' '))\n      .attr(\"x\", d => {\n        var className = model_name.replace(\".\", \"stupid\") + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '').split('.').join(' ')\n        sparkline2.sparklineGen(className, sparkline_data, d.key.replace(/ /g, '').replace(/[^\\w\\s]/gi, ''), actual_model_for_range_and_time_mode, original_data, d.key, year, appHandleChange, d.values[0].rank, line_color(d.key), d.key.replace(/ +/g, \"\"))\n        return width + config.labelGroupOffset + 27\n      })\n      .attr(\"y\", d => yScale(d.values[1].rank) - var_to_lift_up - 14)\n      .attr(\"width\", d => {\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n          return 0;\n        }\n      })\n\n  }\n\n  function onExit(selection) {\n    selection.remove();\n  }\n}\n","import * as d3 from 'd3';\nimport * as $ from 'jquery';\n//--------\nexport function sparklineGen(className, sparkline_data, key, state, year, appHandleChange, className2, sparkline_color, path_id) {\n  var config = { labelKeyOffset: 55, radius: 3, sparkline_height: 20 }\n  var s_margin = { top: 0, right: 0, bottom: 0, left: 4 },\n    s_width = config.labelKeyOffset / 2 - 5,\n    s_height = config.sparkline_height - 2;\n  var s_svg = d3.select(\".\"+className)\n    .attr(\"width\", s_width + s_margin.left + s_margin.right)\n    .attr(\"height\", s_height + s_margin.top + s_margin.bottom)\n  var data = sparkline_data[key]\n  // Add X axis  \n  var x = d3.scaleLinear()\n    .domain(d3.extent(data, function (d) { return d.year; }))\n    .range([0, s_width]);\n  //-----------------------------------------------------------------------------------------------------------------------------------------Add the area\n  s_svg.select(\"path\")\n    .datum(data, d => d)\n    .attr(\"id\", \"A\"+path_id)\n    .attr(\"opacity\",1)\n    .attr(\"fill\", sparkline_color) //#969696\n    .attr(\"stroke\", sparkline_color)\n    .attr(\"stroke-width\", (d) => {\n      return 1.5\n    })\n    .attr(\"d\", d3.area()\n      .x(function (d) { return x(d.year) })\n      .y0(function () {\n        var y = d3.scaleLinear().domain([0, d3.max(data, function (d) { return +d.rank; })]).range([s_height, 0]);\n        return y(0)\n      })\n      .y1(function (d) {\n        var y = d3.scaleLinear().domain([0, d3.max(data, function (d) { return +d.rank; })]).range([0, s_height]);\n        return y(d.rank)\n      })\n    )\n  //------------Circles\n  s_svg.selectAll('circle').data(data).join('circle')\n    .attr('cx', function (d, i) { return x(d.year) })\n    .attr('cy', s_height - 2)\n    .attr(\"class\", \"myid\" + className2)\n    .on(\"mouseover\", function (d) {\n      d3.select(this).style('fill', 'black')\n      d3.select(this).attr('r', 3)\n    })\n    .style('fill', (d) => d.year != year ? 'transparent' : 'black')\n    .attr('class', (d) => d.year != year ? 'transparent_class' : 'red_class')\n    .attr('r', 2)\n    .on('dblclick', (d, i) => {\n      d3.event.preventDefault();\n      appHandleChange(d.year, \"year_changed\")\n    })\n    .on(\"mouseout\", function (d) {\n      d3.select(this).style('fill', 'transparent')\n      var divid=\"#div\"+className\n      d3.selectAll(divid).remove()\n    })\n    .on('click', (d) => {\n      d3.select(\"body\").append(\"div\")\n        .attr(\"id\", \"div\"+className)\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0)\n        .html(\"<p>\" + \"Year: \" + d.year + \"</p>\" + \"<p>\" + \"Rank: \" + d.rank + \"</p>\")\n        .style(\"left\", ((d) => {\n          var left_div_width = $('.Sidebar_parent').width()\n          return left_div_width - 125 + \"px\"\n        }))\n        .style(\"top\", (d3.event.pageY - 40) + \"px\")\n        .transition()\n        .duration(200)\n        .style(\"opacity\", .97);\n    })\n\n}","import * as d3 from 'd3';\nimport * as $ from 'jquery';\n//--------\nexport function sparklineGen(className, sparkline_data, key, model_name, original_data, state, year, appHandleChange, className2, sparkline_color, path_id) {\n  var temp_data = []\n  original_data.forEach(element => {\n    if (element['State'] == state && element[model_name]) {\n      temp_data.push({ year: parseInt(element['1-qid']), rank: parseInt(element[model_name]) })\n    }\n  });\n  var config = { labelKeyOffset: 55, radius: 3, sparkline_height: 20 }\n  var s_margin = { top: 0, right: 0, bottom: 0, left: 5 },\n    s_width = config.labelKeyOffset / 2,\n    s_height = config.sparkline_height - 2;\n  var s_svg = d3.selectAll(\".\"+className)\n  //var s_svg = d3.selectAll(\".\"+className).data([className],d=>d).join(\"svg\").attr(\"class\",className)\n    .attr(\"width\", s_width + s_margin.left + s_margin.right)\n    .attr(\"height\", s_height + s_margin.top + s_margin.bottom)\n  var data = temp_data\n  // Add X axis  \n  var x = d3.scaleLinear()\n    .domain(d3.extent(data, function (d) { return d.year; }))\n    .range([0, s_width]);\n  //---Add the area\n  s_svg.select(\"path\")\n    .datum(data, d => d)\n    .attr(\"id\", \"A\"+path_id)\n    .attr(\"fill\", sparkline_color) //#969696\n    .attr(\"stroke\", sparkline_color)\n    .attr(\"stroke-width\", (d) => {\n      return 1.5\n    })\n    .attr(\"d\", d3.area()\n      .x(function (d) { return x(d.year) })\n      .y0(function () {\n        var y = d3.scaleLinear().domain([0, d3.max(data, function (d) { return +d.rank; })]).range([s_height, 0]);\n        return y(0)\n      })\n      .y1(function (d) {\n        var y = d3.scaleLinear().domain([0, d3.max(data, function (d) { return +d.rank; })]).range([0, s_height]);\n        return y(d.rank)\n      })\n    )\n\n  var div = d3.select(\"body\").append(\"div\")\n    .attr(\"class\", \"tooltip\")\n    .style(\"opacity\", 0);\n  //------------Circles\n  s_svg.selectAll('circle').data(data).enter().append('circle')\n    .attr('cx', function (d, i) { return x(d.year) })\n    .attr('cy', s_height - 2)\n    .attr(\"class\", \"myid\" + className2)\n    .on(\"mouseover\", function (d) {\n      d3.select(this).style('fill', 'black')\n      d3.select(this).attr('r', 2)\n    })\n    .on(\"mouseout\", function (d) {\n      d3.select(this).style('fill', 'transparent')\n      var divid=\"#div\"+className\n      d3.selectAll(divid).remove()\n    })\n    .style('fill', (d) => d.year != year ? 'transparent' : 'black')\n    .attr('class', (d) => d.year != year ? 'transparent_class' : 'red_class')\n    .attr('r', 2)\n    .on('dblclick', (d, i) => {\n      d3.event.preventDefault();\n      appHandleChange(d.year, \"year_changed\")\n    })\n    .on('click', (d) => {\n      d3.select(\"body\").append(\"div\")\n        .attr(\"id\", \"div\"+className)\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0)\n        .html(\"<p>\" + \"Year: \" + d.year + \"</p>\" + \"<p>\" + \"Rank: \" + d.rank + \"</p>\")\n        .style(\"left\", ((d) => {\n          var left_div_width = $('.Sidebar_parent').width()\n          return left_div_width - 125 + \"px\"\n        }))\n        .style(\"top\", (d3.event.pageY - 40) + \"px\")\n        .transition()\n        .duration(200)\n        .style(\"opacity\", .97);\n    })\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport * as $ from 'jquery';\nimport * as slopechart1 from \"./slopechart1\";\nimport { connect } from \"react-redux\";\nimport Grid from '@material-ui/core/Grid';\nclass SlopeChart extends Component {\n  constructor(props) {\n    super(props);\n    this.myRef = React.createRef();\n  }\n  componentDidMount() {\n    this.setState({ random: 0 })\n  }\n  componentDidUpdate(prevProps, prevState) {\n    //---- Animation replay starts\n    if (JSON.stringify(this.props.time_mode_range) != JSON.stringify(prevProps.time_mode_range)) {\n      this.props.Set_prev_prop(prevProps)\n    }\n    if (this.props.time_mode_year1 !== prevProps.time_mode_year1) {\n      this.props.Set_prev_prop(prevProps)\n    }\n    if (this.props.time_mode_year2 !== prevProps.time_mode_year2) {\n      this.props.Set_prev_prop(prevProps)\n    }\n    //---- Animation replay ends\n\n    if (!this.props.replay) { // if replay is false\n      this.props.time_mode_range[0] != prevProps.time_mode_range[0] ? this.task1(\"dont_animate\") : this.task1(\"animate\")\n    }\n    else {\n      this.task1(\"dont_animate\")\n    }\n    this.props.task2()\n  }\n  task1 = (animate) => {\n    var selected_year;\n    if (this.props.model_name == \"Year1\") { selected_year = this.props.time_mode_year1 } else { selected_year = this.props.time_mode_year2 }\n    var state_range = this.props.time_mode_range\n    var mydata3 = { \"A\": [], \"B\": [] }\n    var deviate_by = this.props.deviate_by\n    var selected_by_year_data = this.props.grouped_by_year_data[selected_year] // This is the data passed a dictionay where year is the key\n    var max_rank = selected_by_year_data.length\n    var model_name = this.props.time_mode_model // This is the model name on the right side\n    var cmodel = this.props.cmodel // This is the selected model for color in case of sorting by predicted rank\n    //--------\n    var start_range = state_range != null ? state_range[0] : 10; // range to start\n    if (start_range > 0) { start_range -= 1 } // This is to start from index 0\n    if (start_range < 0) { start_range = 0 } // check if the deviation make the starting range less than the available rank\n    if (start_range < deviate_by) { deviate_by = start_range } // check if the deviation make the starting range less than the available rank\n    start_range = start_range - deviate_by\n    if (start_range < 0) { start_range = 0; deviate_by = 0 }\n    var deviate_check_lower = start_range + deviate_by + 1\n    //-----\n    deviate_by = this.props.deviate_by\n    var end_range = state_range != null ? state_range[1] : 25\n    var deviate_check_upper = end_range // Upper deviation check is this\n    end_range = end_range + deviate_by // changes the end range to include the deviation; next if checks when it goes beyond range\n    if (end_range > max_rank) {\n      deviate_check_upper = end_range - deviate_by; // set the upper range by subtracting the deviation\n      end_range = max_rank\n    }\n\n    for (var i = start_range; i < end_range; i++) {\n      var tempA = {}\n      var tempB = {}\n      tempA[\"Model\"] = model_name\n      tempA[\"name\"] = selected_by_year_data[i][\"State\"]\n      tempA[\"rank\"] = selected_by_year_data[i][\"two_realRank\"]\n      tempB[\"name\"] = selected_by_year_data[i][\"State\"]\n      tempB[\"rank\"] = selected_by_year_data[i][model_name]\n      mydata3[\"A\"].push(tempA)\n      mydata3[\"B\"].push(tempB)\n    }\n    //------------ Slopechart 1\n    slopechart1.CreateSlopeChart1(this.node, mydata3, start_range + 1, end_range, deviate_check_lower,\n      deviate_check_upper, this.props.model_name, selected_year, this.props.appHandleChange,\n      this.props.sparkline_data, this.props.original_data, this.props.histogram_data, this.props.textClickHandler_original,\n      this.color_gen(), animate, this.props.time_mode_model, this.props.config)\n    //------------        \n\n  }\n  color_gen = () => {\n    var selected_year;\n    if (this.props.model_name == \"Year1\") { selected_year = this.props.time_mode_year1 } else { selected_year = this.props.time_mode_year2 }\n    //------------------------------------------------------\n    var deviate_by = this.props.deviate_by\n    var selected_by_year_data = this.props.grouped_by_year_data[selected_year] // This is the data passed a dictionay where year is the key\n    var max_rank = selected_by_year_data.length\n    //--------\n    var start_range = this.props.time_mode_range != null ? this.props.time_mode_range[0] : 10; // range to start\n    if (start_range > 0) { start_range -= 1 } // This is to start from index 0\n    if (start_range < 0) { start_range = 0 } // check if the deviation make the starting range less than the available rank\n    if (start_range < deviate_by) { deviate_by = start_range } // check if the deviation make the starting range less than the available rank\n    start_range = start_range - deviate_by\n    if (start_range < 0) { start_range = 0; deviate_by = 0 }\n    var deviate_check_lower = start_range + deviate_by + 1\n    //-----\n    deviate_by = this.props.deviate_by\n    var end_range = this.props.time_mode_range != null ? this.props.time_mode_range[1] : 25\n    var deviate_check_upper = end_range // Upper deviation check is this\n    end_range = end_range + deviate_by // changes the end range to include the deviation; next if checks when it goes beyond range\n    if (end_range > max_rank) {\n      deviate_check_upper = end_range - deviate_by; // set the upper range by subtracting the deviation\n      end_range = max_rank\n    }\n    //---------------------------------------------------------------------------- Tracking starts here\n    var track_states_ranged_dictionary = {}\n    var track_states_year_data = this.props.grouped_by_year_data[selected_year] // when tracking is not activated we use selected year for color\n    var track_states_ranged_dictionary = {}\n    for (var i = deviate_check_lower - 1; i < deviate_check_upper; i++) {\n      track_states_ranged_dictionary[track_states_year_data[i][\"State\"]] = track_states_year_data[i][\"two_realRank\"]\n    }\n    var min = deviate_check_lower;\n    var max = deviate_check_upper;\n    var d = (max - min) / 8;\n    var line_color2 = d3.scaleLinear().domain([min + d * 7, min + d * 6, min + d * 5, min + d * 4, min + d * 3, min + d * 2, min]).interpolate(d3.interpolateRgb).range(['#00429d', '#4771b2', '#73a2c6', '#a5d5d8', /*'#ffffe0',*/ '#ffbcaf', '#f4777f', '#cf3759', '#93003a']);\n    var Rgbdict = {}\n    for (var key in track_states_ranged_dictionary) {\n      Rgbdict[key] = line_color2(track_states_ranged_dictionary[key])\n    }\n    this.line_color = d3.scaleOrdinal().domain(Object.keys(Rgbdict)).range(Object.values(Rgbdict))\n    \n    //---------------------------------------------------------------------------- Tracking ends here \n    return this.line_color\n  }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  render() {\n    return (\n      this.props.show.includes(\"Explanation\") ? <Grid container style={{ width: \"49.5%\", marginRight: \"0.5%\", marginTop: \"0.5%\", paddingRight: 0, border: \"1px solid #eaeaea\"}} className=\"slopechart\">\n        <Grid item xs=\"6\" className=\"slopechart_col\">\n          <div className=\"slope_chart_title\">\n            <p>True Rank</p>\n            <p className=\"model_title\">{this.props.model_name == \"Year1\" ? \"Year 1\" : \"Year 2\"}</p>\n            <p>Predicted Rank</p>\n          </div>\n          <div className=\"mysvg\" ref={node => this.node = node}><svg id={this.props.model_name}><g id=\"myg\"></g></svg></div>\n        </Grid>\n        <Grid item xs=\"6\" className=\"exp_chart\" >\n         \n        </Grid>\n      </Grid > :\n        <Grid item className=\"slopechart_col\" style={{ marginTop: 5, border: \"1px solid #eaeaea\", width: \"48%\", marginRight: \"1%\" }}>\n          <div className=\"slope_chart_title\">\n            <p>True Rank</p>\n            <p className=\"model_title\">{this.props.time_mode_model} ({this.props.model_name == \"Year1\" ? this.props.time_mode_year1 : this.props.time_mode_year2})</p>\n            <p>Predicted Rank</p>\n          </div>\n          <div className=\"mysvg\" ref={node => this.node = node}><svg id={this.props.model_name}><g id=\"myg\"></g></svg></div>\n        </Grid>\n    );\n  }\n\n}\n\n\nconst maptstateToprop = (state) => {\n  return {\n    selected_year: state.selected_year,\n    time_mode_model: state.time_mode_model,\n    time_mode_range: state.time_mode_range,\n    deviate_by: state.deviate_by,\n    time_mode_year1: state.time_mode_year1,\n    time_mode_year2: state.time_mode_year2,\n    clicked_items_in_slopechart: state.clicked_items_in_slopechart,\n    replay: state.replay,\n    popup_chart_data: state.popup_chart_data,\n    config: state.config,\n    show: state.show,\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_prev_prop: (val) => dispatch({ type: \"prev_prop\", value: val }),\n    Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n    Set_sparkline_data: (val) => dispatch({ type: \"sparkline_data\", value: val }),\n    Set_clicked_items_in_slopechart: (val) => dispatch({ type: \"clicked_items_in_slopechart\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(SlopeChart);","\nimport * as d3 from 'd3';\nimport * as $ from 'jquery';\nimport * as sparkline1 from \"./sparkline1\";\nimport * as sparkline2 from \"./sparkline2\";\nexport function CreateSlopeChart1(node, grouped_by_year_data, start_range, end_range, deviate_check_lower, deviate_check_upper, \n  model_name, year, appHandleChange, sparkline_data, original_data, histogram_data, textClickHandler_original, line_color, \n  animate, actual_model_for_range_and_time_mode,config) {\n  var base_height_between=18\n  // we don't need the delay here because the animations are happening one after the another\n  var slope_chart_anim1 = config.animation1\n  var slope_chart_anim2 = config.animation2\n  var number_of_elements = (end_range - start_range); // \n  var all_together = [];\n  grouped_by_year_data[\"A\"].forEach(function (d) { all_together.push(d); });\n  grouped_by_year_data[\"B\"].forEach(function (d) { all_together.push(d); });\n  var nestedByName = d3.nest().key(function (d) { return d.name }).entries(all_together);\n  //----------------------------------------------------------------------------------------------Height management\n  var margin = { top: 10, right: 70, bottom: 10, left: 160 };\n  var slopechart_col_height = $('.slopechart_container').height(),\n    slopechart_col_width = $('.slopechart_col').width(),\n    width = slopechart_col_width - margin.left - margin.right;\n  var height_between = slopechart_col_height / number_of_elements\n  if(height_between<base_height_between){height_between=base_height_between}\n  var height = (number_of_elements * height_between)-10 // -10 is the bottom margin\n  \n  d3.selectAll(\".slopechart_col\").style(\"height\",height+\"px\");\n  d3.selectAll(\".exp_chart\").style(\"height\", height + \"px\");\n\n  height = height - 45 // This height is going to be used for slopechart\n  var config = { yOffset: 0, width: width, height: height, labelGroupOffset: 1, labelKeyOffset: 55, radius: 3, sparkline_height: height_between }\n  //----------------------------------------------------------------------------------------------Height management\n  var yScale = d3.scaleLinear().range([0, height]).domain([start_range, end_range]);\n  var var_to_lift_up = yScale(nestedByName[0].values[0].rank); // nestedByName[5] places the 5th element at the beginning\n  var svg = d3.select(\"#\" + model_name).attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom)\n    .select(\"#myg\").attr('transform', `translate(150,10)`)\n\n  var borderLines = svg.selectAll(\".border-lines\").data([0]).join(\"g\").attr(\"class\", \"border-lines\") //--Ractangle that sets the boundary of lines  \n  borderLines.selectAll(\".line1\").data([0]).join(\"line\").attr(\"class\", \"line1\").attr(\"fill\", \"black\").attr(\"x1\", 0).attr(\"y1\", 0).attr(\"x2\", 0).attr(\"y2\", config.height); // left line x1,x2,y1 0 and y2 is the height\n  borderLines.selectAll(\".line2\").data([0]).join(\"line\").attr(\"class\", \"line2\").attr(\"fill\", \"black\").attr(\"x1\", width).attr(\"y1\", 0).attr(\"x2\", width).attr(\"y2\", config.height); // right line starts at x1,x2 at width and goes until height\n  //---------\n  var slopeGroups_upd = svg.selectAll(\".datapoint\").data(nestedByName, d => {\n    if (d !== undefined) {\n      return d.key;\n    }\n  }).join(onEnter, onUpdate, onExit)\n  //-----------------------------------------------------------------------------------------------------------------------------------------Enter function starts here\n  function onEnter(selection) {\n\n    const makeDatapoint = g => {\n      //-----------------------------------------------------------------------------------------------------------------------------------------state name text starts here\n      g.append(\"text\")\n        .attr(\"x\", d => -config.labelGroupOffset)\n        .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up)\n        .attr(\"dx\", -config.labelKeyOffset)\n        .attr(\"dy\", 3)\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"class\", (d) => {\n          return \"myid\" + d.values[0].rank + \" state_name\" + \" slopechart_text\"\n        })\n        .attr(\"text-anchor\", \"end\")\n        .on(\"mouseover\", function (d) { //-------Tooltip starts\t\t\n          var div = d3.select(\"body\").append(\"div\")\n            .attr(\"id\", \"div\" + d.key.replace(/ +/g, \"\"))\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0)\n          div.transition()\n            .duration(200)\n            .style(\"opacity\", .97)\n          div.html(\"<p>\" + d.key + \"</p>\" + \"<p>\" + \"Predicted rank: \" + d.values[1].rank + \"</p>\")\n            .style(\"left\", ((d) => {\n              var left_div_width = $('.Sidebar_parent').width()\n              return left_div_width - 125 + \"px\"\n            }))\n            .style(\"top\", (d3.event.pageY - 40) + \"px\");\n        })\n        .on(\"mouseout\", function (d) {\n          var myid = \"#div\" + d.key.replace(/ +/g, \"\")\n          d3.select(\"body\").selectAll(\".tooltip\").transition()\n            .duration(500)\n            .style(\"opacity\", 0).remove();\n        }) // Tooltip ends\n        .on(\"click\", function (d) {\n          return textClickHandler_original(\"A\" + d.key)\n          /*\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n            if (clicked_items_in_slopechart.includes(d.key.replace(/ +/g, \"\"))) { return textClickHandler_original(\"A\"+d.key) }\n          }\n          else { return textClickHandler_original(\"A\"+d.key) }\n          */\n        })\n        .text(d => {\n          var val = d.key\n          if (val.length > 15) { val = val.replace(\"University\", \"U\") }\n          return val.length > 15 ? val.substring(0, 15) : val\n        })\n        .attr(\"fill\", function (d) {\n          if (d.values[0].rank < deviate_check_lower) {\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else {\n            return line_color(d.key);\n          }\n        }) //state name text ends here\n      //-----------------------------------------------------------------------------------------------------------------------------------------Left sparkline starts here\n      g.append(\"svg\")\n        .attr('class', d => \"svg1 \" + model_name + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + 'original')\n        .attr(\"x\", d => {\n          return -config.labelGroupOffset - config.labelKeyOffset + 3;\n        })\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up - 14)\n        .append(\"path\")\n        .attr(\"class\", \"mypath\")\n        .attr(\"opacity\", d => {\n          var className = model_name + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + 'original'\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { var sparkline_color = \"grey\" } else { var sparkline_color = line_color(d.key) }\n          sparkline1.sparklineGen(className, sparkline_data, d.key.replace(/ /g, '').replace(/[^\\w\\s]/gi, ''), d.key, year, appHandleChange, d.values[0].rank, sparkline_color, d.key.replace(/ +/g, \"\"))\n          return 1;\n        }\n        )\n      //-----------------------------------------------------------------------------------------------------------------------------------------Left rank text starts here\n      g.append(\"text\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"class\", (d) => \"myid\" + d.values[0].rank + \" left_rank_text\" + \" slopechart_text\")\n        .attr(\"x\", d => -config.labelGroupOffset)\n        .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up)\n        .attr(\"dx\", -10)\n        .attr(\"dy\", 3)\n        .attr(\"text-anchor\", \"end\")\n        .text(d => (d.values[0].rank))\n        .attr(\"fill\", function (d) {\n          if (d.values[0].rank < deviate_check_lower) {\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else {\n            return line_color(d.key);\n          }\n        }); //rank text ends here\n      //-----------------------------------------------------------------------------------------------------------------------------------------circle starts\n      g.append(\"circle\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"r\", d => {\n          if (d.values[0].rank < deviate_check_lower) {\n            return 0\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return 0\n          }\n          else { return config.radius }\n        })\n        .attr(\"cy\", d => yScale(d.values[0].rank) - var_to_lift_up)\n        .attr(\"class\", (d) => {\n          return d.values[0].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + \" myid\" + d.values[0].rank + \" left_circle\"\n        })\n        .attr(\"fill\", function (d) {\n          if (d.values[0].rank < deviate_check_lower) {\n            //return line_color(d);\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            //return line_color(d);\n            return \"rgb(110, 112, 112,.5)\";\n          }\n          else {\n            return line_color(d.key);\n          }\n        }); //circle ends\n      //-----------------------------------------------------------------------------------------------------------------------------------------Slope lines starts here\n      g.append(\"line\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"class\", (d) => \"slope-line myid\" + d.values[0].rank)\n        .attr(\"x1\", 0)\n        .attr(\"x2\", config.width)\n        .on(\"click\", function (d) {\n          return textClickHandler_original(\"A\" + d.key)\n          // if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else { return textClickHandler_original(\"A\"+d.key) }\n        })\n        .attr(\"y1\", function (d) {\n          return yScale(d.values[0].rank) - var_to_lift_up;\n        })\n        .attr(\"y2\", function (d) {\n          return yScale(d.values[1].rank) - var_to_lift_up;\n        })\n        .attr(\"stroke\", (d) => {\n          if (d.values[0].rank < deviate_check_lower) {\n            return \"transparent\";\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return \"transparent\";\n          }\n          else {\n            return line_color(d.key)\n          }\n        })\n\n\n\n      //-----------------------------------------------------------------------------------------------------------------------------------------Right side   \n      //-----------------------------------------------------------------------------------------------------------------------------------------Right circle starts here      \n      g.append(\"circle\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"cy\", d => yScale(d.values[1].rank) - var_to_lift_up).attr(\"class\", (d) => {\n          return d.values[0].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + \" right_circle myid\" + d.values[0].rank\n        })\n        .attr(\"r\", d => {\n          if (d.values[0].rank < deviate_check_lower) {\n            return 0\n          }\n          else if (d.values[0].rank > deviate_check_upper) {\n            return 0\n          }\n          else { return config.radius }\n        })\n        .attr(\"cx\", config.width)\n        .attr(\"fill\", (d) => {\n          if (!(d.values[0].rank < deviate_check_lower | d.values[0].rank > deviate_check_upper)) {\n            return line_color(d.key);\n          }\n        });\n      //-----------------------------------------------------------------------------------------------------------------------------------------Right text - Ranks starts here\n      g.append(\"text\")\n        .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n        .attr(\"class\", (d) => \"slopechart_text right_rank_text myid\" + d.values[0].rank)\n        .attr(\"x\", d => width + config.labelGroupOffset)\n        .attr(\"y\", d => yScale(d.values[1].rank) - var_to_lift_up)\n        .attr(\"dx\", 10)\n        .attr(\"dy\", 3)\n        .attr(\"text-anchor\", \"start\")\n        .text(d => {\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n            return \"\";\n          }\n          else {\n            return d.values[1].rank\n          }\n        })\n        .attr(\"fill\", function (d) {\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n            return \"\";\n          }\n          else {\n            return line_color(d.key)\n          }\n        })\n        .on(\"click\", function (d) {\n          return textClickHandler_original(\"A\" + d.key)\n          // if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else { return textClickHandler_original(\"A\"+d.key) }\n        }); //Text - Ranks ends here\n      //-----------------------------------------------------------------------------------------------------------------------------------------Right sparkline starts here\n      g.append(\"svg\")\n        .attr('class', d => \"svg2 \" + model_name.replace(\".\", \"stupid\") + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '').split('.').join(' '))\n        .attr(\"x\", d => {\n          return width + config.labelGroupOffset + 25\n        })\n        .attr(\"y\", d => yScale(d.values[1].rank) - var_to_lift_up - 14)\n        .attr(\"width\", d => {\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n            return 0;\n          }\n        })\n        .append(\"path\")\n        .attr(\"class\", \"mypath2\")\n        .attr(\"opacity\", d => {\n          if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else {\n            var className = model_name.replace(\".\", \"stupid\") + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '').split('.').join(' ')\n            sparkline2.sparklineGen(className, sparkline_data, d.key.replace(/ /g, '').replace(/[^\\w\\s]/gi, ''), actual_model_for_range_and_time_mode, original_data, d.key, year, appHandleChange, d.values[0].rank, line_color(d.key), d.key.replace(/ +/g, \"\"))\n            return 1;\n          }\n        })\n    }\n    return selection\n      .append(\"g\")\n      .attr(\"class\", \"datapoint\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .call(makeDatapoint);\n  }\n  //-----------------------------------------------------------------------------------------------------------------------------------------Onupdate starts here\n  function onUpdate(selection) {\n\n    //-----------------------------------------------------------------------------------------------------------------------------------------state name text ends here\n    selection.select(\".state_name\")\n      .attr(\"x\", -config.labelGroupOffset)\n      .attr(\"dx\", -config.labelKeyOffset)\n      .attr(\"dy\", 3)\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"class\", (d) => {\n        return \"slopechart_text myid\" + d.values[0].rank + \" state_name\"\n      })\n      .attr(\"text-anchor\", \"end\")\n      .on(\"mouseover\", function (d) { //-------Tooltip starts\t\t\n        var div = d3.select(\"body\").append(\"div\")\n          .attr(\"id\", \"div\" + d.key.replace(/ +/g, \"\"))\n          .attr(\"class\", \"tooltip\")\n          .style(\"opacity\", 0)\n        div.transition()\n          .duration(100)\n          .style(\"opacity\", .97)\n        div.html(\"<p>\" + d.key + \"</p>\" + \"<p>\" + \"Predicted rank: \" + d.values[1].rank + \"</p>\")\n          .style(\"left\", ((d) => {\n            var left_div_width = $('.Sidebar_parent').width()\n            return left_div_width - 125 + \"px\"\n          }))\n          .style(\"top\", (d3.event.pageY - 40) + \"px\");\n      })\n      .on(\"mouseout\", function (d) {\n        var myid = \"#div\" + d.key.replace(/ +/g, \"\")\n        d3.select(\"body\").selectAll(\".tooltip\").transition()\n          .duration(500)\n          .style(\"opacity\", 0).remove();\n      }) // Tooltip ends\n      .on(\"click\", function (d) {\n        return textClickHandler_original(\"A\" + d.key)\n        /*\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n          if (clicked_items_in_slopechart.includes(d.key.replace(/ +/g, \"\"))) { return textClickHandler_original(\"A\"+d.key) }\n        }\n        else { return textClickHandler_original(\"A\"+d.key) }\n        */\n      })\n      .text(d => {\n        var val = d.key\n        if (val.length > 15) { val = val.replace(\"University\", \"U\") }\n        return val.length > 15 ? val.substring(0, 15) : val\n      })\n      .attr(\"fill\", function (d) {\n        if (d.values[0].rank == 23) {\n\n        }\n        if ((d.values[0].rank < deviate_check_lower) || (d.values[0].rank > deviate_check_upper)) {\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else {\n          return line_color(d.key);\n        }\n      }).transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up)\n    //state name text ends here\n    //-----------------------------------------------------------------------------------------------------------------------------------------Left sparkline starts here\n    selection.select(\".svg1\")\n      .attr('class', d => \"svg1 \" + model_name + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + 'original')\n      .attr(\"x\", d => {\n        var className = model_name + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + 'original'\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { var sparkline_color = \"grey\" } else { var sparkline_color = line_color(d.key) }\n        sparkline1.sparklineGen(className, sparkline_data, d.key.replace(/ /g, '').replace(/[^\\w\\s]/gi, ''), d.key, year, appHandleChange, d.values[0].rank, sparkline_color, d.key.replace(/ +/g, \"\"))\n        return -config.labelGroupOffset - config.labelKeyOffset + 3;\n      })\n      .transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up - 14)\n      .attr(\"opacity\", 1)\n    //-----------------------------------------------------------------------------------------------------------------------------------------Left rank text starts here\n    selection.select(\".left_rank_text\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"class\", (d) => \"slopechart_text myid\" + d.values[0].rank + \" left_rank_text\")\n      .attr(\"x\", d => -config.labelGroupOffset)\n      .attr(\"dx\", -10)\n      .attr(\"dy\", 3)\n      .attr(\"text-anchor\", \"end\")\n      .text(d => (d.values[0].rank))\n      .attr(\"fill\", function (d) {\n        if (d.values[0].rank < deviate_check_lower) {\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else {\n          return line_color(d.key);\n        }\n      })\n      .transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y\", d => yScale(d.values[0].rank) - var_to_lift_up); //rank text ends here\n\n    //-----------------------------------------------------------------------------------------------------------------------------------------Left circle starts here\n    selection.select(\".left_circle\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"r\", d => {\n        if (d.values[0].rank < deviate_check_lower) {\n          return 0\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          return 0\n        }\n        else { return config.radius }\n      })\n      .attr(\"class\", (d) => {\n        return d.values[0].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + \" myid\" + d.values[0].rank + \" left_circle\"\n      })\n      .attr(\"fill\", function (d) {\n        if (d.values[0].rank < deviate_check_lower) {\n          //return line_color(d);\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          //return line_color(d);\n          return \"rgb(110, 112, 112,.5)\";\n        }\n        else {\n          return line_color(d.key);\n        }\n      })\n      .transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"cy\", d => yScale(d.values[0].rank) - var_to_lift_up); //left circle ends\n    //----------------------------------------------------------------------------------------------------------------------------------------- Slope lines starts here\n\n    selection.select(\".slope-line\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"class\", (d) => \"slope-line myid\" + d.values[0].rank)\n      .attr(\"x1\", 0)\n      .attr(\"x2\", config.width)\n      .on(\"click\", function (d) {\n        return textClickHandler_original(\"A\" + d.key)\n        // if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else { return textClickHandler_original(\"A\"+d.key) }\n      })\n      .attr(\"stroke\", (d) => {\n        if (d.values[0].rank < deviate_check_lower) {\n          return \"transparent\";\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          return \"transparent\";\n        }\n        else {\n          return line_color(d.key)\n        }\n      })\n      .transition().duration(d => {\n        if (animate == \"animate\") {\n          return slope_chart_anim1\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y1\", function (d) {\n        return yScale(d.values[0].rank) - var_to_lift_up;\n      })\n      .transition().duration(d => { // we don't need to set delay here because this is happening one after another\n        if (animate == \"animate\") {\n          return slope_chart_anim2\n        }\n        else {\n          return 0\n        }\n      })\n      .attr(\"y2\", function (d) {\n        return yScale(d.values[1].rank);\n      }) // Right slope lines ends here\n    //-----------------------------------------------------------------------------------------------------------------------------------------Right side  \n    //-----------------------------------------------------------------------------------------------------------------------------------------Right circle starts here      \n    selection.select(\".right_circle\")\n      .attr(\"id\", d => \"A\" + d.key.replace(/ +/g, \"\"))\n      .attr(\"class\", (d) => {\n        return d.values[0].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '') + \" right_circle myid\" + d.values[0].rank\n      })\n      .attr(\"r\", d => {\n        if (d.values[0].rank < deviate_check_lower) {\n          return 0\n        }\n        else if (d.values[0].rank > deviate_check_upper) {\n          return 0\n        }\n        else { return config.radius }\n      })\n      .attr(\"cx\", config.width)\n      .attr(\"cy\", d => {\n        return yScale(d.values[1].rank) - var_to_lift_up\n      })\n      .attr(\"fill\", (d) => {\n        if (!(d.values[0].rank < deviate_check_lower | d.values[0].rank > deviate_check_upper)) {\n          return line_color(d.key);\n        }\n      });\n    //-----------------------------------------------------------------------------------------------------------------------------------------Right text rank starts here\n    selection.select(\".right_rank_text\")\n      .attr(\"class\", (d) => \"slopechart_text right_rank_text myid\" + d.values[0].rank)\n      .attr(\"x\", d => width + config.labelGroupOffset)\n      .attr(\"y\", d => yScale(d.values[1].rank) - var_to_lift_up)\n      .attr(\"dx\", 10)\n      .attr(\"dy\", 3)\n      .attr(\"text-anchor\", \"start\")\n      .text(d => {\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n          return \"\";\n        }\n        else {\n          return d.values[1].rank\n        }\n      })\n      .attr(\"fill\", function (d) {\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n          return \"\";\n        }\n        else {\n          return line_color(d.key)\n        }\n      })\n      .on(\"click\", function (d) {\n        return textClickHandler_original(\"A\" + d.key)\n        // if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) { } else { return textClickHandler_original(\"A\"+d.key) }\n      }); //Text - Ranks ends here\n    //-----------------------------------------------------------------------------------------------------------------------------------------Right sparkline starts here\n    selection.select(\".svg2\")\n      .attr('class', d => \"svg2 \" + model_name.replace(\".\", \"stupid\") + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '').split('.').join(' '))\n      .attr(\"x\", d => {\n        var className = model_name.replace(\".\", \"stupid\") + d.values[1].name.replace(/ /g, '').replace(/[^\\w\\s]/gi, '').split('.').join(' ')\n        sparkline2.sparklineGen(className, sparkline_data, d.key.replace(/ /g, '').replace(/[^\\w\\s]/gi, ''), actual_model_for_range_and_time_mode, original_data, d.key, year, appHandleChange, d.values[0].rank, line_color(d.key), d.key.replace(/ +/g, \"\"))\n        return width + config.labelGroupOffset + 27\n      })\n      .attr(\"y\", d => yScale(d.values[1].rank) - var_to_lift_up - 14)\n      .attr(\"width\", d => {\n        if (d.values[0].rank < deviate_check_lower || d.values[0].rank > deviate_check_upper) {\n          return 0;\n        }\n      })\n\n  }\n\n  function onExit(selection) {\n    selection.remove();\n  }\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Fade from '@material-ui/core/Fade';\nimport { connect } from \"react-redux\";\nimport * as algo1 from \"../../Algorithms/algo1\";\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nfunction FadeMenu(props) {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  //------------For list and chckbox\n  const [checked, setChecked] = React.useState([0]);\n  const [selected_states, setSelected_states] = React.useState([]);\n  const handleToggle = (value) => () => {\n    const currentIndex = checked.indexOf(value);\n    const newChecked = [...checked];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n    setChecked(newChecked);\n  };\n  //----------------\n  const show_checkboxChanged = (event) => {\n    var myfunc = props.appHandleChange\n    myfunc(event.target.value, \"show_checkboxChanged\")\n  }\n  const checkboxChanged = (event) => {\n    var temp_Models;\n    if (props.defualt_models.includes(event.target.value)) {\n      temp_Models = props.defualt_models.filter(item => {\n        if (item != event.target.value)\n          return item\n      })\n      temp_Models = algo1.sort(props.sort_by, props.state_range, temp_Models, props.selected_year, props.grouped_by_year_data)[0];\n      props.Set_defualt_models(temp_Models)\n      props.Set_pop_over_models(temp_Models)\n    }\n    else {\n      temp_Models = props.defualt_models\n      temp_Models.push(event.target.value)\n      temp_Models = algo1.sort(props.sort_by, props.state_range, temp_Models, props.selected_year, props.grouped_by_year_data)[0];\n      props.Set_defualt_models(temp_Models)\n      props.Set_pop_over_models(temp_Models)\n    }\n    var myfunc = props.appHandleChange\n    myfunc(event.target.value, \"clicked_model\")\n  }\n  return (\n    <div style={{ borderRight: \"1px dashed #eaeaea\" }}>\n      <Button aria-controls=\"fade-menu\" aria-haspopup=\"true\" onClick={handleClick}>\n        Select Model\n        <ArrowDropDownIcon></ArrowDropDownIcon>\n      </Button>\n      <Menu\n        id=\"fade-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n        TransitionComponent={Fade}\n      >\n        <div className=\"CheckboxContainer\">\n          <List>\n            {[ \"MART\",\"RandomFor\",\"LinearReg\",\"CordAscent\", \"LambdaMART\", \"LambdaRank\",\"RankBoost\", \"RankNet\"].map((value) => {\n              const labelId = `checkbox-list-label-${value}`;\n              return (\n                <ListItem key={value} role={undefined} onClick={handleToggle(value)}>\n                  <Checkbox\n                    checked={props.defualt_models.includes(value)}\n                    edge=\"start\"\n                    tabIndex={-1}\n                    value={value}\n                    onChange={(event, value) => {\n                      checkboxChanged(event, value)\n                    }\n                    }\n                  />\n                  <p className=\"list_item_label\" id={labelId}>{value}</p>\n                </ListItem>\n              );\n            })}\n          </List>\n        </div>\n      </Menu>\n    </div>\n  );\n}\nconst maptstateToprop = (state) => {\n  return {\n    defualt_models: state.defualt_models,\n    sort_by: state.sort_by,\n    state_range: state.state_range,\n    selected_year: state.selected_year,\n    grouped_by_year_data: state.grouped_by_year_data,\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n    Set_pop_over_models: (val) => dispatch({ type: \"pop_over_models\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(FadeMenu);\n//https://material-ui.com/components/menus/\n","import React from 'react';\nimport { connect } from \"react-redux\";\nimport Button from '@material-ui/core/Button';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Radio from '@material-ui/core/Radio';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Menu from '@material-ui/core/Menu';\nimport Fade from '@material-ui/core/Fade';\nimport * as algo1 from \"../../Algorithms/algo1\";\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nfunction Sort(props) {\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [sort_by, set_sort_by] = React.useState(props.sort_by);\n    const open = Boolean(anchorEl);\n    const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n    const handleradioChange = (event) => {\n        set_sort_by(event.target.value)\n        if(event.target.value==\"None\"){var val=\"Alphabetically\"}\n        else{var val=event.target.value}\n        props.Set_sort_by(val)\n        var temp_Models = algo1.sort(val, props.state_range, props.defualt_models, props.selected_year,props.grouped_by_year_data)[0];\n        var default_model_scores = algo1.sort(val, props.state_range, props.defualt_models, props.selected_year,props.grouped_by_year_data)[1];\n        props.Set_default_model_scores(default_model_scores)\n        props.Set_defualt_models(temp_Models)\n      };\n    return (\n        <div className=\"sort\" style={{borderRight:\"1px dashed #eaeaea\"}}>\n            <Button aria-controls=\"fade-menu\" aria-haspopup=\"true\" onClick={handleClick}>Select Metrics <ArrowDropDownIcon></ArrowDropDownIcon></Button>\n            <Menu\n                id=\"fade-menu\"\n                anchorEl={anchorEl}\n                keepMounted\n                open={open}\n                onClose={handleClose}\n                TransitionComponent={Fade}\n            >\n            <FormControl component=\"fieldset\">\n                <FormLabel component=\"legend\"></FormLabel>\n                <RadioGroup aria-label=\"gender\" name=\"gender1\" value={sort_by} onChange={handleradioChange}>\n                    {['Discounted Cumulative Gain', 'Average Precision', 'None'].map((value) => {\n                        return <FormControlLabel value={value} control={<Radio />} label={value} />\n                    })}\n                </RadioGroup>\n            </FormControl>\n            </Menu>\n        </div>\n    );\n}\nconst maptstateToprop = (state) => {\n    return {\n        defualt_models: state.defualt_models,\n        sort_by:state.sort_by,\n        state_range: state.state_range,\n        selected_year: state.selected_year,\n        grouped_by_year_data:state.grouped_by_year_data,\n    }\n}\nconst mapdispatchToprop = (dispatch) => {\n    return {\n        Set_sort_by: (val) => dispatch({ type: \"sort_by\", value: val }),\n        Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n        Set_default_model_scores: (val) => dispatch({ type: \"default_model_scores\", value: val }),\n    }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(Sort);\n//https://material-ui.com/components/menus/\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport \"./TopBar.scss\";\nimport TextField from '@material-ui/core/TextField';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport * as d3 from 'd3';\nimport DefaultModels from './DefaultModels'\nimport Sort from './Sort'\nimport { connect } from \"react-redux\";\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport * as algo1 from \"../../Algorithms/algo1\"\nconst useStyles = makeStyles((theme) => ({\n  MuiAutocompleteroot: {\n    marginTop: 0,\n  },\n  root: {\n    width: '100%',\n  },\n  listroot: {\n    width: '100%',\n    maxWidth: 360,\n  },\n  paper: {\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n}));\nfunction TopBar(props) {\n  const classes = useStyles();\n  const handleyearChange = (event, value, reason) => {\n    if (reason == 'select-option') {\n      props.Set_selected_year(value)\n      var myfunc = props.appHandleChange\n      myfunc(value, \"year_changed\")\n    }\n  };\n  var handle_year_click = (year) => {\n    if(year==\"All\"){props.Set_selected_years([...props.years_for_dropdown])}\n    else{\n      if (props.selected_years.includes(year)) {\n        props.Set_selected_years(props.selected_years.filter(item=>item!=year))\n      }\n      else {\n        props.Set_selected_years([...props.selected_years,year])\n      }  \n    }\n  }\n  var handle_model_click=(model)=>{\n    if(model==\"All\"){props.Set_defualt_models([...props.all_models])}\n    else if(model==\"Average\"){props.Set_average_m(!props.average_m)}\n    else{\n      if (props.defualt_models.includes(model)) {\n        props.Set_defualt_models(props.defualt_models.filter(item=>item!=model))\n      }\n      else {\n        props.Set_defualt_models([...props.defualt_models,model])\n      }  \n    }\n  }\n  return (\n    <div>\n    <div><h5 style={{ display: \"inline-block\", marginLeft: 30 }}>Years:</h5>{props.years_for_dropdown.map(item => <p className={props.selected_years.includes(item) ? \"years_p_selected years_p\" : \"years_p\"} onClick={() => handle_year_click(item)}>{item}</p>)}<p className=\"years_p\" style={{ display: \"inline-block\"}} onClick={() => handle_year_click(\"All\")}>All</p> <p className=\"years_p\" style={{ display: \"inline-block\"}}>Average</p></div>\n    <div><h5 style={{ display: \"inline-block\", marginLeft: 30 }}>Models:</h5>{props.all_models.map(item => <p className={props.defualt_models.includes(item) ? \"years_p_selected years_p\" : \"years_p\"} onClick={() => handle_model_click(item)}>{item}</p>)}<p className=\"years_p\" style={{ display: \"inline-block\"}} onClick={() => handle_model_click(\"All\")}>All</p> <p className={props.average_m ? \"years_p_selected years_p\" : \"years_p\"} style={{ display: \"inline-block\"}} onClick={() => handle_model_click(\"Average\")}>Average</p></div>\n    </div>\n  );\n}\nconst maptstateToprop = (state) => {\n  return {\n    all_models:state.all_models,\n    selected_years: state.selected_years,\n    tracking: state.tracking,\n    selected_year: state.selected_year,\n    years_for_dropdown: state.years_for_dropdown,\n    defualt_models: state.defualt_models,\n    mode: state.mode,\n    prev_prop: state.prev_prop,\n    state_range: state.state_range,\n    replay: state.replay,\n    grouped_by_year_data: state.grouped_by_year_data,\n    clicked_items_in_slopechart: state.clicked_items_in_slopechart,\n    range_mode_range1: state.range_mode_range1,\n    range_mode_range2: state.range_mode_range2,\n    time_mode_range: state.time_mode_range,\n    mode: state.mode, // Model mode model\n    sort_by: state.sort_by,\n    average_m:state.average_m\n\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    add: (val) => dispatch({ type: \"add\", value: val }),\n    Set_selected_years: (val) => dispatch({ type: \"selected_years\", value: val }),\n    Set_selected_year: (val) => dispatch({ type: \"selected_year\", value: val }),\n    set_tracking: (val) => dispatch({ type: \"tracking\", value: val }),\n    Set_histogram_data: (val) => dispatch({ type: \"histogram_data\", value: val }),\n    Set_changed: (val) => dispatch({ type: \"changed\", value: val }),\n    Set_state_range: (val) => dispatch({ type: \"state_range\", value: val }),\n    Set_slider_max: (val) => dispatch({ type: \"slider_max\", value: val }),\n    Set_range_mode_range1: (val) => dispatch({ type: \"range_mode_range1\", value: val }),\n    Set_range_mode_range2: (val) => dispatch({ type: \"range_mode_range2\", value: val }),\n    Set_time_mode_range: (val) => dispatch({ type: \"time_mode_range\", value: val }),\n    Set_pop_over_models: (val) => dispatch({ type: \"pop_over_models\", value: val }),\n    Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n    Set_default_model_scores: (val) => dispatch({ type: \"default_model_scores\", value: val }),\n    Set_average_m: (val) => dispatch({ type: \"average_m\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(TopBar);\n\n//https://material-ui.com/api/slider/\n//https://material-ui.com/components/expansion-panels/\n//https://material-ui.com/api/checkbox/\n//https://material-ui.com/components/radio-buttons/","import * as d3 from 'd3';\nimport * as $ from \"jquery\"\nexport default function CreateChart(feature, data, node, feature_height, selected_year, handleHistogramselection, feature_data) {\n  var feature_width = $(\".Sidebar_parent\").width()\n  var svg = d3.select(node),\n    margin = { top: 30, right: 15, bottom: 20, left: 7 },\n    width = feature_width - margin.left - margin.right,\n    height = feature_height - margin.top - margin.bottom;\n  if (isNaN(data[0].y)) {\n    //-----------------------------------------------------------(handle the categorical features here)\n    var occur = {}\n    data.map(item => {\n      if (item.y in occur) {\n        occur[item.y] = occur[item.y] + 1\n      }\n      else {\n        occur[item.y] = 1\n      }\n    })\n    // Create items array\n    var items = Object.keys(occur).map(function (key) {\n      return [key, occur[key]];\n    });\n\n    // Sort the array based on the second element\n    items.sort(function (first, second) {\n      return second[1] - first[1];\n    });\n    //-----\n    var y = items.map(element => element[0]);\n    var x = items.map(element => element[1]);\n    var sum_x = d3.sum(x)\n    var cScale = d3.scaleSequential()\n      .interpolator(d3.interpolate(\"#999999b3\", \"#999999b3\"))\n      .domain([0, x.length]);\n    svg.selectAll(\".hist_title\").data([0]).join(\"text\").attr(\"class\", \"hist_title\").attr(\"y\", 15).attr(\"x\", width / 2).attr(\"text-anchor\", \"middle\").text(feature);\n    var g = svg.selectAll(\".g1\").data([0]).join(\"g\").attr(\"class\", \"g1\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    var svg1 = g.selectAll(\".svg1\").data([0]).join('svg').attr(\"class\", \"svg1\").attr('width', width).attr('height', height)\n    svg1.selectAll('rect').data(x).join(\"rect\")\n      .style('fill', (d, i) => cScale(i)).attr(\"height\", height)\n      .attr('width', (d, i) => {\n        return (((d / sum_x) * width) - .2)\n      })\n      .attr(\"x\", (d, i) => {\n        var temp_sum = d3.sum(x.slice(0, i))\n        return ((temp_sum / sum_x) * width)\n      })\n      .attr(\"id\", (d, i) => y[i])\n      .on(\"click\", (d, i) => {\n        d3.select(\"#\" + y[i]).classed(\"cat_item_clicked\", () => {\n          if (d3.select(\"#\" + y[i]).classed(\"cat_item_clicked\")) {\n\n            return false\n          }\n          else {\n            var statelist = cat_states(feature_data, selected_year, y[i])\n            handleHistogramselection(statelist, \"histogram_data\")\n            return true\n          }\n        })\n\n      }\n      )\n    //---\n    svg1.selectAll(\"text\").data(y, d => d).join(\"text\")\n      .text((d, i) => {\n        if (((x[i] / sum_x) * width) > 12) { return d }\n        else { return \"\" }\n      })\n      .attr(\"x\", (d, i) => {\n        var temp_sum = d3.sum(x.slice(0, i))\n        return ((temp_sum / sum_x) * width) + 8\n      })\n      .attr(\"y\", height / 2)\n      .style(\"font-size\", 9)\n      .style(\"writing-mode\", \"tb\")\n      .style(\"text-anchor\", \"middle\")\n    //-----------------------------------------------------------Barchart ends here\n  }\n  else {\n    //----------------------------------------------------------- Handle the Numeric features here)\n    svg.selectAll(\".hist_title\").data([feature], d => d).join(\"text\").attr(\"class\", \"hist_title\").attr(\"y\", 15).attr(\"x\", width / 2).attr(\"text-anchor\", \"middle\").text(feature.replace(/_/g, ' '));\n\n    var temp_x = data.map(item => parseFloat(item['y'])),\n      x = d3.scaleLinear().domain([d3.min(temp_x), d3.max(temp_x)]).range([0, width]).nice(),\n      tick_values = x.ticks(4),\n      hist_height = height,\n      histogram = d3.histogram()\n        .value(d => d)   // I need to give the vector of value\n        .domain(x.domain())  // then the domain of the graphic\n        .thresholds(4); // then the numbers of bins\n    var bins = histogram(temp_x),\n      y_hist = d3.scaleLinear()\n        .range([hist_height, 0]);\n    y_hist.domain([0, d3.max(bins, function (d) { return d.length; })]);   // d3.hist has to be called before the Y axis obviously\n    var svg0 = svg.selectAll('.svg0').data([0]).join('svg').attr(\"class\", \"svg0\").selectAll(\".myg0\").data([0]).join('g').attr(\"class\", \"myg0\").attr(\"transform\",\n      \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n    svg0.selectAll(\"rect\").data(bins).join('rect')\n      .attr(\"x\", 1)\n      .attr(\"fill\", \"#999999b3\")\n      .attr(\"transform\", function (d) {\n        if(d.x0==d.x1){return \"translate(\" + 0 + \",\" + y_hist(d.length) + \")\"}\n        return \"translate(\" + x(d.x0) + \",\" + y_hist(d.length) + \")\";\n      })\n      .attr(\"width\", function (d) { \n        if(d.x0==d.x1){return width}\n        return x(d.x1) - x(d.x0) - 0.2; })\n      .attr(\"height\", function (d) { return hist_height - y_hist(d.length); });\n    //-------Add text of bars\n    \n    svg0.selectAll(\".mylabel\").data(bins).join('text').attr(\"class\",\"mylabel\")\n      .attr(\"x\", d=>x(d.x0)+((x(d.x1)-x(d.x0))/3))\n      .text(d=>d.length)\n      .attr('y',d=> y_hist(d.length)-2)\n      .attr('font-size',10)\n  \n    //------------- Add X axis\n    if(d3.max(tick_values)>1000){\n      svg0.selectAll(\".myXaxis\").data([0]).join('g').attr(\"class\", \"myXaxis\")\n      .attr(\"transform\", \"translate(0,\" + hist_height + \")\")\n      .call(d3.axisBottom(x).tickValues(tick_values).tickFormat(d3.format(\".2s\")))\n    }\n    else{\n      svg0.selectAll(\".myXaxis\").data([0]).join('g').attr(\"class\", \"myXaxis\")\n      .attr(\"transform\", \"translate(0,\" + hist_height + \")\")\n      .call(d3.axisBottom(x).tickValues(tick_values))\n    }\n\n    svg0.selectAll(\".tick line,.domain\").attr(\"stroke\", \"#adadad\")\n\n    //------------------------------------------------------------------------------------------------------ Create Histogram ends here    \n    //---drag starts here\n    var selectionRect = {\n      element: null,\n      previousElement: null,\n      currentY: 0,\n      currentX: 0,\n      originX: 0,\n      originY: 0,\n      setElement: function (ele) {\n        this.previousElement = this.element;\n        this.element = ele;\n      },\n      getNewAttributes: function () {\n        var x = this.currentX < this.originX ? this.currentX : this.originX;\n        var y = this.currentY < this.originY ? this.currentY : this.originY;\n        var width = Math.abs(this.currentX - this.originX);\n        var height = Math.abs(this.currentY - this.originY);\n        return { x: x, y: y, width: width, height: height }; // returning the javascript object\n      },\n      getCurrentAttributes: function () {\n        // use plus sign to convert string into number\n        var x = +this.element.attr(\"x\");\n        var y = +this.element.attr(\"y\");\n        var width = +this.element.attr(\"width\");\n        var height = +this.element.attr(\"height\");\n        return { x1: x, y1: y, x2: x + width, y2: y + height }; // returning the javascript object\n      },\n      getCurrentAttributesAsText: function () {\n        var attrs = this.getCurrentAttributes();\n        return \"x1: \" + attrs.x1 + \" x2: \" + attrs.x2 + \" y1: \" + attrs.y1 + \" y2: \" + attrs.y2;\n      },\n      init: function (newX, newY) {\n        var rectElement = svg.append(\"rect\")\n          .attr('rx', 1).attr('ry', 1).attr(\"x\", 0).attr(\"y\", 0)\n          .attr('width', 0).attr('height', 0).classed(\"selection\", true);\n        this.setElement(rectElement);\n        this.originX = newX;\n        this.originY = newY;\n        this.update(newX, newY);\n      },\n      update: function (newX, newY) {\n        this.currentX = newX;\n        this.currentY = newY;\n        var NewAttr = this.getNewAttributes()\n        this.element.attr(\"x\", NewAttr.x).attr(\"y\", NewAttr.y)\n          .attr('width', NewAttr.width).attr('height', NewAttr.height)\n      },\n      focus: function () {\n        this.element\n          .style(\"stroke\", \"\")\n          .style(\"stroke-width\", \"1\");\n      },\n      remove: function () {\n        this.element.remove();\n        this.element = null;\n      },\n      removePrevious: function () {\n        if (this.previousElement) {\n          this.previousElement.remove();\n        }\n      }\n    };\n\n    //-----------------\n    function dragStart() {\n      var p = d3.mouse(this);\n      selectionRect.init(p[0], p[1]);\n      selectionRect.removePrevious();\n    }\n    function dragMove() {\n      var p = d3.mouse(this);\n      selectionRect.update(p[0], p[1]);\n    }\n    function dragEnd() {\n      var finalAttributes = selectionRect.getCurrentAttributes();\n      if (finalAttributes.x1 != finalAttributes.x2) {\n        var myx1 = finalAttributes.x1 - margin.left\n        var myx2 = finalAttributes.x2 - margin.left\n        var temp_range = [x.invert(myx1).toFixed(4), x.invert(myx2).toFixed(4)]\n        var statelist = states(feature_data, temp_range, selected_year, feature)\n        handleHistogramselection(statelist, \"histogram_data\")\n      }\n      if (finalAttributes.x2 - finalAttributes.x1 > 1 && finalAttributes.y2 - finalAttributes.y1 > 1) {\n        // range selected\n        d3.event.sourceEvent.preventDefault();\n        selectionRect.focus();\n      } else {\n        selectionRect.remove();\n      }\n    }\n    var dragBehavior = d3.drag()\n      .on(\"start\", dragStart)\n      .on(\"drag\", dragMove)\n      .on(\"end\", dragEnd);\n    svg.call(dragBehavior);\n    //---drag ends here\n  }\n  function states(original_data,range,year,feature){\n    var temp=[]\n    original_data.forEach(element => {\n      if(element[\"1-qid\"]==year && parseFloat(element[feature])>=range[0] && parseFloat(element[feature])<=range[1]){\n       temp.push(parseInt(element['two_realRank']))\n      }\n    });\n    return temp;\n  }\n  function cat_states(original_data,year,country){\n    var temp=[]\n    original_data.forEach(element => {\n      if(element[\"1-qid\"]==year && element[\"country\"]==country){\n       temp.push(parseInt(element['two_realRank']))\n      }\n    });\n    return temp;\n  }\n  //----------------------------------------------------------- Histogram creation ends here\n}\n\n//https://www.youtube.com/watch?v=N9nHQzboCUI","import React, { Component, PureComponent } from 'react';\nimport * as d3 from 'd3';\nimport './Histogram.css';\nimport * as algo1 from \"../../Algorithms/algo1\";\nimport CreateChart from \"./Histogram\"\nimport exp_fiscal_CordAscent from \"../../Data/data/fiscal/lime/chart1_data.csv\";\nimport exp_school_CordAscent from \"../../Data/data/school/lime/chart1_data.csv\";\nimport exp_house_CordAscent from \"../../Data/data/house/lime/chart1_data.csv\";\nimport { connect } from 'react-redux'\nimport { Button } from '@material-ui/core';\nimport * as $ from \"jquery\"\nclass Chart extends Component {\n  constructor(props) {\n    super(props);\n    this.myRef = React.createRef();\n    this.state = { feaures_dict: {}, features_voted: null, feature_data: null, selected_states: [] } // This is the default height\n  }\n  componentDidMount() {\n    var self = this\n    var filename; if (this.props.dataset == \"fiscal\") { filename = exp_fiscal_CordAscent } else if (this.props.dataset == \"school\") { filename = exp_school_CordAscent } else if (this.props.dataset == \"house\") { filename = exp_house_CordAscent }\n    d3.csv(filename).then(function (feature_data) {\n      self.setState({ feature_data: feature_data })\n    })\n  }\n  shouldComponentUpdate() {\n    return true;\n  }\n  componentDidUpdate() {\n    var self = this\n    var legend_data = this.makeArr(this.props.state_range);\n    //------\n    var height_between = 20\n    var feature_height = 260\n    var number_of_elements = (this.props.state_range[1] - this.props.state_range[0]) + (2 * this.props.deviate_by);\n    if (number_of_elements * height_between < 700) { height_between = 700 / number_of_elements }\n    var exp_chart_height = (number_of_elements * height_between);\n    var number_of_charts = Math.floor(exp_chart_height / feature_height) * 3\n    if(number_of_charts<9){number_of_charts=9}\n    //------\n    var features_dict = algo1.features_with_score(this.props.dataset, this.props.defualt_models, legend_data, this.props.selected_year,number_of_charts,this.props.rank_data)\n    var items = Object.keys(features_dict).map(function (key) {\n      return [key, features_dict[key]];\n    });\n    items.sort(function (first, second) { // Sort the array based on the second element\n      return second[1] - first[1];\n    });\n    items = items.map((element) => element[0])\n    //--------\n    var filename; if (this.props.dataset == \"fiscal\") { filename = exp_fiscal_CordAscent } else if (this.props.dataset == \"school\") { filename = exp_school_CordAscent }\n    //--------------------------------Iterate through each features\n    if (this.state.feature_data != null) {\n      var feature_width=$(\".Sidebar_parent\").width()\n      var feature_height = 150; // Feature height for individual feature\n //--------------------------------------------- Iterate trough eact item and create histograms\n    items.forEach((feature, feature_index) => {\n        var feature_id = \"feature\"+feature.replace(/[^\\w\\s]/gi, '')\n        var temp = []\n        this.state.feature_data.forEach(element => {\n          if (element[\"1-qid\"] == self.props.selected_year) {\n            var temp_dict = {}\n            temp_dict[\"x\"] = parseInt(element['two_realRank'])\n            temp_dict[\"y\"] = element[feature]\n            temp.push(temp_dict)\n          }\n        });\n        d3.select(\"#histogram_container\").attr(\"height\", items.length * feature_height).selectAll(\"#\" + feature_id).data([feature_id], d => d).join(\"svg\").attr(\"id\", feature_id).attr(\"width\", feature_width)\n          .attr(\"x\", d => {\n            //--------------------------------------------- Create chart is imported from the Histogram.js and this is the function that creates all the histograms\n            CreateChart(feature, temp, \"#\" + feature_id, feature_height, self.props.selected_year, self.handleHistogramselection, self.state.feature_data)\n            return 0;\n          })\n          .attr(\"y\", (d, i) => feature_height * feature_index)\n      })\n    }\n  }\n  handleHistogramselection = (data, type) => {\n    \n    var temp = this.state.selected_states\n    data.forEach(element => {\n      if (!temp.includes(element)) { temp.push(element) }\n    });\n    this.setState({ selected_states: temp })\n  }\n  update_histogram_data = () => {\n    d3.selectAll(\".cat_item_clicked\").classed(\"cat_item_clicked\",false)\n    d3.selectAll(\".selection\").remove()\n    if(this.state.selected_states.length<1){alert(\"Empty selection!\");return}\n    var myfunc = this.props.appHandleChange\n    var filtered_states = this.state.selected_states.filter((item) => {\n      if (item >= this.props.state_range[0] && item <= this.props.state_range[1]) {\n        return item\n      }\n    })\n    if(filtered_states.length<1){alert(\"Empty Selection\")}\n    if (this.props.slider_and_feature_value[\"Feature\"] == 1 && this.props.slider_and_feature_value[\"Rank range\"] == 1) { // If rank range is selected then filter states within the range\n      this.props.Set_histogram_data(filtered_states)\n      myfunc(filtered_states, \"histogram_data\")\n    }\n    else {\n      this.props.Set_histogram_data(this.state.selected_states) // else set states as selected\n      myfunc(this.state.selected_states, \"histogram_data\")\n    }\n    this.setState({ selected_states: [] })\n  }\n  //-----------------------------------------------------------------\n  render() {\n    return (\n      <div>\n        <Button className=\"update\" style={{marginLeft:0,padding:0,width:197}} onClick={() => {\n          var self=this\n              if(!this.props.slider_and_feature_value[\"Rank range\"]){\n                if(d3.min(this.state.selected_states)<this.props.state_range[0]){\n                  this.props.Set_state_range([d3.min(this.state.selected_states),this.props.state_range[1]])\n                }\n                if(d3.max(this.state.selected_states)>this.props.state_range[1]){\n                  this.props.Set_state_range([this.props.state_range[0],d3.max(this.state.selected_states)])\n                }\n              }\n              setTimeout(function(){ self.update_histogram_data(); }, 500);\n          }}\n          >Update</Button>\n        <div className=\"hitograms_container\">\n        <svg id=\"histogram_container\" style={{ width: this.props.width }}></svg>\n        </div>\n      </div>\n    );\n  }\n  makeArr = (state_range) => {\n    var startValue = state_range[0];\n    var stopValue = state_range[1];\n    var arr = [];\n    for (var i = startValue; i <= stopValue; i++) {\n      arr.push(i);\n    }\n    return arr;\n  }\n}\nconst maptstateToprop = (state) => {\n  return {\n    state_range: state.state_range,\n    defualt_models: state.defualt_models,\n    dataset: state.dataset,\n    selected_year: state.selected_year,\n    slider_and_feature_value: state.slider_and_feature_value,\n    deviate_by:state.deviate_by,\n    rank_data:state.rank_data\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n    Set_sparkline_data: (val) => dispatch({ type: \"sparkline_data\", value: val }),\n    Set_histogram_data: (val) => dispatch({ type: \"histogram_data\", value: val }),\n    Set_state_range: (val) => dispatch({ type: \"state_range\", value: val }),\n    Set_clicked_items_in_slopechart: (val) => dispatch({ type: \"clicked_items_in_slopechart\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(Chart);","import React from 'react';\nimport { connect } from 'react-redux'\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Grid from '@material-ui/core/Grid';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nfunction Tracking(props) {\n  return (\n    <Grid\n      container\n      direction=\"row\"\n      justify=\"flex-start\"\n      alignItems=\"baseline\"\n    >\n      <FormControlLabel\n        labelPlacement=\"start\"\n        control={\n          <Checkbox\n            checked={props.tracking}\n            onChange={(event) => props.set_tracking(event.target.checked)}\n            name=\"checkedB\"\n            color=\"primary\"\n          />\n        }\n        label=\"Tracking\"\n      />\n    </Grid>\n  );\n}\n\nconst maptstateToprop = (state) => {\n  return {\n    tracking: state.tracking,\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    set_tracking: (val) => dispatch({ type: \"tracking\", value: val }),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(Tracking);\n//https://material-ui.com/components/menus/\n","import React from 'react';\nimport \"./Sidebar.scss\";\nimport * as $ from 'jquery';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Slider from '@material-ui/core/Slider';\nimport Histograms from \"./Histograms\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from \"react-redux\";\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from \"@material-ui/core/Button\";\nimport Grid from '@material-ui/core/Grid';\nimport Tracking from \"./Tracking\"\nimport * as algo1 from \"../../Algorithms/algo1\"\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n        flexBasis: '33.33%',\n        flexShrink: 0,\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    tRoot: {\n        marginBottom: 35,\n    },\n    rang_input: {\n        marginLeft: 10,\n    },\n}));\nfunction Modes(props) {\n    const classes = useStyles();\n    // states \n    const [sliderRange, set_sliderRange] = React.useState(props.state_range);\n    const [range_mode_slider_value1, set_range_mode_slider_value1] = React.useState(props.range_mode_range1);\n    const [range_mode_slider_value2, set_range_mode_slider_value2] = React.useState(props.range_mode_range2);\n    const [time_mode_slider_value, set_time_mode_slider_value] = React.useState(props.time_mode_range);\n    const [dummy, set_dummy] = React.useState(0);\n\n    //-----------------------------------------------------------------\n    var temp_marks = [];\n    var step = (props.slider_max - 1) / (6 - 1);\n    for (var i = 0; i < 6; i++) {\n        temp_marks.push(1 + (step * i));\n    }\n    var marks = temp_marks.map(item => {\n        var myitem = parseInt(item)\n        return { value: myitem, label: myitem }\n    })\n    //console.log(props.marks)\n    //-----------------------------------------------------------------\n    return (\n        <div style={{ borderTop: \"1px solid #eaeaea\" }}>\n            <p className=\"title_show\" style={{ marginBottom: 8 }}>Compare:</p>\n            <Autocomplete className=\"autocomplete_mode\" style={{ border: \"1px solid grey\", borderRadius: 0, paddingTop: 0, paddingBottom: 0, marginLeft: 5, marginRight: 30, width: $('.Sidebar').width() - 10 }}\n                defaultValue={\"Models\"}\n                id=\"debug\"\n                debug\n                options={[\"Models\", \"Ranges\", \"Time\"]}\n                renderInput={(params) => (\n                    <TextField {...params} label=\"\" margin=\"normal\" fullWidth={true} InputProps={{ ...params.InputProps, disableUnderline: true }} />\n                )}\n                onChange={(event, val) => {\n                    var value = val.replace('s', \"\")\n                    props.Set_mode(value)\n                    props.Set_clicked_items_in_slopechart([])\n                }\n                }\n            />\n            {props.mode == \"Model\" ? <div style={{ marginTop: 10, paddingLeft: 5, width: $('.Sidebar').width() }}>\n                <p style={{ marginLeft: 0, marginBottom: -5, marginTop: 15, marginRight: 12, paddingLeft: 5, backgroundColor: \"#f7f7f7\", fontSize: 16 }}>{props.dataset == \"fiscal\" ? \"Select states\" : \"Select \" + props.dataset + \"s\"}</p>\n                <div key={props.slider_and_feature_value} className=\"slider_feature_container\">\n                    <List className={classes.listroot}>\n                        {['Rank range', 'Feature'].map((value) => {\n                            const labelId = `checkbox-list-label-${value}`;\n                            return (\n                                <div className=\"listItem\"><ListItem key={value} role={undefined} >\n                                    <Checkbox\n                                        checked={props.slider_and_feature_value[value]}\n                                        edge=\"start\"\n                                        tabIndex={-1}\n                                        value={value}\n                                        onChange={(event) => {\n                                            var temp_val = props.slider_and_feature_value\n                                            if (props.slider_and_feature_value[event.target.value]) { temp_val[event.target.value] = 0 }\n                                            else { temp_val[event.target.value] = 1 }\n                                            set_dummy(JSON.stringify(temp_val)) // This is to change the state so that the component is updated\n                                            //console.log(\"dummy\",dummy)\n                                            props.Set_slider_and_feature_value(temp_val)\n                                        }}\n                                    />\n                                    <p className=\"list_item_label\" id={labelId}>{value}</p>\n                                </ListItem>\n                                </div>\n                            );\n                        })}\n                    </List>\n                </div>\n                {props.slider_and_feature_value[\"Rank range\"] == 1 ?\n                    <div className=\"rangeslider\" style={{ width: $('.Sidebar').width() - 12 }} >\n                        <Slider\n                            value={sliderRange}\n                            onChange={(event, newValue) => set_sliderRange(newValue)}\n                            onChangeCommitted={(event, newValue) => props.Set_changed(\"range\")}\n                            valueLabelDisplay=\"auto\"\n                            aria-labelledby=\"range-slider\"\n                            valueLabelDisplay=\"on\"\n                            min={1}\n                            max={props.slider_max}\n                            marks={marks}\n                        />\n                        <Grid style={{ marginBottom: 15 }} container\n                            direction=\"row\"\n                            justify=\"space-around\"\n                            alignItems=\"center\">\n                            <TextField classes={{ input: classes.rang_input }} id=\"standard-basic\" label=\"Lower\" value={sliderRange[0]} style={{ width: 40 }}\n                                onChange={event => {\n                                    if (isNaN(parseInt(event.target.value))) {\n                                        set_sliderRange([\"\", sliderRange[1]])\n                                    } else {\n                                        if (event.target.value > sliderRange[1]) {\n                                            alert(\"Lower range can not be larger than the upper range\")\n                                        }\n                                        else {\n                                            set_sliderRange([event.target.value, sliderRange[1]])\n                                        }\n                                    }\n                                }\n                                }\n                            />\n                            <TextField classes={{ input: classes.rang_input }} id=\"standard-basic\" label=\"Upper\" value={sliderRange[1]} style={{ width: 40 }}\n                                onChange={event => {\n                                    if (isNaN(parseInt(event.target.value))) {\n                                        set_sliderRange([sliderRange[0], \"\"])\n                                    } else {\n                                        if (parseInt(event.target.value) > props.slider_max) {\n                                            alert(\"Upper range can not exceed maximum\")\n                                            set_sliderRange([sliderRange[0], props.slider_max])\n                                        }\n                                        else {\n                                            set_sliderRange([sliderRange[0], parseInt(event.target.value)])\n                                        }\n                                    }\n                                }\n                                }\n                            />\n                        </Grid>\n                        <Tracking></Tracking>\n                        <Button className=\"range_button\" style={{ width: $('.Sidebar').width() - 11, backgroundColor: \"#ededed\", height: 30, marginBottom: 5, marginLeft: -3 }}\n                            onClick={() =>{\n                                props.Set_state_range(sliderRange)\n                                var temp_Models = algo1.sort(props.sort_by, sliderRange, props.defualt_models,props.selected_year, props.grouped_by_year_data)[0];\n                                var default_model_scores = algo1.sort(props.sort_by, sliderRange, props.defualt_models,props.selected_year, props.grouped_by_year_data)[1];\n                                props.Set_default_model_scores(default_model_scores)\n                                props.Set_defualt_models([...temp_Models])\n                                \n                            }}\n                        >Update range</Button>\n                    </div> : null}\n                {props.slider_and_feature_value[\"Feature\"] == 1 ?\n                    <div>\n                        <div>\n                            <Histograms\n                                year={props.selected_year.toString()} state_range={props.state_range}\n                                Sidebar_width={$('.Sidebar').width()} appHandleChange={props.appHandleChange}>\n                            </Histograms>\n                        </div>\n                    </div> : null\n                }\n            </div> : null}\n            {props.mode == \"Range\" ? <div style={{ marginTop: 10, paddingLeft: 5, width: $('.Sidebar').width() }}>\n                <div className=\"range_model\">\n                    <Autocomplete\n                        defaultValue={props.range_mode_model}\n                        id=\"debug\"\n                        debug\n                        options={[\"CordAscent\", \"LambdaMART\", \"LambdaRank\", \"LinearReg\", \"ListNet\", \"MART\", \"RandomFor\", \"RankBoost\", \"RankNet\"].map((option) => option)}\n                        renderInput={(params) => (\n                            <TextField {...params} label=\"Model\" margin=\"normal\" InputProps={{ ...params.InputProps, disableUnderline: true }} />\n                        )}\n                        onChange={(event, value) => props.Set_range_mode_model(value)}\n                    />\n                    <p style={{ marginLeft: 0, marginBottom: -5, marginTop: 15, marginRight: 12, paddingLeft: 5, backgroundColor: \"#f7f7f7\", fontSize: 16 }}>{props.dataset == \"fiscal\" ? \"Select states\" : \"Select \" + props.dataset + \"s\"}</p>\n                </div>\n                <div className=\"rangeslider\" style={{ width: $('.Sidebar').width() - 12 }} >\n                    <Typography classes={{ root: classes.tRoot }}>\n                        Group 1\n                        </Typography>\n                    <Slider\n                        value={range_mode_slider_value1}\n                        onChange={(event, newValue) => set_range_mode_slider_value1(newValue)}\n                        onChangeCommitted={(event, newValue) => props.Set_changed(\"range\")}\n                        valueLabelDisplay=\"auto\"\n                        aria-labelledby=\"range-slider\"\n                        valueLabelDisplay=\"on\"\n                        min={1}\n                        max={props.slider_max}\n                        marks={marks}\n                    />\n                    <Grid style={{ marginBottom: 15 }} container\n                        direction=\"row\"\n                        justify=\"space-around\"\n                        alignItems=\"center\">\n                        <TextField classes={{ input: classes.rang_input }} id=\"standard-basic\" label=\"Lower\" value={range_mode_slider_value1[0]} style={{ width: 40 }}\n                            onChange={event => {\n                                if (isNaN(parseInt(event.target.value))) {\n                                    set_range_mode_slider_value1([\"\", range_mode_slider_value1[1]])\n                                } else {\n                                    if (event.target.value > range_mode_slider_value1[1]) {\n                                        alert(\"Lower range can not be larger than the upper range\")\n                                    }\n                                    else {\n                                        set_range_mode_slider_value1([event.target.value, range_mode_slider_value1[1]])\n                                    }\n                                }\n                            }\n                            }\n                        />\n                        <TextField classes={{ input: classes.rang_input }} id=\"standard-basic\" label=\"Upper\" value={range_mode_slider_value1[1]} style={{ width: 40 }}\n                            onChange={event => {\n                                if (isNaN(parseInt(event.target.value))) {\n                                    set_range_mode_slider_value1([range_mode_slider_value1[0], \"\"])\n                                } else {\n                                    if (parseInt(event.target.value) > props.slider_max) {\n                                        alert(\"Upper range can not exceed maximum\")\n                                        set_range_mode_slider_value1([range_mode_slider_value1[0], props.slider_max])\n                                    }\n                                    else {\n                                        set_range_mode_slider_value1([range_mode_slider_value1[0], parseInt(event.target.value)])\n                                    }\n                                }\n                            }\n                            }\n                        />\n                    </Grid>\n                    <Button className=\"range_button\" style={{ width: $('.Sidebar').width() - 11, backgroundColor: \"#ededed\", height: 30, marginBottom: 5, marginLeft: -3 }}\n                        onClick={() => props.Set_range_mode_range1(range_mode_slider_value1)}\n                    >Update range</Button>\n                </div>\n                <div className=\"rangeslider\" style={{ width: $('.Sidebar').width() - 12 }} >\n                    <Typography classes={{ root: classes.tRoot }}>\n                        Group 2\n                        </Typography>\n                    <Slider\n                        value={range_mode_slider_value2}\n                        onChange={(event, newValue) => set_range_mode_slider_value2(newValue)}\n                        onChangeCommitted={(event, newValue) => { props.Set_changed(\"range\") }}\n                        valueLabelDisplay=\"auto\"\n                        aria-labelledby=\"range-slider\"\n                        valueLabelDisplay=\"on\"\n                        min={1}\n                        max={props.slider_max}\n                        marks={marks}\n                    />\n                </div>\n                <Grid style={{ marginBottom: 15 }} container\n                    direction=\"row\"\n                    justify=\"space-around\"\n                    alignItems=\"center\">\n                    <TextField classes={{ input: classes.rang_input }} id=\"standard-basic\" label=\"Lower\" value={range_mode_slider_value2[0]} style={{ width: 40 }}\n                        onChange={event => {\n                            if (isNaN(parseInt(event.target.value))) {\n                                set_range_mode_slider_value2([\"\", range_mode_slider_value2[1]])\n                            } else {\n                                if (event.target.value > range_mode_slider_value2[1]) {\n                                    alert(\"Lower range can not be larger than the upper range\")\n                                }\n                                else {\n                                    set_range_mode_slider_value2([event.target.value, range_mode_slider_value2[1]])\n                                }\n                            }\n                        }\n                        }\n                    />\n                    <TextField classes={{ input: classes.rang_input }} id=\"standard-basic\" label=\"Upper\" value={range_mode_slider_value2[1]} style={{ width: 40 }}\n                        onChange={event => {\n                            if (isNaN(parseInt(event.target.value))) {\n                                set_range_mode_slider_value2([range_mode_slider_value2[0], \"\"])\n                            } else {\n                                if (parseInt(event.target.value) > props.slider_max) {\n                                    alert(\"Upper range can not exceed maximum\")\n                                    set_range_mode_slider_value2([range_mode_slider_value2[0], props.slider_max])\n                                }\n                                else {\n                                    set_range_mode_slider_value2([range_mode_slider_value2[0], parseInt(event.target.value)])\n                                }\n                            }\n                        }\n                        }\n                    />\n                </Grid>\n                <Button className=\"range_button\" style={{ width: $('.Sidebar').width() - 11, backgroundColor: \"#ededed\", height: 30, marginBottom: 5, marginLeft: 0 }}\n                    onClick={() => props.Set_range_mode_range2(range_mode_slider_value2)}\n                >Update range</Button>\n\n            </div> : null}\n            {props.mode == \"Time\" ?\n                <div style={{ marginTop: 10, paddingLeft: 5, marginBottom: 10, width: $('.Sidebar').width() }}>\n                    <div className=\"model\">\n                        <Autocomplete\n                            defaultValue={props.time_mode_model}\n                            id=\"debug\"\n                            debug\n                            options={[\"CordAscent\", \"LambdaMART\", \"LambdaRank\", \"LinearReg\", \"ListNet\", \"MART\", \"RandomFor\", \"RankBoost\", \"RankNet\"].map((option) => option)}\n                            renderInput={(params) => (\n                                <TextField {...params} label=\"Model\" margin=\"normal\" InputProps={{ ...params.InputProps, disableUnderline: true }} />\n                            )}\n                            onChange={(event, value) => props.Set_time_mode_model(value)}\n                        />\n                        <p style={{ marginLeft: 0, marginBottom: -5, marginTop: 15, marginRight: 12, paddingLeft: 5, backgroundColor: \"#f7f7f7\", fontSize: 16 }}>{props.dataset == \"fiscal\" ? \"Select states\" : \"Select \" + props.dataset + \"s\"}</p>\n                        <div className=\"rangeslider\" style={{ width: $('.Sidebar').width() - 12 }} >\n                            <Slider\n                                value={time_mode_slider_value}\n                                onChange={(event, newValue) => set_time_mode_slider_value(newValue)}\n                                onChangeCommitted={(event, newValue) => props.Set_changed(\"range\")}\n                                valueLabelDisplay=\"auto\"\n                                aria-labelledby=\"range-slider\"\n                                valueLabelDisplay=\"on\"\n                                min={1}\n                                max={props.slider_max}\n                                marks={marks}\n                            />\n                            <Grid style={{ marginBottom: 15 }} container\n                                direction=\"row\"\n                                justify=\"space-around\"\n                                alignItems=\"center\">\n                                <TextField classes={{ input: classes.rang_input }} id=\"standard-basic\" label=\"Lower\" value={time_mode_slider_value[0]} style={{ width: 40 }}\n                                    onChange={event => {\n                                        if (isNaN(parseInt(event.target.value))) {\n                                            set_time_mode_slider_value([\"\", time_mode_slider_value[1]])\n                                        } else {\n                                            if (event.target.value > time_mode_slider_value[1]) {\n                                                alert(\"Lower range can not be larger than the upper range\")\n                                            }\n                                            else {\n                                                set_time_mode_slider_value([event.target.value, time_mode_slider_value[1]])\n                                            }\n                                        }\n                                    }\n                                    }\n                                />\n                                <TextField classes={{ input: classes.rang_input }} id=\"standard-basic\" label=\"Upper\" value={time_mode_slider_value[1]} style={{ width: 40 }}\n                                    onChange={event => {\n                                        if (isNaN(parseInt(event.target.value))) {\n                                            set_time_mode_slider_value([time_mode_slider_value[0], \"\"])\n                                        } else {\n                                            if (parseInt(event.target.value) > props.slider_max) {\n                                                alert(\"Upper range can not exceed maximum\")\n                                                set_time_mode_slider_value([time_mode_slider_value[0], props.slider_max])\n                                            }\n                                            else {\n                                                set_time_mode_slider_value([time_mode_slider_value[0], parseInt(event.target.value)])\n                                            }\n                                        }\n                                    }\n                                    }\n                                />\n                            </Grid>\n                            <Button className=\"range_button\" style={{ width: $('.Sidebar').width() - 11, backgroundColor: \"#ededed\", height: 30, marginBottom: 5, marginLeft: -3 }}\n                                onClick={() => props.Set_time_mode_range(time_mode_slider_value)}\n                            >Update range</Button>\n                        </div>\n                        <div className=\"year\">\n                            <Autocomplete className={{ root: classes.MuiAutocompleteroot }}\n                                defaultValue={props.time_mode_year1.toString()}\n                                id=\"debug\"\n                                debug\n                                options={props.years_for_dropdown.map((option) => option)}\n                                renderInput={(params) => (\n                                    <TextField {...params} label=\"Year 1\" margin=\"normal\" fullWidth={true} InputProps={{ ...params.InputProps, disableUnderline: true }} />\n                                )}\n                                onChange={(event, value) => {\n                                    props.Set_time_mode_year1(value)\n                                    props.Set_changed(\"year\")\n                                }}\n                            />\n                        </div>\n                        <div className=\"year\">\n                            <Autocomplete className={{ root: classes.MuiAutocompleteroot }}\n                                defaultValue={props.time_mode_year2.toString()}\n                                id=\"debug\"\n                                debug\n                                options={props.years_for_dropdown.map((option) => option)}\n                                renderInput={(params) => (\n                                    <TextField {...params} label=\"Year 2\" margin=\"normal\" fullWidth={true} InputProps={{ ...params.InputProps, disableUnderline: true }} />\n                                )}\n                                onChange={(event, value) => {\n                                    props.Set_time_mode_year2(value)\n                                    props.Set_changed(\"year\")\n                                }}\n                            />\n                        </div>\n                    </div></div> : null}\n        </div>\n    );\n}\nconst maptstateToprop = (state) => {\n    return {\n        selected_year: state.selected_year,\n        state_range: state.state_range,\n        mode: state.mode, // Model mode model\n        slider_max: state.slider_max,\n        range_mode_model: state.range_mode_model, // Range mode model\n        range_mode_range1: state.range_mode_range1,\n        range_mode_range2: state.range_mode_range2,\n        time_mode_model: state.time_mode_model, // Time mode model\n        time_mode_range: state.time_mode_range,\n        time_mode_year1: state.time_mode_year1,\n        time_mode_year2: state.time_mode_year2,\n        years_for_dropdown: state.years_for_dropdown,\n        dataset: state.dataset,\n        defualt_models: state.defualt_models,\n        slider_and_feature_value: state.slider_and_feature_value,\n        sort_by: state.sort_by,\n        grouped_by_year_data: state.grouped_by_year_data,\n    }\n}\nconst mapdispatchToprop = (dispatch) => {\n    return {\n        Set_slider_max: (val) => dispatch({ type: \"slider_max\", value: val }),\n        Set_years_for_dropdown: (val) => dispatch({ type: \"years_for_dropdown\", value: val }),\n        Set_state_range: (val) => dispatch({ type: \"state_range\", value: val }),\n        Set_mode: (val) => dispatch({ type: \"mode\", value: val }),\n        Set_range_mode_model: (val) => dispatch({ type: \"range_mode_model\", value: val }),\n        Set_time_mode_model: (val) => dispatch({ type: \"time_mode_model\", value: val }),\n        Set_range_mode_range1: (val) => dispatch({ type: \"range_mode_range1\", value: val }),\n        Set_range_mode_range2: (val) => dispatch({ type: \"range_mode_range2\", value: val }),\n        Set_time_mode_range: (val) => dispatch({ type: \"time_mode_range\", value: val }),\n        Set_time_mode_year1: (val) => dispatch({ type: \"time_mode_year1\", value: val }),\n        Set_time_mode_year2: (val) => dispatch({ type: \"time_mode_year2\", value: val }),\n        Set_histogram_data: (val) => dispatch({ type: \"histogram_data\", value: val }),\n        Set_slider_and_feature_value: (val) => dispatch({ type: \"slider_and_feature_value\", value: val }),\n        Set_clicked_items_in_slopechart: (val) => dispatch({ type: \"clicked_items_in_slopechart\", value: val }),\n        Set_changed: (val) => dispatch({ type: \"changed\", value: val }),\n        Set_pop_over_models: (val) => dispatch({ type: \"pop_over_models\", value: val }),\n        Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n        Set_default_model_scores: (val) => dispatch({ type: \"default_model_scores\", value: val }),\n\n    }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(Modes);","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport \"./Sidebar.scss\";\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField';\nimport { connect } from \"react-redux\";\nimport Modes from \"./Modes\"\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  listroot: {\n    width: '100%',\n    maxWidth: 360,\n  },\n  paper: {\n\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n}));\n\nfunction Sidebar(props) {\n  const classes = useStyles();\n  //------------For list and chckbox\n  const [checked, setChecked] = React.useState([0]);\n  const handleToggle = (value) => () => {\n    const currentIndex = checked.indexOf(value);\n    const newChecked = [...checked];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n    setChecked(newChecked);\n  };\n  const inputchanged = (event) => {\n    var val = parseInt(event.target.value)\n    if (val > -1) {\n      setTimeout(function () {\n        props.Set_deviate_by(val)\n      }, 100);\n\n    }\n  }\n  const show_checkboxChanged = (event,val) => {\n    var myfunc = props.appHandleChange\n    myfunc(val, \"show_checkboxChanged\")\n  }\n  return (\n    <div className=\"Sidebar_parent\" style={{height:window.innerHeight}}>\n      <h4 className=\"app_title\">RIEVAL </h4>\n      {props.view_data==1?\n      <div className=\"rangeSlidercontainer\">\n        <Modes appHandleChange={props.appHandleChange} ></Modes>\n        <div className=\"deviation\" style={{marginLeft:5, borderTop:\"0px solid #eaeaea\"}}>\n          <p className=\"title_show\">Margin:</p>\n          <TextField\n            id=\"outlined-size-normal\"\n            defaultValue={props.deviate_by}\n            variant=\"filled\"\n            color=\"primary\"\n            onChange={(event) => inputchanged(event)}\n            fullWidth={false}\n            style={{height:24}}\n          />\n        </div>\n        <div className=\"show\">\n          <p className=\"title_show\">Show:</p>\n          <List className={classes.listroot}>\n            {['Rankings', 'Explanation'].map((value) => {\n              const labelId = `checkbox-list-label-${value}`;\n              return (\n                <ListItem key={value} role={undefined} onClick={handleToggle(value)}>\n                  <Checkbox\n                    checked={props.show.includes(value)}\n                    edge=\"start\"\n                    tabIndex={-1}\n                    value={value}\n                    onChange={(event, value) => {\n                      var temp_show=[...props.show]\n                      if(temp_show.includes(event.target.value) && event.target.value!=\"Rankings\"){\n                        temp_show=temp_show.filter(item=>item!=event.target.value)\n                      }\n                      else{\n                        temp_show.push(event.target.value)\n                      }\n                      props.Set_show(temp_show)\n                    }\n                  }\n                  />\n                  <p className=\"list_item_label\" id={labelId}>{value}</p>\n                </ListItem>\n              );\n            })}\n          </List>\n        </div>\n      </div>:null}\n    </div>\n  );\n}\nconst maptstateToprop = (state) => {\n  return {\n    deviate_by:state.deviate_by,\n    state_range:state.state_range,\n    defualt_models:state.defualt_models,\n    selected_year:state.selected_year,\n    sparkline_data:state.sparkline_data,\n    show:state.show,\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n    Set_sparkline_data: (val) => dispatch({ type: \"sparkline_data\", value: val }),\n    Set_slider_max: (val) => dispatch({ type: \"slider_max\", value: val }),\n    Set_years_for_dropdown: (val) => dispatch({ type: \"years_for_dropdown\", value: val }),\n    Set_selected_year: (val) => dispatch({ type: \"selected_year\", value: val }),\n    Set_ref_year: (val) => dispatch({ type: \"ref_year\", value: val }),\n    Set_original_data: (val) => dispatch({ type: \"original_data\", value: val }),\n    Set_state_range: (val) => dispatch({ type: \"state_range\", value: val }),\n    Set_deviate_by:(val) => dispatch({ type: \"deviate_by\", value: val }),\n    Set_show:(val)=>dispatch({type:\"show\",value:val}),\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(Sidebar);\n\n//https://material-ui.com/api/slider/\n//https://material-ui.com/components/expansion-panels/\n//https://material-ui.com/api/checkbox/\n//https://material-ui.com/components/radio-buttons/","import React, { Component } from 'react';\n//------------------------------------------------All datasets imports\nimport fiscal from \"./Data/fiscal.csv\";\nimport school from \"./Data/school.csv\";\nimport house from \"./Data/house.csv\";\n\nimport fiscal_rank from \"./Data/data/fiscal/lime/fiscal_rank.csv\";\nimport fiscal_lime from \"./Data/data/fiscal/lime/fiscal_lime.csv\";\n\nimport school_rank from \"./Data/data/school/lime/school_rank.csv\";\nimport school_lime from \"./Data/data/school/lime/school_lime.csv\";\n\nimport house_rank from \"./Data/data/house/lime/house_rank.csv\";\nimport house_lime from \"./Data/data/house/lime/house_lime.csv\";\n//import fiscal from \"./Data/data/fiscal/lime/fiscal.json\";\n//import house from \"../Data/data/house/lime/house.json\";\n//------------------------------------------------All datasets imports ends here\nimport \"./App.scss\";\nimport * as d3 from 'd3';\nimport * as algo1 from \"./Algorithms/algo1\";\nimport ModelChart from \"./components/Charts/Model/ModelChart\"\nimport RangeChart from \"./components/Charts/Range/RangeChart\"\nimport YearChart from \"./components/Charts/Time/YearChart\"\nimport TopBar from \"./components/TopBar/TopBar\"\nimport { Row, Col } from 'reactstrap';\nimport Sidebar from \"./components/Sidebar/Sidebar\";\nimport Button from '@material-ui/core/Button';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport * as $ from 'jquery';\nimport { connect } from \"react-redux\";\nimport Grid from '@material-ui/core/Grid';\nimport \"./components/Charts/Charts.css\"\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    // mydata is original data\n    this.state = {\n      random: 10,\n      original_data: null, grouped_by_year_data: null, show: [\"Slope charts\", \"Rankings\", \"Explanation\"], view_data: 1,\n      histogram_data: [], ref_year: null, features_dict: {}, features_voted: null, Legend_ready_to_vis: null, legend_model: \"CordAscent\",\n    };\n  }\n  handleradioChange = (event) => {\n    this.setState({ show: [\"Slope charts\", \"Rankings\", \"Explanation\"] })\n    this.props.Set_slider_and_feature_value({ 'Rank range': 1, 'Feature': 0 })\n    this.props.Set_clicked_items_in_slopechart([])\n    this.props.Set_state_range([1, 15])\n    this.props.Set_histogram_data([])\n    this.props.Set_mode(\"Model\")\n    this.props.Set_range_mode_range1([5, 35])\n    this.props.Set_range_mode_range2([15, 35])\n    this.props.Set_time_mode_range([5, 35])\n    if (event.target.value == 'Fiscal Dataset') {\n      this.setState({ dataset: 'fiscal' })\n      this.props.Set_dataset('fiscal')\n      this.dataprocessor(\"fiscal\")\n    }\n    else if (event.target.value == 'House Dataset') {\n      this.setState({ dataset: 'house' })\n      this.props.Set_dataset('house')\n      this.dataprocessor(\"house\")\n    }\n    else {\n      this.setState({ dataset: 'school' })\n      this.props.Set_dataset('school')\n      this.dataprocessor(\"school\")\n    }\n  };\n\n  task2 = () => {\n    if (this.props.clicked_items_in_slopechart.length > 0) {\n      d3.selectAll('circle,.datapoint').attr('opacity', this.props.config.reduced_opacity)\n    }\n    this.props.clicked_items_in_slopechart.map(idName => d3.selectAll('#' + idName).attr('opacity', 1))\n  }\n\n  textClickHandler_original = (state_name) => { // state_name is set as the id of each element\n    var idName = state_name.replace(/ +/g, \"\")\n\n    //----Whatever properties are changed due to click change back here for the original \n    d3.selectAll('#' + idName).filter(d3.matcher('line')).style('stroke-width', 1)\n    //----Whatever properties are changed due to click change back here for the original\n\n    //-----Store the clicked items\n    var clicked_items_in_slopechart = [...this.props.clicked_items_in_slopechart]\n    if (clicked_items_in_slopechart.includes(idName)) {\n      clicked_items_in_slopechart = clicked_items_in_slopechart.filter(element => element != idName)\n    }\n    else { clicked_items_in_slopechart.push(idName) }\n    this.props.Set_clicked_items_in_slopechart(clicked_items_in_slopechart)\n    //-----Store the clicked items ends here\n\n    if (clicked_items_in_slopechart.length > 0) {\n      d3.selectAll('circle,.datapoint').attr('opacity', this.props.config.reduced_opacity)\n      this.props.clicked_items_in_slopechart.map(idName => {\n        d3.selectAll('#' + idName).attr('opacity', 1)\n        d3.selectAll('#' + idName).filter(d3.matcher('line')).style('stroke-width', 3)\n      })\n    }\n    else {\n      d3.selectAll('circle,.datapoint').attr('opacity', 1)\n    }\n\n    //d3.selectAll('.line1,.line2').attr('opacity',1)\n  }\n\n  //--------- data processor processes data for initial render\n  dataprocessor = (dataset_name) => {\n    if (dataset_name == \"school\") { this.process_data(school, school_rank, school_lime, dataset_name) }\n    if (dataset_name == \"fiscal\") { this.process_data(fiscal, fiscal_rank, fiscal_lime, dataset_name) }\n    if (dataset_name == \"house\") { this.process_data(house, house_rank, house_lime, dataset_name) }\n  }\n  process_data = (slopechart_data_filename, rank_data_filename, lime_data_filename, dataset_name) => {\n    var self = this\n    //-------------\n    d3.csv(slopechart_data_filename).then(original_data => {\n\n      var grouped_by_year_data = algo1.groupby_year(original_data).years\n      var sparkline_data = algo1.groupby_year(original_data).sparkline_data\n      var years_for_dropdown = Object.keys(grouped_by_year_data)\n      self.props.Set_sparkline_data(sparkline_data)\n      self.props.Set_slider_max(grouped_by_year_data[years_for_dropdown[0]].length)\n      self.setState({ years_for_dropdown: years_for_dropdown })\n      self.props.Set_years_for_dropdown(years_for_dropdown)\n      self.props.Set_time_mode_year1(years_for_dropdown[0])\n      self.props.Set_time_mode_year2(years_for_dropdown[1])\n      self.props.Set_legend_year(years_for_dropdown[0])\n      self.setState({ ref_year: years_for_dropdown[0] })\n      self.props.Set_grouped_by_year_data(grouped_by_year_data)\n      self.setState({ grouped_by_year_data: grouped_by_year_data }, () => {\n        self.appHandleChange(original_data, \"original\");\n      })\n      self.setState({ original_data: original_data })\n      self.props.Set_original_data(original_data)\n      if (dataset_name == 'fiscal') {\n        self.props.Set_selected_year(\"2011\")\n        var all_models = [\"MART\", \"RandomFor\", \"LinearReg\", \"CordAscent\", \"LambdaMART\", \"LambdaRank\", \"ListNet\", \"RankBoost\", \"RankNet\"]\n        var temp_Models = algo1.sort(this.props.sort_by, this.props.state_range, all_models, \"2011\", grouped_by_year_data)[0];\n        var default_model_scores = algo1.sort(this.props.sort_by, this.props.state_range, all_models, \"2011\", grouped_by_year_data)[1];\n      }\n      else {\n        self.props.Set_selected_year(\"2016\")\n        var all_models = [\"MART\", \"RandomFor\", \"LinearReg\", \"CordAscent\", \"LambdaMART\", \"LambdaRank\", \"ListNet\", \"RankBoost\", \"RankNet\"]\n        var temp_Models = algo1.sort(this.props.sort_by, this.props.state_range, all_models, \"2016\", grouped_by_year_data)[0];\n        var default_model_scores = algo1.sort(this.props.sort_by, this.props.state_range, all_models, \"2016\", grouped_by_year_data)[1];\n      }\n      this.props.Set_default_model_scores(default_model_scores)\n      this.props.Set_defualt_models(temp_Models.slice(1, 3))\n      this.props.Set_pop_over_models(temp_Models.slice(1, 3))\n\n    })\n    //-------------\n    d3.csv(rank_data_filename).then(data => {\n      var nested_data = {}\n      d3.nest().key(function (d) { return d.model; }).entries(data).map(item => {\n        nested_data[item.key] = item.values\n      })\n      self.props.Set_rank_data(nested_data)\n    })\n    //-------------\n    d3.csv(lime_data_filename).then(data => {\n      var nested_data = {}\n      d3.nest().key(function (d) { return d.model; }).entries(data).map(item => {\n        nested_data[item.key] = item.values\n      })\n      self.props.Set_lime_data(nested_data)\n    })\n\n  }\n  //---------\n  appHandleChange = (data, type) => { // get the resopnses from Sidebar\n    this.setState({ features_dict: {} })\n    var temp_Models = this.props.defualt_models\n    var temp_show = this.state.show\n    var year = this.props.selected_year\n    if (type == 'year_changed') { this.props.Set_selected_year(data) } // This is called when circles on the sparklines are clicked\n    if (type == 'original') { var original_data = data } else { original_data = this.props.original_data }\n    //-----------------Handle show changes here\n    if (type == \"show_checkboxChanged\") {\n      if (temp_show.includes(data)) { temp_show = temp_show.filter(element => element != data) }\n      else { temp_show.push(data) }\n      this.setState({ show: temp_show })\n    }\n    temp_Models = algo1.sort(this.props.sort_by, this.props.state_range, temp_Models, this.props.selected_year, this.state.grouped_by_year_data)[0];\n    this.setState({ defualt_models: temp_Models })\n    //--------------------------------------------------------------------------------------------------------------All types are handled here end\n    var prev_year;\n    if (parseInt(year) == this.state.years_for_dropdown[0]) { prev_year = parseInt(year) } else { prev_year = parseInt(year) - 1 }\n\n  }\n\n  buttonclickHandler = (value, type) => {\n    setTimeout(() => { this.setState({ random: Math.random() }) }, 500);\n    type = \"button\" ? this.setState({ view_data: value }) : null\n    type = \"form\" ? this.setState({ view_data: value }) : null\n  }\n  //-----------------Models are generated ends here\n  componentDidMount() {\n    this.dataprocessor(\"fiscal\")\n  }\n  shouldComponentUpdate() {\n    return true;\n  }\n  render() {\n    return (\n      <div key={this.state.random}>\n\n        <Row>\n          <div style={{ width: 207 }} className=\"Sidebar\">\n            {this.props.selected_year != null ?\n              <Sidebar view_data={this.state.view_data} appHandleChange={this.appHandleChange}\n                dataset={this.props.dataset} sort_by={this.props.sort_by} chart_scale_type={this.props.chart_scale_type}>\n              </Sidebar> : null}\n          </div>\n          <Col style={{ width: window.innerWidth - 200, minHeight: window.innerHeight }} className=\"container_header_and_components\">\n            <div className=\"uploader_topbar\">\n              <Grid container spacing={0} className=\"myheader\" style={{ left: $('.Sidebar').width() }}>\n                <Grid item style={{ borderRight: \"1px dashed #eaeaea\", width: 100 }}><Button onClick={() => this.buttonclickHandler(1, \"button\")}>View Data</Button></Grid>\n                <Grid item style={{ borderRight: \"1px dashed #eaeaea\", width: 120 }}><Button onClick={() => this.buttonclickHandler(0, \"button\")}>Load Data</Button></Grid>\n              </Grid>\n              {this.state.view_data == false ?\n                <Row className=\"Topbar_container\">\n                  <div className=\"load\">\n                    <form onSubmit={() => this.buttonclickHandler(1, \"form\")}>\n                      <FormControl component=\"fieldset\">\n                        <FormLabel component=\"legend\"></FormLabel>\n                        <RadioGroup aria-label=\"gender\" name=\"gender1\" onChange={this.handleradioChange}>\n                          {['Fiscal Dataset', 'School Dataset'].map((value) => {\n                            return <FormControlLabel value={value} control={<Radio />} label={value} />\n                          })}\n                        </RadioGroup>\n                        <Button type=\"submit\" variant=\"outlined\" color=\"primary\">Load</Button>\n                      </FormControl>\n                    </form>\n                  </div></Row>\n                : null}\n              {this.state.view_data == true ? <Row className=\"Topbar_container\"><TopBar key={this.props.selected_year} appHandleChange={this.appHandleChange} tracking={this.props.tracking}></TopBar></Row> : null}\n            </div>\n            {this.state.view_data == true ?\n              <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"center\" >\n                <Grid container spacing={0} direction=\"row\" justify=\"space-evenly\" className=\"slopechart_container\" style={{ height: this.props.mode == \"Time\" ? window.innerHeight - $('.myheader').height() - 5 : window.innerHeight - $('.uploader_topbar').height() - 5, marginLeft: 5, width: window.innerWidth - ($('.Sidebar_parent').width() + $('.legend').width() + 15) }}>\n                  {this.props.mode == \"Model\" && this.state.grouped_by_year_data != null && this.props.original_data != null && this.props.lime_data != null ? <ModelChart></ModelChart> : null}\n                </Grid>\n              </Grid> : null}\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n  makeArr = () => {\n    var startValue = this.props.state_range[0];\n    var stopValue = this.props.state_range[1];\n    var arr = [];\n    for (var i = startValue; i <= stopValue; i++) {\n      arr.push(i);\n    }\n    //hi\n    return arr;\n  }\n}\nconst maptstateToprop = (state) => {\n  return {\n    tracking: state.tracking,\n    state_range: state.state_range,\n    deviate_by: state.deviate_by,\n    defualt_models: state.defualt_models,\n    sparkline_data: state.sparkline_data,\n    selected_year: state.selected_year,\n    mode: state.mode,\n    range_mode_model: state.range_mode_model,\n    original_data: state.original_data,\n    time_mode_model: state.time_mode_model,\n    chart_scale_type: state.chart_scale_type,\n    dataset: state.dataset,\n    histogram_data: state.histogram_data,\n    sort_by: state.sort_by,\n    time_mode_year1: state.time_mode_year1,\n    time_mode_year2: state.time_mode_year2,\n    popup_chart_data: state.popup_chart_data,\n    clicked_items_in_slopechart: state.clicked_items_in_slopechart,\n    config: state.config,\n    lime_data: state.lime_data,\n    rank_data: state.rank_data,\n  }\n}\nconst mapdispatchToprop = (dispatch) => {\n  return {\n    Set_dataset: (val) => dispatch({ type: \"dataset\", value: val }),\n    Set_defualt_models: (val) => dispatch({ type: \"defualt_models\", value: val }),\n    Set_sparkline_data: (val) => dispatch({ type: \"sparkline_data\", value: val }),\n    Set_slider_max: (val) => dispatch({ type: \"slider_max\", value: val }),\n    Set_years_for_dropdown: (val) => dispatch({ type: \"years_for_dropdown\", value: val }),\n    Set_selected_year: (val) => dispatch({ type: \"selected_year\", value: parseInt(val) }),\n    Set_ref_year: (val) => dispatch({ type: \"ref_year\", value: val }),\n    Set_original_data: (val) => dispatch({ type: \"original_data\", value: val }),\n    Set_grouped_by_year_data: (val) => dispatch({ type: \"grouped_by_year_data\", value: val }),\n    Set_slider_and_feature_value: (val) => dispatch({ type: \"slider_and_feature_value\", value: val }),\n    Set_clicked_items_in_slopechart: (val) => dispatch({ type: \"clicked_items_in_slopechart\", value: val }),\n    Set_histogram_data: (val) => dispatch({ type: \"histogram_data\", value: val }),\n    Set_state_range: (val) => dispatch({ type: \"state_range\", value: val }),\n    Set_legend_year: (val) => dispatch({ type: \"legend_year\", value: val }),\n\n    Set_mode: (val) => dispatch({ type: \"mode\", value: val }),\n    Set_range_mode_range1: (val) => dispatch({ type: \"range_mode_range1\", value: val }),\n    Set_range_mode_range2: (val) => dispatch({ type: \"range_mode_range2\", value: val }),\n    Set_time_mode_range: (val) => dispatch({ type: \"time_mode_range\", value: val }),\n    Set_time_mode_year1: (val) => dispatch({ type: \"time_mode_year1\", value: val }),\n    Set_time_mode_year2: (val) => dispatch({ type: \"time_mode_year2\", value: val }),\n\n    Set_rank_data: (val) => dispatch({ type: \"rank_data\", value: val }),\n    Set_lime_data: (val) => dispatch({ type: \"lime_data\", value: val }),\n    Set_pop_over_models: (val) => dispatch({ type: \"pop_over_models\", value: val }),\n    Set_default_model_scores: (val) => dispatch({ type: \"default_model_scores\", value: val }),\n\n  }\n}\nexport default connect(maptstateToprop, mapdispatchToprop)(App);","let initialState = {\n   config: { \"reduced_opacity\": 0.2, \"animation1\": 4000, \"animation2\": 2000, \"animation3\": 4000, \"animation4\": 2500 },\n   appHandleChange: null,\n   sparkline_data: null,\n   sort_by: \"Average Precision\",\n   original_data: null,\n   rank_data: null,\n   lime_data: null,\n   grouped_by_year_data: null,\n   slope_chart_ready_to_vis: null,\n   defualt_models: [\"MART\", \"LinearReg\"], // Change the pop_over_models as well\n   state_range: [1, 25], // Change in handleradioChange\n   deviate_by: 0,\n   show: [\n      \"Slope charts\", \"Rankings\", \"Explanation\" // change in app.js\n   ],\n   years_for_dropdown: [\n      \"2006\"\n   ],\n   selected_year: 2006,\n   selected_years: [\"2006\"],\n   slider_min: 1,\n   slider_max: 50,\n   view_data: 1,\n   dataset: \"fiscal\", // change in componentDidmount in app.js too\n   histogram_data: [],\n   chart_scale_type: \"true\",\n   features_with_score: null,\n   ref_year: null,\n   cmodel: \"CordAscent\",\n   clicked_items_in_slopechart: [],\n   tracking: false,\n   dummy: null,\n   features_dict: {},\n   features_voted: null,\n   Legend_ready_to_vis: null,\n   legend_model: \"CordAscent\",\n   legend_show_option: \"Rank\",\n   legend_year: 2012,\n   mode: \"Model\",\n   range_mode_model: \"CordAscent\",\n   range_mode_range1: [1, 10],\n   range_mode_range2: [20, 30],\n   time_mode_model: \"CordAscent\",\n   time_mode_year1: \"Null\",\n   time_mode_year2: \"Null\",\n   time_mode_range: [6, 32],\n   chart_scale_type: \"true\",\n   slider_and_feature_value: { 'Rank range': 1, 'Feature': 0 },\n   prev_prop: {},\n   replay: false,\n   changed: \"year\",\n   popup_chart_data: null,\n   pop_over: true,\n   pop_over_models: [\"MART\", \"LinearReg\"],\n   clicked_features: [],\n   drag_drop_feautre_data: {},\n   dbclicked_features: [],\n   default_model_scores: {},\n   all_models: [\"MART\", \"RandomFor\", \"LinearReg\", \"CordAscent\", \"LambdaMART\", \"LambdaRank\", \"RankBoost\", \"RankNet\"],\n   average_y: false,\n   average_m: false,\n   clicked_circles:[]\n}\n//---InitialState ends here\nconst reducer = (state = initialState, action) => {\n   if (action.type === \"clicked_circles\") {\n      //console.log(action.value)\n      return { ...state, clicked_circles: action.value }\n   }\n   if (action.type === \"average_y\") {\n      console.log(action.value)\n      return { ...state, average_y: action.value }\n   }\n   if (action.type === \"average_m\") {\n      console.log(action.value)\n      return { ...state, average_m: action.value }\n   } \n   if (action.type === \"selected_years\") {\n      console.log(action.value)\n      return { ...state, selected_years: action.value[action.value.length-1],selected_year:action.value[action.value.length-1] }\n   }\n   if (action.type === \"default_model_scores\") {\n      //console.log(action.value)\n      return { ...state, default_model_scores: action.value }\n   }\n   if (action.type === \"dbclicked_features\") {\n      return { ...state, dbclicked_features: action.value }\n   }\n   if (action.type === \"drag_drop_feautre_data\") {\n      return { ...state, drag_drop_feautre_data: action.value }\n   }\n   if (action.type === \"config\") {\n      return { ...state, config: action.value }\n   }\n   if (action.type === \"show\") {\n      return { ...state, show: action.value }\n   }\n   if (action.type === \"lime_data\") {\n      return { ...state, lime_data: action.value }\n   }\n   if (action.type === \"defualt_models\") {\n      return { ...state, defualt_models: action.value }\n   }\n   if (action.type === \"rank_data\") {\n      return { ...state, rank_data: action.value }\n   }\n   if (action.type === \"original_data\") {\n      return { ...state, original_data: action.value }\n   }\n   if (action.type === \"years_for_dropdown\") {\n      return { ...state, years_for_dropdown: action.value }\n   }\n   if (action.type === \"appHandleChange\") {\n      return { ...state, appHandleChange: action.value }\n   }\n   if (action.type === \"state_range\") {\n      return { ...state, state_range: action.value }\n   }\n   if (action.type === \"selected_year\") {\n      return { ...state, selected_year: action.value,selected_years: [action.value.toString()] }\n   }\n   if (action.type === \"tracking\") {\n      return { ...state, tracking: action.value }\n   }\n   if (action.type === \"grouped_by_year_data\") {\n      return { ...state, grouped_by_year_data: action.value }\n   }\n   if (action.type === \"sort_by\") {\n      return { ...state, sort_by: action.value }\n   }\n   if (action.type === \"deviate_by\") {\n      return { ...state, deviate_by: action.value }\n   }\n   if (action.type === \"mode\") {\n      return { ...state, mode: action.value }\n   }\n   if (action.type === \"slider_max\") {\n      return { ...state, slider_max: action.value }\n   }\n   if (action.type === \"range_mode_model\") {\n      return { ...state, range_mode_model: action.value }\n   }\n   //----\n   if (action.type === \"range_mode_range1\") {\n      return { ...state, range_mode_range1: action.value }\n   }\n   if (action.type === \"range_mode_range2\") {\n      return { ...state, range_mode_range2: action.value }\n   }\n   if (action.type === \"time_mode_range\") {\n      return { ...state, time_mode_range: action.value }\n   }\n   if (action.type === \"time_mode_model\") {\n      return { ...state, time_mode_model: action.value }\n   }\n   if (action.type === \"time_mode_year1\") {\n      return { ...state, time_mode_year1: action.value }\n   }\n   if (action.type === \"time_mode_year2\") {\n      return { ...state, time_mode_year2: action.value }\n   }\n   if (action.type === \"clicked_items_in_slopechart\") {\n      return { ...state, clicked_items_in_slopechart: action.value }\n   }\n   if (action.type === \"features_with_score\") {\n      return { ...state, features_with_score: action.value }\n   }\n   if (action.type === \"sparkline_data\") {\n      return { ...state, sparkline_data: action.value }\n   }\n   if (action.type === \"legend_show_option\") {\n      return { ...state, legend_show_option: action.value }\n   }\n   if (action.type === \"legend_model\") {\n      return { ...state, legend_model: action.value }\n   }\n   if (action.type === \"histogram_data\") {\n      return { ...state, histogram_data: action.value }\n   }\n   if (action.type === \"dataset\") {\n      return { ...state, dataset: action.value }\n   }\n   if (action.type === \"slider_and_feature_value\") {\n      return { ...state, slider_and_feature_value: action.value }\n   }\n   if (action.type === \"legend_year\") {\n      return { ...state, legend_year: action.value }\n   }\n   if (action.type === \"prev_prop\") {\n      return { ...state, prev_prop: action.value }\n   }\n   if (action.type === \"replay\") {\n      return { ...state, replay: action.value }\n   }\n   if (action.type === \"changed\") {\n      return { ...state, changed: action.value }\n   }\n   if (action.type === \"popup_chart_data\") {\n      return { ...state, popup_chart_data: action.value }\n   }\n   if (action.type === \"pop_over\") {\n      return { ...state, pop_over: action.value }\n   }\n   if (action.type === \"pop_over_models\") {\n      var temp = action.value.filter(item => item != \"ListNet\")\n      return { ...state, pop_over_models: temp }\n   }\n   if (action.type === \"clicked_features\") {\n      //console.log(action.value)\n      return { ...state, clicked_features: action.value }\n   }\n   return state;\n}\nexport default reducer;","import { createMuiTheme } from '@material-ui/core/styles';\nconst theme = createMuiTheme({      \n  typography: {\n    button: {\n      textTransform: 'none'\n    }\n  }\n});\nexport default theme;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { createStore } from 'redux';\nimport {Provider} from 'react-redux';\nimport reducer from './store/reducer';\nimport theme from './Themes'; \nimport { ThemeProvider } from '@material-ui/styles';\nconst store=createStore(reducer);\nReactDOM.render( <ThemeProvider theme={theme}><Provider store={store}><App /></Provider></ThemeProvider>,document.getElementById('root'));\n\n\n","module.exports = __webpack_public_path__ + \"static/media/chart1_data.d3b20544.csv\";","module.exports = __webpack_public_path__ + \"static/media/chart1_data.cca71c9e.csv\";"],"sourceRoot":""}